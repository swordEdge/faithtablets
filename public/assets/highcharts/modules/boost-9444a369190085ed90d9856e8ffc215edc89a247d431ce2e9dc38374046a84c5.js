"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){!function(H){function patientMax(){var args=Array.prototype.slice.call(arguments),r=-Number.MAX_VALUE;return each(args,function(t){if(null!=t&&"undefined"!=typeof t.length&&0<t.length)return r=t.length,!0}),r}function shouldForceChartSeriesBoosting(chart){var series,sboostCount=0,canBoostCount=0,allowBoostForce=!0;if("undefined"!=typeof chart.boostForceChartBoost)return chart.boostForceChartBoost;if(allowBoostForce=chart.options.boost&&"undefined"!=typeof chart.options.boost.allowForce?chart.options.boost.allowForce:allowBoostForce,1<chart.series.length)for(var i=0;i<chart.series.length;i++)series=chart.series[i],boostableMap[series.type]&&++canBoostCount,patientMax(series.processedXData,series.options.data,series.points)>=(series.options.boostThreshold||Number.MAX_VALUE)&&++sboostCount;return chart.boostForceChartBoost=allowBoostForce&&canBoostCount===chart.series.length&&0<sboostCount||5<sboostCount,chart.boostForceChartBoost}function GLShader(gl){function stringToProgram(str,type){var t="vertex"===type?gl.VERTEX_SHADER:gl.FRAGMENT_SHADER,shader=gl.createShader(t);return gl.shaderSource(shader,str),gl.compileShader(shader),!!gl.getShaderParameter(shader,gl.COMPILE_STATUS)&&shader}function createShader(){function uloc(n){return gl.getUniformLocation(shaderProgram,n)}var v=stringToProgram(vertShade,"vertex"),f=stringToProgram(fragShade,"fragment");return v&&f?(shaderProgram=gl.createProgram(),gl.attachShader(shaderProgram,v),gl.attachShader(shaderProgram,f),gl.linkProgram(shaderProgram),gl.useProgram(shaderProgram),gl.bindAttribLocation(shaderProgram,0,"aVertexPosition"),pUniform=uloc("uPMatrix"),psUniform=uloc("pSize"),fillColorUniform=uloc("fillColor"),isBubbleUniform=uloc("isBubble"),bubbleSizeAbsUniform=uloc("bubbleSizeAbs"),bubbleSizeAreaUniform=uloc("bubbleSizeByArea"),uSamplerUniform=uloc("uSampler"),skipTranslationUniform=uloc("skipTranslation"),isCircleUniform=uloc("isCircle"),isInverted=uloc("isInverted"),plotHeightUniform=uloc("plotHeight"),!0):shaderProgram=!1}function destroy(){gl&&shaderProgram&&(gl.deleteProgram(shaderProgram),shaderProgram=!1)}function bind(){gl.useProgram(shaderProgram)}function setUniform(name,val){var u=uLocations[name]=uLocations[name]||gl.getUniformLocation(shaderProgram,name);gl.uniform1f(u,val)}function setTexture(){gl.uniform1i(uSamplerUniform,0)}function setInverted(flag){gl.uniform1i(isInverted,flag)}function setDrawAsCircle(flag){gl.uniform1i(isCircleUniform,flag?1:0)}function setPlotHeight(n){gl.uniform1f(plotHeightUniform,n)}function reset(){gl.uniform1i(isBubbleUniform,0),gl.uniform1i(isCircleUniform,0)}function setBubbleUniforms(series,zCalcMin,zCalcMax){var seriesOptions=series.options,zMin=Number.MAX_VALUE,zMax=-Number.MAX_VALUE;"bubble"===series.type&&(zMin=pick(seriesOptions.zMin,Math.min(zMin,Math.max(zCalcMin,!1===seriesOptions.displayNegative?seriesOptions.zThreshold:-Number.MAX_VALUE))),zMax=pick(seriesOptions.zMax,Math.max(zMax,zCalcMax)),gl.uniform1i(isBubbleUniform,1),gl.uniform1i(isCircleUniform,1),gl.uniform1i(bubbleSizeAreaUniform,"width"!==series.options.sizeBy),gl.uniform1i(bubbleSizeAbsUniform,series.options.sizeByAbsoluteValue),setUniform("bubbleZMin",zMin),setUniform("bubbleZMax",zMax),setUniform("bubbleZThreshold",series.options.zThreshold),setUniform("bubbleMinSize",series.minPxSize),setUniform("bubbleMaxSize",series.maxPxSize))}function setColor(color){gl.uniform4f(fillColorUniform,color[0]/255,color[1]/255,color[2]/255,color[3])}function setSkipTranslation(flag){gl.uniform1i(skipTranslationUniform,!0===flag?1:0)}function setPMatrix(m){gl.uniformMatrix4fv(pUniform,!1,m)}function setPointSize(p){gl.uniform1f(psUniform,p)}function getProgram(){return shaderProgram}var shaderProgram,pUniform,psUniform,fillColorUniform,isBubbleUniform,bubbleSizeAbsUniform,bubbleSizeAreaUniform,skipTranslationUniform,isCircleUniform,isInverted,plotHeightUniform,uSamplerUniform,vertShade=["#version 100","precision highp float;","attribute vec4 aVertexPosition;","attribute vec4 aColor;","varying highp vec2 position;","varying highp vec4 vColor;","uniform mat4 uPMatrix;","uniform float pSize;","uniform float translatedThreshold;","uniform bool hasThreshold;","uniform bool skipTranslation;","uniform float plotHeight;","uniform float xAxisTrans;","uniform float xAxisMin;","uniform float xAxisMinPad;","uniform float xAxisPointRange;","uniform float xAxisLen;","uniform bool  xAxisPostTranslate;","uniform float xAxisOrdinalSlope;","uniform float xAxisOrdinalOffset;","uniform float xAxisPos;","uniform bool  xAxisCVSCoord;","uniform float yAxisTrans;","uniform float yAxisMin;","uniform float yAxisMinPad;","uniform float yAxisPointRange;","uniform float yAxisLen;","uniform bool  yAxisPostTranslate;","uniform float yAxisOrdinalSlope;","uniform float yAxisOrdinalOffset;","uniform float yAxisPos;","uniform bool  yAxisCVSCoord;","uniform bool  isBubble;","uniform bool  bubbleSizeByArea;","uniform float bubbleZMin;","uniform float bubbleZMax;","uniform float bubbleZThreshold;","uniform float bubbleMinSize;","uniform float bubbleMaxSize;","uniform bool  bubbleSizeAbs;","uniform bool  isInverted;","float bubbleRadius(){","float value = aVertexPosition.w;","float zMax = bubbleZMax;","float zMin = bubbleZMin;","float radius = 0.0;","float pos = 0.0;","float zRange = zMax - zMin;","if (bubbleSizeAbs){","value = value - bubbleZThreshold;","zMax = max(zMax - bubbleZThreshold, zMin - bubbleZThreshold);","zMin = 0.0;","}","if (value < zMin){","radius = bubbleZMin / 2.0 - 1.0;","} else {","pos = zRange > 0.0 ? (value - zMin) / zRange : 0.5;","if (bubbleSizeByArea && pos > 0.0){","pos = sqrt(pos);","}","radius = ceil(bubbleMinSize + pos * (bubbleMaxSize - bubbleMinSize)) / 2.0;","}","return radius * 2.0;","}","float translate(float val,","float pointPlacement,","float localA,","float localMin,","float minPixelPadding,","float pointRange,","float len,","bool  cvsCoord","){","float sign = 1.0;","float cvsOffset = 0.0;","if (cvsCoord) {","sign *= -1.0;","cvsOffset = len;","}","return sign * (val - localMin) * localA + cvsOffset + ","(sign * minPixelPadding);","}","float xToPixels(float value){","if (skipTranslation){","return value;// + xAxisPos;","}","return translate(value, 0.0, xAxisTrans, xAxisMin, xAxisMinPad, xAxisPointRange, xAxisLen, xAxisCVSCoord);// + xAxisPos;","}","float yToPixels(float value, float checkTreshold){","float v;","if (skipTranslation){","v = value;// + yAxisPos;","} else {","v = translate(value, 0.0, yAxisTrans, yAxisMin, yAxisMinPad, yAxisPointRange, yAxisLen, yAxisCVSCoord);// + yAxisPos;","if (v > plotHeight) {","v = plotHeight;","}","}","if (checkTreshold > 0.0 && hasThreshold) {","v = min(v, translatedThreshold);","}","return v;","}","void main(void) {","if (isBubble){","gl_PointSize = bubbleRadius();","} else {","gl_PointSize = pSize;","}","vColor = aColor;","if (isInverted) {","gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.y) + yAxisPos, yToPixels(aVertexPosition.x, aVertexPosition.z) + xAxisPos, 0.0, 1.0);","} else {","gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.x) + xAxisPos, yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, 0.0, 1.0);","}","}"].join("\n"),fragShade=["precision highp float;","uniform vec4 fillColor;","varying highp vec2 position;","varying highp vec4 vColor;","uniform sampler2D uSampler;","uniform bool isCircle;","uniform bool hasColor;","void main(void) {","vec4 col = fillColor;","vec4 tcol;","if (hasColor) {","col = vColor;","}","if (isCircle) {","tcol = texture2D(uSampler, gl_PointCoord.st);","col *= tcol;","if (tcol.r < 0.0) {","discard;","} else {","gl_FragColor = col;","}","} else {","gl_FragColor = col;","}","}"].join("\n"),uLocations={};return gl&&createShader(),{psUniform:function(){return psUniform},pUniform:function(){return pUniform},fillColorUniform:function(){return fillColorUniform},setPlotHeight:setPlotHeight,setBubbleUniforms:setBubbleUniforms,bind:bind,program:getProgram,create:createShader,setUniform:setUniform,setPMatrix:setPMatrix,setColor:setColor,setPointSize:setPointSize,setSkipTranslation:setSkipTranslation,setTexture:setTexture,setDrawAsCircle:setDrawAsCircle,reset:reset,setInverted:setInverted,destroy:destroy}}function GLVertexBuffer(gl,shader,dataComponents){function destroy(){buffer&&(gl.deleteBuffer(buffer),vertAttribute=buffer=!1),iterator=0,components=dataComponents||2,data=[]}function build(dataIn,attrib,dataComponents){var farray;return(data=dataIn||[])&&0!==data.length||preAllocated?(components=dataComponents||components,buffer&&gl.deleteBuffer(buffer),preAllocated||(farray=new Float32Array(data)),buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,preAllocated||farray,gl.STATIC_DRAW),vertAttribute=gl.getAttribLocation(shader.program(),attrib),gl.enableVertexAttribArray(vertAttribute),!(farray=!1)):(destroy(),!1)}function bind(){if(!buffer)return!1;gl.vertexAttribPointer(vertAttribute,components,gl.FLOAT,!1,0,0)}function render(from,to,drawMode){var length=preAllocated?preAllocated.length:data.length;return!!buffer&&(!!length&&((!from||length<from||from<0)&&(from=0),(!to||length<to)&&(to=length),drawMode=drawMode||"points",gl.drawArrays(gl[drawMode.toUpperCase()],from/components,(to-from)/components),!0))}function push(x,y,a,b){preAllocated&&(preAllocated[++iterator]=x,preAllocated[++iterator]=y,preAllocated[++iterator]=a,preAllocated[++iterator]=b)}function allocate(size){iterator=-1,preAllocated=new Float32Array(size*=4)}var data,buffer=!1,vertAttribute=!1,components=dataComponents||2,preAllocated=!1,iterator=0;return{destroy:destroy,bind:bind,data:data,build:build,render:render,allocate:allocate,push:push}}function GLRenderer(postRenderCallback){function setOptions(options){merge(!0,settings,options)}function seriesPointCount(series){var isStacked,xData,s;return series.isSeriesBoosting?(isStacked=!!series.options.stacking,xData=series.xData||series.options.xData||series.processedXData,s=(isStacked?series.data:xData||series.options.data).length,"treemap"===series.type?s*=12:"heatmap"===series.type?s*=6:asBar[series.type]&&(s*=2),s):0}function allocateBuffer(chart){var s=0;settings.usePreallocated&&(each(chart.series,function(series){series.isSeriesBoosting&&(s+=seriesPointCount(series))}),vbuffer.allocate(s))}function allocateBufferForSingleSeries(series){var s=0;settings.usePreallocated&&(series.isSeriesBoosting&&(s=seriesPointCount(series)),vbuffer.allocate(s))}function orthoMatrix(width,height){var near=0,far=1;return[2/width,0,0,0,0,-2/height,0,0,0,0,-2/(far-near),0,-1,1,-(far+near)/(far-near),1]}function clear(){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)}function getGL(){return gl}function pushSeriesData(series,inst){function pushColor(color){color&&(inst.colorData.push(color[0]),inst.colorData.push(color[1]),inst.colorData.push(color[2]),inst.colorData.push(color[3]))}function vertice(x,y,checkTreshold,pointSize,color){pushColor(color),settings.usePreallocated?vbuffer.push(x,y,checkTreshold?1:0,pointSize||1):(data.push(x),data.push(y),data.push(checkTreshold?1:0),data.push(pointSize||1))}function pushRect(x,y,w,h,color){pushColor(color),vertice(x+w,y),pushColor(color),vertice(x,y),pushColor(color),vertice(x,y+h),pushColor(color),vertice(x,y+h),pushColor(color),vertice(x+w,y+h),pushColor(color),vertice(x+w,y)}function pushSupplementPoint(point){settings.useGPUTranslations||(inst.skipTranslation=!0,point.x=xAxis.toPixels(point.x,!0),point.y=yAxis.toPixels(point.y,!0)),vertice(point.x,point.y,0,2)}var minVal,color,scolor,x,y,d,z,isRange=series.pointArrayMap&&"low,high"===series.pointArrayMap.join(","),chart=series.chart,options=series.options,isStacked=!!options.stacking,rawData=options.data,xExtremes=series.xAxis.getExtremes(),xMin=xExtremes.min,xMax=xExtremes.max,yExtremes=series.yAxis.getExtremes(),yMin=yExtremes.min,yMax=yExtremes.max,xData=series.xData||options.xData||series.processedXData,yData=series.yData||options.yData||series.processedYData,zData=series.zData||options.zData||series.processedZData,yAxis=series.yAxis,xAxis=series.xAxis,plotHeight=series.chart.plotHeight,useRaw=!xData||0===xData.length,points=series.points||!1,lastX=!1,lastY=!1,sdata=isStacked?series.data:xData||rawData,closestLeft={x:Number.MIN_VALUE,y:0},closestRight={x:Number.MIN_VALUE,y:0},skipped=0,cullXThreshold=1,cullYThreshold=1,i=-1,px=!1,nx=!1,chartDestroyed="undefined"==typeof chart.index,nextInside=!1,prevInside=!1,pcolor=!1,drawAsBar=asBar[series.type],isXInside=!1,isYInside=!0;if(!(options.boostData&&0<options.boostData.length)){if(series.closestPointRangePx=Number.MAX_VALUE,points&&0<points.length)return inst.skipTranslation=!0,inst.drawMode="triangles",points[0].node&&points[0].node.levelDynamic&&points.sort(function(a,b){if(a.node){if(a.node.levelDynamic>b.node.levelDynamic)return 1;if(a.node.levelDynamic<b.node.levelDynamic)return-1}return 0}),void each(points,function(point){var shapeArgs,swidth,pointAttr,plotY=point.plotY;void 0===plotY||isNaN(plotY)||null===point.y||(shapeArgs=point.shapeArgs,swidth=(pointAttr=point.series.pointAttribs(point))["stroke-width"]||0,(color=H.color(pointAttr.fill).rgba)[0]/=255,color[1]/=255,color[2]/=255,"treemap"===series.type&&(swidth=swidth||1,(scolor=H.color(pointAttr.stroke).rgba)[0]/=255,scolor[1]/=255,scolor[2]/=255,pushRect(shapeArgs.x,shapeArgs.y,shapeArgs.width,shapeArgs.height,scolor),swidth/=2),"heatmap"===series.type&&chart.inverted&&(shapeArgs.x=xAxis.len-shapeArgs.x,shapeArgs.y=yAxis.len-shapeArgs.y,shapeArgs.width=-shapeArgs.width,shapeArgs.height=-shapeArgs.height),pushRect(shapeArgs.x+swidth,shapeArgs.y+swidth,shapeArgs.width-2*swidth,shapeArgs.height-2*swidth,color))});for(;i<sdata.length-1&&(d=sdata[++i],!chartDestroyed);)useRaw?(x=d[0],y=d[1],sdata[i+1]&&(nx=sdata[i+1][0]),sdata[i-1]&&(px=sdata[i-1][0]),3<=d.length&&(z=d[2],d[2]>inst.zMax&&(inst.zMax=d[2]),d[2]<inst.zMin&&(inst.zMin=d[2]))):(x=d,y=yData[i],sdata[i+1]&&(nx=sdata[i+1]),sdata[i-1]&&(px=sdata[i-1]),zData&&zData.length&&(z=zData[i],zData[i]>inst.zMax&&(inst.zMax=zData[i]),zData[i]<inst.zMin&&(inst.zMin=zData[i]))),nx&&xMin<=nx&&nx<=xMax&&(nextInside=!0),px&&xMin<=px&&px<=xMax&&(prevInside=!0),isRange?(useRaw&&(y=d.slice(1,3)),y[0],y=y[1]):isStacked&&(x=d.x,(y=d.stackY)-d.y),series.requireSorting||(isYInside=yMin<=y&&y<=yMax),xMax<x&&closestRight.x<xMax&&(closestRight.x=x,closestRight.y=y),x<xMin&&closestLeft.x<xMin&&(closestLeft.x=x,closestLeft.y=y),(0===y||y&&isYInside)&&(xMin<=x&&x<=xMax&&(isXInside=!0),(isXInside||nextInside||prevInside)&&(settings.useGPUTranslations||(inst.skipTranslation=!0,x=xAxis.toPixels(x,!0),plotHeight<(y=yAxis.toPixels(y,!0))&&(y=plotHeight)),drawAsBar&&(y<(minVal=0)&&(minVal=y,y=0),settings.useGPUTranslations||(minVal=yAxis.toPixels(minVal,!0)),vertice(x,minVal,0,0,pcolor)),inst.hasMarkers&&!1!==lastX&&(series.closestPointRangePx=Math.min(series.closestPointRangePx,Math.abs(x-lastX))),!settings.useGPUTranslations&&!settings.usePreallocated&&lastX&&x-lastX<cullXThreshold&&lastY&&Math.abs(y-lastY)<cullYThreshold?settings.debug.showSkipSummary&&++skipped:(options.step&&vertice(x,lastY,0,2,pcolor),vertice(x,y,0,"bubble"===series.type?z||1:2,pcolor),lastX=x,lastY=y)));settings.debug.showSkipSummary&&console.log("skipped points:",skipped),lastX||(pushSupplementPoint(closestLeft),pushSupplementPoint(closestRight))}}function pushSeries(s){0<series.length&&(series[series.length-1].to=data.length,series[series.length-1].hasMarkers&&(series[series.length-1].markerTo=markerData.length)),settings.debug.timeSeriesProcessing&&console.time("building "+s.type+" series"),series.push({from:data.length,markerFrom:markerData.length,colorData:[],series:s,zMin:Number.MAX_VALUE,zMax:-Number.MAX_VALUE,hasMarkers:!!s.options.marker&&!1!==s.options.marker.enabled,showMarksers:!0,drawMode:{area:"lines",arearange:"lines",areaspline:"line_strip",column:"lines",bar:"lines",line:"line_strip",scatter:"points",heatmap:"triangles",treemap:"triangles",bubble:"points"}[s.type]||"line_strip"}),pushSeriesData(s,series[series.length-1]),settings.debug.timeSeriesProcessing&&console.timeEnd("building "+s.type+" series")}function flush(){series=[],exports.data=data=[],markerData=[],vbuffer&&vbuffer.destroy()}function setXAxis(axis){shader&&(shader.setUniform("xAxisTrans",axis.transA),shader.setUniform("xAxisMin",axis.min),shader.setUniform("xAxisMinPad",axis.minPixelPadding),shader.setUniform("xAxisPointRange",axis.pointRange),shader.setUniform("xAxisLen",axis.len),shader.setUniform("xAxisPos",axis.pos),shader.setUniform("xAxisCVSCoord",!axis.horiz))}function setYAxis(axis){shader&&(shader.setUniform("yAxisTrans",axis.transA),shader.setUniform("yAxisMin",axis.min),shader.setUniform("yAxisMinPad",axis.minPixelPadding),shader.setUniform("yAxisPointRange",axis.pointRange),shader.setUniform("yAxisLen",axis.len),shader.setUniform("yAxisPos",axis.pos),shader.setUniform("yAxisCVSCoord",!axis.horiz))}function setThreshold(has,translation){shader.setUniform("hasThreshold",has),shader.setUniform("translatedThreshold",translation)}function render(chart){return!!chart&&(!chart.chartHeight||chart.chartWidth,width=chart.chartWidth||800,height=chart.chartHeight||400,!!(gl&&width&&height)&&(settings.debug.timeRendering&&console.time("gl rendering"),gl.canvas.width=width,gl.canvas.height=height,shader.bind(),gl.viewport(0,0,width,height),shader.setPMatrix(orthoMatrix(width,height)),shader.setPlotHeight(chart.plotHeight),1<settings.lineWidth&&!H.isMS&&gl.lineWidth(settings.lineWidth),vbuffer.build(exports.data,"aVertexPosition",4),vbuffer.bind(),textureIsReady&&(gl.bindTexture(gl.TEXTURE_2D,circleTextureHandle),shader.setTexture(circleTextureHandle)),shader.setInverted(chart.inverted),each(series,function(s,si){var cbuffer,color,options=s.series.options,threshold=options.threshold,hasThreshold=isNumber(threshold),translatedThreshold=s.series.yAxis.getThreshold(threshold),showMarkers=pick(options.marker?options.marker.enabled:null,!!s.series.xAxis.isRadial||null,s.series.closestPointRangePx>2*((options.marker?options.marker.radius:10)||10)),fillColor=s.series.pointAttribs&&s.series.pointAttribs().fill||s.series.color;s.series.fillOpacity&&options.fillOpacity&&(fillColor=new Color(fillColor).setOpacity(pick(options.fillOpacity,1)).get()),options.colorByPoint&&(fillColor=s.series.chart.options.colors[si]),color=H.color(fillColor).rgba,settings.useAlpha||(color[3]=1),"lines"===s.drawMode&&settings.useAlpha&&color[3]<1&&(color[3]/=10),"add"===options.boostBlending?(gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.blendEquation(gl.FUNC_ADD)):"mult"===options.boostBlending?gl.blendFunc(gl.DST_COLOR,gl.ZERO):"darken"===options.boostBlending?(gl.blendFunc(gl.ONE,gl.ONE),gl.blendEquation(gl.FUNC_MIN)):gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA),shader.reset(),0<s.colorData.length&&(shader.setUniform("hasColor",1),(cbuffer=GLVertexBuffer(gl,shader)).build(s.colorData,"aColor",4),cbuffer.bind()),shader.setColor(color),setXAxis(s.series.xAxis),setYAxis(s.series.yAxis),setThreshold(hasThreshold,translatedThreshold),"points"===s.drawMode&&(options.marker&&options.marker.radius?shader.setPointSize(2*options.marker.radius):shader.setPointSize(1)),shader.setSkipTranslation(s.skipTranslation),"bubble"===s.series.type&&shader.setBubbleUniforms(s.series,s.zMin,s.zMax),shader.setDrawAsCircle(asCircle[s.series.type]&&textureIsReady||!1),vbuffer.render(s.from,s.to,s.drawMode),s.hasMarkers&&showMarkers&&(options.marker&&options.marker.radius?shader.setPointSize(2*options.marker.radius):shader.setPointSize(10),shader.setDrawAsCircle(!0),vbuffer.render(s.from,s.to,"POINTS"))}),settings.debug.timeRendering&&console.timeEnd("gl rendering"),postRenderCallback&&postRenderCallback(),void flush()))}function renderWhenReady(chart){if(clear(),chart.renderer.forExport)return render(chart);isInited?render(chart):setTimeout(function(){renderWhenReady(chart)},1)}function setSize(w,h){width===w&&h==h||(width=w,height=h,shader.bind(),shader.setPMatrix(orthoMatrix(width,height)))}function init(canvas,noFlush){var i=0,contexts=["webgl","experimental-webgl","moz-webgl","webkit-3d"];if(isInited=!1,!canvas)return!1;for(settings.debug.timeSetup&&console.time("gl setup");i<contexts.length&&!(gl=canvas.getContext(contexts[i],{}));i++);if(!gl)return!1;noFlush||flush(),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.disable(gl.DEPTH_TEST),gl.depthFunc(gl.LESS),shader=GLShader(gl),vbuffer=GLVertexBuffer(gl,shader),textureIsReady=!1,circleTextureHandle=gl.createTexture(),circleTexture.width=512,circleTexture.height=512,circleCtx.mozImageSmoothingEnabled=!1,circleCtx.webkitImageSmoothingEnabled=!1,circleCtx.msImageSmoothingEnabled=!1,circleCtx.imageSmoothingEnabled=!1,circleCtx.strokeStyle="rgba(255, 255, 255, 0)",circleCtx.fillStyle="#FFF",circleCtx.beginPath(),circleCtx.arc(256,256,256,0,2*Math.PI),circleCtx.stroke(),circleCtx.fill();try{gl.bindTexture(gl.TEXTURE_2D,circleTextureHandle),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,circleTexture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.bindTexture(gl.TEXTURE_2D,null),textureIsReady=!0}catch(e){}return isInited=!0,settings.debug.timeSetup&&console.timeEnd("gl setup"),!0}function valid(){return!1!==gl}function inited(){return isInited}function destroy(){flush(),vbuffer.destroy(),shader.destroy(),gl&&(circleTextureHandle&&gl.deleteTexture(circleTextureHandle),gl.canvas.width=1,gl.canvas.height=1)}var circleTextureHandle,shader=!1,vbuffer=!1,gl=!1,width=0,height=0,data=!1,markerData=!1,textureIsReady=!1,exports={},isInited=!1,series=[],circleTexture=doc.createElement("canvas"),circleCtx=circleTexture.getContext("2d"),asBar={column:!0,bar:!0,area:!0},asCircle={scatter:!0,bubble:!0},settings={pointSize:1,lineWidth:1,fillColor:"#AA00AA",useAlpha:!0,usePreallocated:!1,useGPUTranslations:!1,debug:{timeRendering:!1,timeSeriesProcessing:!1,timeSetup:!1,timeBufferCopy:!1,timeKDTree:!1,showSkipSummary:!1}};return exports={allocateBufferForSingleSeries:allocateBufferForSingleSeries,pushSeries:pushSeries,setSize:setSize,inited:inited,setThreshold:setThreshold,init:init,render:renderWhenReady,settings:settings,valid:valid,clear:clear,flush:flush,setXAxis:setXAxis,setYAxis:setYAxis,data:data,gl:getGL,allocateBuffer:allocateBuffer,destroy:destroy,setOptions:setOptions}}function createAndAttachRenderer(chart,series){var width=chart.chartWidth,height=chart.chartHeight,target=chart,targetGroup=chart.seriesGroup||series.group,alpha=1,foSupported=doc.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1");return foSupported=!1,(target=chart.isChartSeriesBoosting()?chart:series).renderTarget||(target.canvas=mainCanvas,chart.renderer.forExport||!foSupported?(target.renderTarget=chart.renderer.image("",0,0,width,height).add(targetGroup),target.boostClear=function(){target.renderTarget.attr({href:""})},target.boostCopy=function(){target.boostResizeTarget(),target.renderTarget.attr({href:target.canvas.toDataURL("image/png")})}):(target.renderTargetFo=chart.renderer.createElement("foreignObject").add(targetGroup),target.renderTarget=doc.createElement("canvas"),target.renderTargetCtx=target.renderTarget.getContext("2d"),target.renderTargetFo.element.appendChild(target.renderTarget),target.boostClear=function(){target.renderTarget.width=target.canvas.width,target.renderTarget.height=target.canvas.height},target.boostCopy=function(){target.renderTarget.width=target.canvas.width,target.renderTarget.height=target.canvas.height,target.renderTargetCtx.drawImage(target.canvas,0,0)}),target.boostResizeTarget=function(){width=chart.chartWidth,height=chart.chartHeight,(target.renderTargetFo||target.renderTarget).attr({x:0,y:0,width:width,height:height,style:"pointer-events: none; mix-blend-mode: normal; opacity:"+alpha}),target instanceof H.Chart&&target.markerGroup.translate(series.xAxis.pos,series.yAxis.pos)},target.boostClipRect=chart.renderer.clipRect(),(target.renderTargetFo||target.renderTarget).clip(target.boostClipRect),target instanceof H.Chart&&(target.markerGroup=target.renderer.g().add(targetGroup),target.markerGroup.translate(series.xAxis.pos,series.yAxis.pos))),target.canvas.width=width,target.canvas.height=height,target.boostClipRect.attr(chart.getBoostClipRect(target)),target.boostResizeTarget(),target.boostClear(),target.ogl||(target.ogl=GLRenderer(function(){target.ogl.settings.debug.timeBufferCopy&&console.time("buffer copy"),target.boostCopy(),target.ogl.settings.debug.timeBufferCopy&&console.timeEnd("buffer copy")}),target.ogl.init(target.canvas),target.ogl.setOptions(chart.options.boost||{}),target instanceof H.Chart&&target.ogl.allocateBuffer(chart)),target.ogl.setSize(width,height),target.ogl}function renderIfNotSeriesBoosting(renderer,series,chart){renderer&&series.renderTarget&&series.canvas&&!(chart||series.chart).isChartSeriesBoosting()&&renderer.render(chart||series.chart)}function allocateIfNotSeriesBoosting(renderer,series){renderer&&series.renderTarget&&series.canvas&&!series.chart.isChartSeriesBoosting()&&renderer.allocateBufferForSingleSeries(series)}function hasWebGLSupport(){var canvas,i=0,contexts=["webgl","experimental-webgl","moz-webgl","webkit-3d"];if("undefined"!=typeof win.WebGLRenderingContext)for(canvas=doc.createElement("canvas");i<contexts.length;i++)try{if(null!=canvas.getContext(contexts[i]))return!0}catch(e){}return!1}function pointDrawHandler(proceed){var renderer,enabled=!0;if(this.chart.options&&this.chart.options.boost&&(enabled="undefined"==typeof this.chart.options.boost.enabled||this.chart.options.boost.enabled),!enabled||!this.isSeriesBoosting)return proceed.call(this);this.chart.isBoosting=!0,(renderer=createAndAttachRenderer(this.chart,this))&&(allocateIfNotSeriesBoosting(renderer,this),renderer.pushSeries(this)),renderIfNotSeriesBoosting(renderer,this)}var index,win=H.win,doc=win.document,noop=function(){},Chart=H.Chart,Color=H.Color,Series=H.Series,seriesTypes=H.seriesTypes,each=H.each,extend=H.extend,addEvent=H.addEvent,fireEvent=H.fireEvent,grep=H.grep,isNumber=H.isNumber,merge=H.merge,pick=H.pick,wrap=H.wrap,plotOptions=H.getOptions().plotOptions,CHUNK_SIZE=3e4,mainCanvas=doc.createElement("canvas"),boostable=["area","arearange","column","bar","line","scatter","heatmap","bubble","treemap"],boostableMap={};each(boostable,function(item){boostableMap[item]=1}),Color.prototype.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Chart.prototype.isChartSeriesBoosting=function(){var threshold=50;return(threshold=this.options.boost&&"undefined"!=typeof this.options.boost.seriesThreshold?this.options.boost.seriesThreshold:threshold)<=this.series.length||shouldForceChartSeriesBoosting(this)},Chart.prototype.getBoostClipRect=function(target){var clipBox={x:this.plotLeft,y:this.plotTop,width:this.plotWidth,height:this.plotHeight};return target===this&&each(this.yAxis,function(yAxis){clipBox.y=Math.min(yAxis.pos,clipBox.y),clipBox.height=Math.max(yAxis.pos-this.plotTop+yAxis.len,clipBox.height)},this),clipBox},H.eachAsync=function(arr,fn,finalFunc,chunkSize,i,noTimeout){for(var threshold=(i=i||0)+(chunkSize=chunkSize||CHUNK_SIZE),proceed=!0;proceed&&i<threshold&&i<arr.length;)proceed=fn(arr[i],i),++i;proceed&&(i<arr.length?noTimeout?H.eachAsync(arr,fn,finalFunc,chunkSize,i,noTimeout):win.requestAnimationFrame?win.requestAnimationFrame(function(){H.eachAsync(arr,fn,finalFunc,chunkSize,i)}):setTimeout(function(){H.eachAsync(arr,fn,finalFunc,chunkSize,i)}):finalFunc&&finalFunc())},Series.prototype.getPoint=function(boostPoint){var point=boostPoint,xData=this.xData||this.options.xData||this.processedXData||!1;return!boostPoint||boostPoint instanceof this.pointClass||((point=(new this.pointClass).init(this,this.options.data[boostPoint.i],xData?xData[boostPoint.i]:undefined)).category=point.x,point.dist=boostPoint.dist,point.distX=boostPoint.distX,point.plotX=boostPoint.plotX,point.plotY=boostPoint.plotY,point.index=boostPoint.i),point},wrap(Series.prototype,"searchPoint",function(proceed){return this.getPoint(proceed.apply(this,[].slice.call(arguments,1)))}),wrap(Series.prototype,"destroy",function(proceed){var series=this,chart=series.chart;chart.markerGroup===series.markerGroup&&(series.markerGroup=null),chart.hoverPoints&&(chart.hoverPoints=grep(chart.hoverPoints,function(point){return point.series===series})),chart.hoverPoint&&chart.hoverPoint.series===series&&(chart.hoverPoint=null),proceed.call(this)}),wrap(Series.prototype,"getExtremes",function(proceed){if(!this.isSeriesBoosting||!this.hasExtremes||!this.hasExtremes())return proceed.apply(this,Array.prototype.slice.call(arguments,1))}),each(boostable,function(type){plotOptions[type]&&(plotOptions[type].boostThreshold=5e3,plotOptions[type].boostData=[],seriesTypes[type].prototype.fillOpacity=!0)}),each(["translate","generatePoints","drawTracker","drawPoints","render"],function(method){function branch(proceed){var letItPass=this.options.stacking&&("translate"===method||"generatePoints"===method),enabled=!0;this.chart&&this.chart.options&&this.chart.options.boost&&(enabled="undefined"==typeof this.chart.options.boost.enabled||this.chart.options.boost.enabled),this.isSeriesBoosting&&!letItPass&&enabled&&"heatmap"!==this.type&&"treemap"!==this.type?this[method+"Canvas"]&&this[method+"Canvas"]():proceed.call(this)}wrap(Series.prototype,method,branch),"translate"===method&&(seriesTypes.column&&wrap(seriesTypes.column.prototype,method,branch),seriesTypes.bar&&wrap(seriesTypes.bar.prototype,method,branch),seriesTypes.arearange&&wrap(seriesTypes.arearange.prototype,method,branch),seriesTypes.treemap&&wrap(
seriesTypes.treemap.prototype,method,branch),seriesTypes.heatmap&&wrap(seriesTypes.heatmap.prototype,method,branch))}),wrap(Series.prototype,"processData",function(proceed){function getSeriesBoosting(data){return series.chart.isChartSeriesBoosting()||(data?data.length:0)>=(series.options.boostThreshold||Number.MAX_VALUE)}var series=this,dataToMeasure=this.options.data;getSeriesBoosting(dataToMeasure)&&"heatmap"!==this.type&&"treemap"!==this.type&&this.hasExtremes&&this.hasExtremes(!0)||(proceed.apply(this,Array.prototype.slice.call(arguments,1)),dataToMeasure=this.processedXData),this.isSeriesBoosting=getSeriesBoosting(dataToMeasure),this.isSeriesBoosting?this.enterBoost():this.exitBoost&&this.exitBoost()}),wrap(Series.prototype,"setVisible",function(proceed,vis,redraw){proceed.call(this,vis,redraw),!1===this.visible&&this.canvas&&this.renderTarget&&(this.ogl&&this.ogl.clear(),this.boostClear())}),Series.prototype.enterBoost=function(){this.alteredByBoost=[],each(["allowDG","directTouch","stickyTracking"],function(prop){this.alteredByBoost.push({prop:prop,val:this[prop],own:this.hasOwnProperty(prop)})},this),this.allowDG=!1,this.directTouch=!1,this.stickyTracking=!0,this.animate=null,this.labelBySeries&&(this.labelBySeries=this.labelBySeries.destroy())},Series.prototype.exitBoost=function(){each(this.alteredByBoost||[],function(setting){setting.own?this[setting.prop]=setting.val:delete this[setting.prop]},this),this.boostClear&&this.boostClear()},Series.prototype.hasExtremes=function(checkX){var options=this.options,data=options.data,xAxis=this.xAxis&&this.xAxis.options,yAxis=this.yAxis&&this.yAxis.options;return data.length>(options.boostThreshold||Number.MAX_VALUE)&&isNumber(yAxis.min)&&isNumber(yAxis.max)&&(!checkX||isNumber(xAxis.min)&&isNumber(xAxis.max))},Series.prototype.destroyGraphics=function(){var point,i,series=this,points=this.points;if(points)for(i=0;i<points.length;i+=1)(point=points[i])&&point.graphic&&(point.graphic=point.graphic.destroy());each(["graph","area","tracker"],function(prop){series[prop]&&(series[prop]=series[prop].destroy())})},hasWebGLSupport()?(H.extend(Series.prototype,{renderCanvas:function(){function processPoint(d,i){var x,y,clientX,plotY,low,chartDestroyed="undefined"==typeof chart.index,isYInside=!0;return chartDestroyed||(y=useRaw?(x=d[0],d[1]):(x=d,yData[i]),isRange?(useRaw&&(y=d.slice(1,3)),low=y[0],y=y[1]):isStacked&&(x=d.x,low=(y=d.stackY)-d.y),requireSorting||(isYInside=yMin<=y&&y<=yMax),!(null===y)&&xMin<=x&&x<=xMax&&isYInside&&(clientX=Math.ceil(xAxis.toPixels(x,!0)),sampling?(minI!==undefined&&clientX!==lastClientX||(isRange||(low=y),(maxI===undefined||maxVal<y)&&(maxVal=y,maxI=i),(minI===undefined||low<minVal)&&(minVal=low,minI=i)),clientX!==lastClientX&&(minI!==undefined&&(plotY=yAxis.toPixels(maxVal,!0),yBottom=yAxis.toPixels(minVal,!0),addKDPoint(clientX,plotY,maxI),yBottom!==plotY&&addKDPoint(clientX,yBottom,minI)),minI=maxI=undefined,lastClientX=clientX)):(plotY=Math.ceil(yAxis.toPixels(y,!0)),addKDPoint(clientX,plotY,i)))),!chartDestroyed}function doneProcessing(){fireEvent(series,"renderedCanvas"),delete series.buildKDTree,series.buildKDTree(),boostOptions.debug.timeKDTree&&console.timeEnd("kd tree building")}var lastClientX,points,minVal,maxVal,minI,maxI,boostOptions,series=this,options=series.options||{},renderer=!1,chart=series.chart,xAxis=this.xAxis,yAxis=this.yAxis,xData=options.xData||series.processedXData,yData=options.yData||series.processedYData,rawData=options.data,xExtremes=xAxis.getExtremes(),xMin=xExtremes.min,xMax=xExtremes.max,yExtremes=yAxis.getExtremes(),yMin=yExtremes.min,yMax=yExtremes.max,pointTaken={},sampling=!!series.sampling,enableMouseTracking=!1!==options.enableMouseTracking,threshold=options.threshold,yBottom=yAxis.getThreshold(threshold),isRange=series.pointArrayMap&&"low,high"===series.pointArrayMap.join(","),isStacked=!!options.stacking,cropStart=series.cropStart||0,requireSorting=series.requireSorting,useRaw=!xData,xDataFull=this.xData||this.options.xData||this.processedXData||!1,addKDPoint=function(clientX,plotY,i){index=clientX+","+plotY,enableMouseTracking&&!pointTaken[index]&&(pointTaken[index]=!0,chart.inverted&&(clientX=xAxis.len-clientX,plotY=yAxis.len-plotY),points.push({x:!!xDataFull&&xDataFull[cropStart+i],clientX:clientX,plotX:clientX,plotY:plotY,i:cropStart+i}))};renderer=createAndAttachRenderer(chart,series),chart.isBoosting=!0,boostOptions=renderer.settings,this.visible&&((this.points||this.graph)&&(this.animate=null,this.destroyGraphics()),chart.isChartSeriesBoosting()?this.markerGroup=chart.markerGroup:this.markerGroup=series.plotGroup("markerGroup","markers",!0,1,chart.seriesGroup),points=this.points=[],series.buildKDTree=noop,renderer&&(allocateIfNotSeriesBoosting(renderer,this),renderer.pushSeries(series),renderIfNotSeriesBoosting(renderer,this,chart)),chart.renderer.forExport||(boostOptions.debug.timeKDTree&&console.time("kd tree building"),H.eachAsync(isStacked?series.data:xData||rawData,processPoint,doneProcessing)))}}),each(["heatmap","treemap"],function(t){seriesTypes[t]&&wrap(seriesTypes[t].prototype,"drawPoints",pointDrawHandler)}),seriesTypes.bubble&&(delete seriesTypes.bubble.prototype.buildKDTree,wrap(seriesTypes.bubble.prototype,"markerAttribs",function(proceed){return!this.isSeriesBoosting&&proceed.apply(this,[].slice.call(arguments,1))})),seriesTypes.scatter.prototype.fill=!0,extend(seriesTypes.area.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),extend(seriesTypes.column.prototype,{fill:!0,sampling:!0}),H.Chart.prototype.callbacks.push(function(chart){function canvasToSVG(){chart.ogl&&chart.isChartSeriesBoosting()&&chart.ogl.render(chart)}function preRender(){chart.boostForceChartBoost=undefined,chart.boostForceChartBoost=shouldForceChartSeriesBoosting(chart),chart.isBoosting=!1,!chart.isChartSeriesBoosting()&&chart.didBoost&&(chart.didBoost=!1),chart.boostClear&&chart.boostClear(),chart.canvas&&chart.ogl&&chart.isChartSeriesBoosting()&&(chart.didBoost=!0,chart.ogl.allocateBuffer(chart)),chart.markerGroup&&chart.xAxis&&0<chart.xAxis.length&&chart.yAxis&&0<chart.yAxis.length&&chart.markerGroup.translate(chart.xAxis[0].pos,chart.yAxis[0].pos)}addEvent(chart,"predraw",preRender),addEvent(chart,"render",canvasToSVG)})):"undefined"!=typeof H.initCanvasBoost?H.initCanvasBoost():H.error(26)}(Highcharts)});