"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,dateFormat,each,isObject,pick,wrap,Axis,Chart,Tick,axisSide;dateFormat=(H=Highcharts).dateFormat,each=H.each,isObject=H.isObject,pick=H.pick,wrap=H.wrap,Axis=H.Axis,Chart=H.Chart,Tick=H.Tick,axisSide={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"},Axis.prototype.isOuterAxis=function(){var axis=this,thisIndex=-1,isOuter=!0;return each(this.chart.axes,function(otherAxis,index){if(otherAxis.side===axis.side)if(otherAxis===axis)thisIndex=index;else if(0<=thisIndex&&thisIndex<index)return void(isOuter=!1)}),isOuter},Tick.prototype.getLabelWidth=function(){return this.label.getBBox().width},Axis.prototype.getMaxLabelLength=function(force){var tickPositions=this.tickPositions,ticks=this.ticks,maxLabelLength=0;return this.maxLabelLength&&!force||(each(tickPositions,function(tick){(tick=ticks[tick])&&tick.labelLength>maxLabelLength&&(maxLabelLength=tick.labelLength)}),this.maxLabelLength=maxLabelLength),this.maxLabelLength},Axis.prototype.addTitle=function(){var hasData,showAxis,textAlign,axis=this,renderer=axis.chart.renderer,axisParent=axis.axisParent,horiz=axis.horiz,opposite=axis.opposite,options=axis.options,axisTitleOptions=options.title;hasData=axis.hasData(),axis.showAxis=showAxis=hasData||pick(options.showEmpty,!0),options.title="",axis.axisTitle||((textAlign=axisTitleOptions.textAlign)||(textAlign=(horiz?{low:"left",middle:"center",high:"right"}:{low:opposite?"right":"left",middle:"center",high:opposite?"left":"right"})[axisTitleOptions.align]),axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:textAlign}).addClass("highcharts-axis-title").css(axisTitleOptions.style).add(axisParent),axis.axisTitle.isNew=!0),axis.axisTitle[showAxis?"show":"hide"](!0)},H.dateFormats={W:function(timestamp){var dayNumber,date=new Date(timestamp),day=0===date.getUTCDay()?7:date.getUTCDay(),time=date.getTime(),startOfYear=new Date(date.getUTCFullYear(),0,1,-6);return date.setDate(date.getUTCDate()+4-day),dayNumber=Math.floor((time-startOfYear)/864e5),1+Math.floor(dayNumber/7)},E:function(timestamp){return dateFormat("%a",timestamp,!0).charAt(0)}},wrap(Tick.prototype,"addLabel",function(proceed){var axis=this.axis,isCategoryAxis=axis.options.categories!==undefined,tickPositions=axis.tickPositions,lastTick=tickPositions[tickPositions.length-1],isLastTick=this.pos!==lastTick;(!axis.options.grid||isCategoryAxis||isLastTick)&&proceed.apply(this)}),wrap(Tick.prototype,"getLabelPosition",function(proceed,x,y,label){var newX,newPos,axisHeight,fontSize,labelMetrics,lblB,lblH,labelCenter,retVal=proceed.apply(this,Array.prototype.slice.call(arguments,1)),axis=this.axis,options=axis.options,tickInterval=options.tickInterval||1;return options.grid&&(fontSize=options.labels.style.fontSize,lblB=(labelMetrics=axis.chart.renderer.fontMetrics(fontSize,label)).b,lblH=labelMetrics.h,axis.horiz&&options.categories===undefined?(axisHeight=axis.axisGroup.getBBox().height,newPos=this.pos+tickInterval/2,retVal.x=axis.translate(newPos)+axis.left,labelCenter=axisHeight/2+lblH/2-Math.abs(lblH-lblB),axis.side===axisSide.top?retVal.y=y-labelCenter:retVal.y=y+labelCenter):(options.categories===undefined&&(newPos=this.pos+tickInterval/2,retVal.y=axis.translate(newPos)+axis.top+lblB/2),newX=this.getLabelWidth()/2-axis.maxLabelLength/2,axis.side===axisSide.left?retVal.x+=newX:retVal.x-=newX)),retVal}),wrap(Axis.prototype,"tickSize",function(proceed){var labelPadding,distance,axis=this,retVal=proceed.apply(axis,Array.prototype.slice.call(arguments,1));return axis.options.grid&&!axis.horiz&&(labelPadding=2*Math.abs(axis.defaultLeftAxisOptions.labels.x),axis.maxLabelLength||(axis.maxLabelLength=axis.getMaxLabelLength()),distance=axis.maxLabelLength+labelPadding,retVal[0]=distance),retVal}),wrap(Axis.prototype,"getOffset",function(proceed){var axisHeight,tickSize,axis=this,axisOffset=axis.chart.axisOffset,side=axis.side,options=axis.options,axisTitleOptions=options.title,addTitle=axisTitleOptions&&axisTitleOptions.text&&!1!==axisTitleOptions.enabled;axis.options.grid&&isObject(axis.options.title)?(tickSize=axis.tickSize("tick")[0],axisOffset[side]&&tickSize&&(axisHeight=axisOffset[side]+tickSize),addTitle&&axis.addTitle(),proceed.apply(axis,Array.prototype.slice.call(arguments,1)),axisOffset[side]=pick(axisHeight,axisOffset[side]),options.title=axisTitleOptions):proceed.apply(axis,Array.prototype.slice.call(arguments,1))}),wrap(Axis.prototype,"renderUnsquish",function(proceed){this.options.grid&&(this.labelRotation=0,this.options.labels.rotation=0),proceed.apply(this)}),wrap(Axis.prototype,"setOptions",function(proceed,userOptions){var axis=this;userOptions.grid&&axis.horiz&&(userOptions.startOnTick=!0,userOptions.minPadding=0,userOptions.endOnTick=!0),proceed.apply(this,Array.prototype.slice.call(arguments,1))}),wrap(Axis.prototype,"render",function(proceed){var labelPadding,distance,lineWidth,linePath,yStartIndex,yEndIndex,xStartIndex,xEndIndex,axisGroupBox,axis=this,options=axis.options,renderer=axis.chart.renderer;options.grid?(labelPadding=2*Math.abs(axis.defaultLeftAxisOptions.labels.x),distance=axis.maxLabelLength+labelPadding,lineWidth=options.lineWidth,axis.rightWall&&axis.rightWall.destroy(),proceed.apply(axis),axisGroupBox=axis.axisGroup.getBBox(),axis.horiz&&(axis.rightWall=renderer.path(["M",axisGroupBox.x+axis.width+1,axisGroupBox.y,"L",axisGroupBox.x+axis.width+1,axisGroupBox.y+axisGroupBox.height]).attr({stroke:options.tickColor||"#ccd6eb","stroke-width":options.tickWidth||1,zIndex:7,"class":"grid-wall"}).add(axis.axisGroup)),axis.isOuterAxis()&&axis.axisLine&&(axis.horiz&&(distance=axisGroupBox.height-1),lineWidth&&(xStartIndex=(linePath=axis.getLinePath(lineWidth)).indexOf("M")+1,xEndIndex=linePath.indexOf("L")+1,yStartIndex=linePath.indexOf("M")+2,yEndIndex=linePath.indexOf("L")+2,axis.side!==axisSide.top&&axis.side!==axisSide.left||(distance=-distance),axis.horiz?(linePath[yStartIndex]=linePath[yStartIndex]+distance,linePath[yEndIndex]=linePath[yEndIndex]+distance):(linePath[xStartIndex]=linePath[xStartIndex]+distance,linePath[xEndIndex]=linePath[xEndIndex]+distance),axis.axisLineExtra?axis.axisLineExtra.animate({d:linePath}):axis.axisLineExtra=renderer.path(linePath).attr({stroke:options.lineColor,"stroke-width":lineWidth,zIndex:7}).add(axis.axisGroup),axis.axisLine[axis.showAxis?"show":"hide"](!0)))):proceed.apply(axis)}),wrap(Chart.prototype,"render",function(proceed){var fontMetrics,fontSize,fontSizeToCellHeightRatio=25/11;each(this.axes,function(axis){var options=axis.options;options.grid&&(fontSize=options.labels.style.fontSize,fontMetrics=axis.chart.renderer.fontMetrics(fontSize),"datetime"===options.type&&(options.units=[["millisecond",[1]],["second",[1]],["minute",[1]],["hour",[1]],["day",[1]],["week",[1]],["month",[1]],["year",null]]),axis.horiz?options.tickLength=options.cellHeight||fontMetrics.h*fontSizeToCellHeightRatio:(options.tickWidth=1,options.lineWidth||(options.lineWidth=1)))}),proceed.apply(this)})});