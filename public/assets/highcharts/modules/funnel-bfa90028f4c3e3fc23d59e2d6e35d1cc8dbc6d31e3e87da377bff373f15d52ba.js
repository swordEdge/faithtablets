"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){!function(Highcharts){var seriesType=Highcharts.seriesType,seriesTypes=Highcharts.seriesTypes,noop=Highcharts.noop,pick=Highcharts.pick,each=Highcharts.each;seriesType("funnel","pie",{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1},states:{select:{color:"#cccccc",borderColor:"#000000",shadow:!1}}},{animate:noop,translate:function(){var tempWidth,getWidthAt,path,fraction,x1,y1,x2,x3,y3,x4,y5,getLength=function(length,relativeTo){return/%$/.test(length)?relativeTo*parseInt(length,10)/100:parseInt(length,10)},sum=0,series=this,chart=series.chart,options=series.options,reversed=options.reversed,ignoreHiddenPoint=options.ignoreHiddenPoint,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,cumulative=0,center=options.center,centerX=getLength(center[0],plotWidth),centerY=getLength(center[1],plotHeight),width=getLength(options.width,plotWidth),height=getLength(options.height,plotHeight),neckWidth=getLength(options.neckWidth,plotWidth),neckHeight=getLength(options.neckHeight,plotHeight),neckY=centerY-height/2+height-neckHeight,data=series.data,half="left"===options.dataLabels.position?1:0;series.getWidthAt=getWidthAt=function(y){return neckY<y||height===neckHeight?neckWidth:neckWidth+(width-neckWidth)*(1-(y-(centerY-height/2))/(height-neckHeight))},series.getX=function(y,half,point){return centerX+(half?-1:1)*(getWidthAt(reversed?2*centerY-y:y)/2+point.labelDistance)},series.center=[centerX,centerY,height],series.centerX=centerX,each(data,function(point){ignoreHiddenPoint&&!1===point.visible||(sum+=point.y)}),each(data,function(point){y5=null,fraction=sum?point.y/sum:0,y3=(y1=centerY-height/2+cumulative*height)+fraction*height,tempWidth=getWidthAt(y1),x2=(x1=centerX-tempWidth/2)+tempWidth,tempWidth=getWidthAt(y3),x4=(x3=centerX-tempWidth/2)+tempWidth,neckY<y1?(x1=x3=centerX-neckWidth/2,x2=x4=centerX+neckWidth/2):neckY<y3&&(y5=y3,tempWidth=getWidthAt(neckY),x4=(x3=centerX-tempWidth/2)+tempWidth,y3=neckY),reversed&&(y1=2*centerY-y1,y3=2*centerY-y3,y5=y5?2*centerY-y5:null),path=["M",x1,y1,"L",x2,y1,x4,y3],y5&&path.push(x4,y5,x3,y5),path.push(x3,y3,"Z"),point.shapeType="path",point.shapeArgs={d:path},point.percentage=100*fraction,point.plotX=centerX,point.plotY=(y1+(y5||y3))/2,point.tooltipPos=[centerX,point.plotY],point.slice=noop,point.half=half,ignoreHiddenPoint&&!1===point.visible||(cumulative+=fraction)})},sortByAngle:function(points){points.sort(function(a,b){return a.plotY-b.plotY})},drawDataLabels:function(){var leftSide,sign,point,x,y,series=this,data=series.data,labelDistance=series.options.dataLabels.distance,i=data.length;for(series.center[2]-=2*labelDistance;i--;)sign=(leftSide=(point=data[i]).half)?1:-1,y=point.plotY,point.labelDistance=pick(point.options.dataLabels&&point.options.dataLabels.distance,labelDistance),series.maxLabelDistance=Math.max(point.labelDistance,series.maxLabelDistance||0),x=series.getX(y,leftSide,point),point.labelPos=[0,y,x+(point.labelDistance-5)*sign,y,x+point.labelDistance*sign,y,leftSide?"right":"left",0];seriesTypes.pie.prototype.drawDataLabels.call(this)}}),seriesType("pyramid","funnel",{neckWidth:"0%",neckHeight:"0%",reversed:!0})}(Highcharts)});