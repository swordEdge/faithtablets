"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,addEvent,Axis,Chart,css,dateFormat,defined,each,extend,noop,pick,Series,timeUnits,wrap;addEvent=(H=Highcharts).addEvent,Axis=H.Axis,Chart=H.Chart,css=H.css,dateFormat=H.dateFormat,defined=H.defined,each=H.each,extend=H.extend,noop=H.noop,pick=H.pick,Series=H.Series,timeUnits=H.timeUnits,(wrap=H.wrap)(Series.prototype,"init",function(proceed){var xAxis,series=this;proceed.apply(this,Array.prototype.slice.call(arguments,1)),(xAxis=series.xAxis)&&xAxis.options.ordinal&&addEvent(series,"updatedData",function(){delete xAxis.ordinalIndex})}),wrap(Axis.prototype,"getTimeTicks",function(proceed,normalizedInterval,min,max,startOfWeek,positions,closestDistance,findHigherRanks){var end,segmentPositions,hasCrossedHigherRank,info,posLength,outsideMax,start=0,higherRanks={},groupPositions=[],lastGroupPosition=-Number.MAX_VALUE,tickPixelIntervalOption=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!positions||positions.length<3||min===undefined)return proceed.call(this,normalizedInterval,min,max,startOfWeek);for(posLength=positions.length,end=0;end<posLength;end++){if(outsideMax=end&&positions[end-1]>max,positions[end]<min&&(start=end),end===posLength-1||positions[end+1]-positions[end]>5*closestDistance||outsideMax){if(positions[end]>lastGroupPosition){for(segmentPositions=proceed.call(this,normalizedInterval,positions[start],positions[end],startOfWeek);segmentPositions.length&&segmentPositions[0]<=lastGroupPosition;)segmentPositions.shift();segmentPositions.length&&(lastGroupPosition=segmentPositions[segmentPositions.length-1]),groupPositions=groupPositions.concat(segmentPositions)}start=end+1}if(outsideMax)break}if(info=segmentPositions.info,findHigherRanks&&info.unitRange<=timeUnits.hour){for(end=groupPositions.length-1,start=1;start<end;start++)dateFormat("%d",groupPositions[start])!==dateFormat("%d",groupPositions[start-1])&&(higherRanks[groupPositions[start]]="day",hasCrossedHigherRank=!0);hasCrossedHigherRank&&(higherRanks[groupPositions[0]]="day"),info.higherRanks=higherRanks}if(groupPositions.info=info,findHigherRanks&&defined(tickPixelIntervalOption)){for(var itemToRemove,translated,lastTranslated,medianDistance,distance,length=groupPositions.length,i=length,translatedArr=[],distances=[];i--;)translated=this.translate(groupPositions[i]),lastTranslated&&(distances[i]=lastTranslated-translated),translatedArr[i]=lastTranslated=translated;for(distances.sort(),(medianDistance=distances[Math.floor(distances.length/2)])<.6*tickPixelIntervalOption&&(medianDistance=null),i=groupPositions[length-1]>max?length-1:length,lastTranslated=undefined;i--;)translated=translatedArr[i],distance=Math.abs(lastTranslated-translated),lastTranslated&&distance<.8*tickPixelIntervalOption&&(null===medianDistance||distance<.8*medianDistance)?(higherRanks[groupPositions[i]]&&!higherRanks[groupPositions[i+1]]?(itemToRemove=i+1,lastTranslated=translated):itemToRemove=i,groupPositions.splice(itemToRemove,1)):lastTranslated=translated}return groupPositions}),extend(Axis.prototype,{beforeSetTickPositions:function(){var len,dist,minIndex,maxIndex,slope,i,axis=this,ordinalPositions=[],useOrdinal=!1,extremes=axis.getExtremes(),min=extremes.min,max=extremes.max,hasBreaks=axis.isXAxis&&!!axis.options.breaks,isOrdinal=axis.options.ordinal,overscrollPointsRange=Number.MAX_VALUE,ignoreHiddenSeries=axis.chart.options.chart.ignoreHiddenSeries,isNavigatorAxis="highcharts-navigator-xaxis"===axis.options.className;if(!axis.options.overscroll||axis.max!==axis.dataMax||axis.chart.mouseIsDown&&!isNavigatorAxis||axis.eventArgs&&(!axis.eventArgs||"navigator"===axis.eventArgs.trigger)||(axis.max+=axis.options.overscroll,!isNavigatorAxis&&defined(axis.userMin)&&(axis.min+=axis.options.overscroll)),isOrdinal||hasBreaks){if(each(axis.series,function(series,i){if((!ignoreHiddenSeries||!1!==series.visible)&&(!1!==series.takeOrdinalPosition||hasBreaks)&&(ordinalPositions=ordinalPositions.concat(series.processedXData),len=ordinalPositions.length,ordinalPositions.sort(function(a,b){return a-b}),overscrollPointsRange=Math.min(overscrollPointsRange,pick(series.closestPointRange,overscrollPointsRange)),len))for(i=len-1;i--;)ordinalPositions[i]===ordinalPositions[i+1]&&ordinalPositions.splice(i,1)}),2<(len=ordinalPositions.length)){for(dist=ordinalPositions[1]-ordinalPositions[0],i=len-1;i--&&!useOrdinal;)ordinalPositions[i+1]-ordinalPositions[i]!==dist&&(useOrdinal=!0);!axis.options.keepOrdinalPadding&&(ordinalPositions[0]-min>dist||max-ordinalPositions[ordinalPositions.length-1]>dist)&&(useOrdinal=!0)}else axis.options.overscroll&&(2===len?overscrollPointsRange=ordinalPositions[1]-ordinalPositions[0]:1===len?(overscrollPointsRange=axis.options.overscroll,ordinalPositions=[ordinalPositions[0],ordinalPositions[0]+overscrollPointsRange]):overscrollPointsRange=axis.overscrollPointsRange);useOrdinal?(axis.options.overscroll&&(axis.overscrollPointsRange=overscrollPointsRange,ordinalPositions=ordinalPositions.concat(axis.getOverscrollPositions())),axis.ordinalPositions=ordinalPositions,minIndex=axis.ordinal2lin(Math.max(min,ordinalPositions[0]),!0),maxIndex=Math.max(axis.ordinal2lin(Math.min(max,ordinalPositions[ordinalPositions.length-1]),!0),1),axis.ordinalSlope=slope=(max-min)/(maxIndex-minIndex),axis.ordinalOffset=min-minIndex*slope):(axis.overscrollPointsRange=pick(axis.closestPointRange,axis.overscrollPointsRange),axis.ordinalPositions=axis.ordinalSlope=axis.ordinalOffset=undefined)}axis.isOrdinal=isOrdinal&&useOrdinal,axis.groupIntervalFactor=null},val2lin:function(val,toIndex){var ret,axis=this,ordinalPositions=axis.ordinalPositions;if(ordinalPositions){var i,ordinalIndex,ordinalLength=ordinalPositions.length;for(i=ordinalLength;i--;)if(ordinalPositions[i]===val){ordinalIndex=i;break}for(i=ordinalLength-1;i--;)if(val>ordinalPositions[i]||0===i){ordinalIndex=i+(val-ordinalPositions[i])/(ordinalPositions[i+1]-ordinalPositions[i]);break}ret=toIndex?ordinalIndex:axis.ordinalSlope*(ordinalIndex||0)+axis.ordinalOffset}else ret=val;return ret},lin2val:function(val,fromIndex){var axis=this,ordinalPositions=axis.ordinalPositions;if(ordinalPositions){var linearEquivalentLeft,distance,ordinalSlope=axis.ordinalSlope,ordinalOffset=axis.ordinalOffset,i=ordinalPositions.length-1;if(fromIndex)val<0?val=ordinalPositions[0]:i<val?val=ordinalPositions[i]:distance=val-(i=Math.floor(val));else for(;i--;)if((linearEquivalentLeft=ordinalSlope*i+ordinalOffset)<=val){distance=(val-linearEquivalentLeft)/(ordinalSlope*(i+1)+ordinalOffset-linearEquivalentLeft);break}return distance!==undefined&&ordinalPositions[i]!==undefined?ordinalPositions[i]+(distance?distance*(ordinalPositions[i+1]-ordinalPositions[i]):0):val}return val},getExtendedPositions:function(){var fakeAxis,fakeSeries,axis=this,chart=axis.chart,grouping=axis.series[0].currentDataGrouping,ordinalIndex=axis.ordinalIndex,key=grouping?grouping.count+grouping.unitName:"raw",overscroll=axis.options.overscroll,extremes=axis.getExtremes();return ordinalIndex||(ordinalIndex=axis.ordinalIndex={}),ordinalIndex[key]||(fakeAxis={series:[],chart:chart,getExtremes:function(){return{min:extremes.dataMin,max:extremes.dataMax+overscroll}},options:{ordinal:!0},val2lin:Axis.prototype.val2lin,ordinal2lin:Axis.prototype.ordinal2lin},each(axis.series,function(series){(fakeSeries={xAxis:fakeAxis,xData:series.xData.slice(),chart:chart,destroyGroupedData:noop}).xData=fakeSeries.xData.concat(axis.getOverscrollPositions()),fakeSeries.options={dataGrouping:grouping?{enabled:!0,forced:!0,approximation:"open",units:[[grouping.unitName,[grouping.count]]]}:{enabled:!1}},series.processData.apply(fakeSeries),fakeAxis.series.push(fakeSeries)}),axis.beforeSetTickPositions.apply(fakeAxis),ordinalIndex[key]=fakeAxis.ordinalPositions),ordinalIndex[key]},getOverscrollPositions:function(){var axis=this,extraRange=axis.options.overscroll,distance=axis.overscrollPointsRange,positions=[],max=axis.dataMax;if(H.defined(distance))for(positions.push(max);max<=axis.dataMax+extraRange;)max+=distance,positions.push(max);return positions},getGroupIntervalFactor:function(xMin,xMax,series){var i,median,processedXData=series.processedXData,len=processedXData.length,distances=[],groupIntervalFactor=this.groupIntervalFactor;if(!groupIntervalFactor){for(i=0;i<len-1;i++)distances[i]=processedXData[i+1]-processedXData[i];distances.sort(function(a,b){return a-b}),median=distances[Math.floor(len/2)],xMin=Math.max(xMin,processedXData[0]),xMax=Math.min(xMax,processedXData[len-1]),this.groupIntervalFactor=groupIntervalFactor=len*median/(xMax-xMin)}return groupIntervalFactor},postProcessTickInterval:function(tickInterval){var ordinalSlope=this.ordinalSlope;return ordinalSlope?this.options.breaks?this.closestPointRange||tickInterval:tickInterval/(ordinalSlope/this.closestPointRange):tickInterval}}),Axis.prototype.ordinal2lin=Axis.prototype.val2lin,wrap(Chart.prototype,"pan",function(proceed,e){var chart=this,xAxis=chart.xAxis[0],overscroll=xAxis.options.overscroll,chartX=e.chartX,runBase=!1;if(xAxis.options.ordinal&&xAxis.series.length){var trimmedRange,ordinalPositions,searchAxisLeft,searchAxisRight,mouseDownX=chart.mouseDownX,extremes=xAxis.getExtremes(),dataMax=extremes.dataMax,min=extremes.min,max=extremes.max,hoverPoints=chart.hoverPoints,closestPointRange=xAxis.closestPointRange||xAxis.overscrollPointsRange,movedUnits=(mouseDownX-chartX)/(xAxis.translationSlope*(xAxis.ordinalSlope||closestPointRange)),extendedAxis={ordinalPositions:xAxis.getExtendedPositions()},lin2val=xAxis.lin2val,val2lin=xAxis.val2lin;extendedAxis.ordinalPositions?1<Math.abs(movedUnits)&&(hoverPoints&&each(hoverPoints,function(point){point.setState()}),dataMax>(ordinalPositions=(searchAxisRight=movedUnits<0?(searchAxisLeft=extendedAxis,xAxis.ordinalPositions?xAxis:extendedAxis):(searchAxisLeft=xAxis.ordinalPositions?xAxis:extendedAxis,extendedAxis)).ordinalPositions)[ordinalPositions.length-1]&&ordinalPositions.push(dataMax),chart.fixedRange=max-min,(trimmedRange=xAxis.toFixedRange(null,null,lin2val.apply(searchAxisLeft,[val2lin.apply(searchAxisLeft,[min,!0])+movedUnits,!0]),lin2val.apply(searchAxisRight,[val2lin.apply(searchAxisRight,[max,!0])+movedUnits,!0]))).min>=Math.min(extremes.dataMin,min)&&trimmedRange.max<=Math.max(dataMax,max)+overscroll&&xAxis.setExtremes(trimmedRange.min,trimmedRange.max,!0,!1,{trigger:"pan"}),chart.mouseDownX=chartX,css(chart.container,{cursor:"move"})):runBase=!0}else runBase=!0;runBase&&(overscroll&&(xAxis.max=xAxis.dataMax+overscroll),proceed.apply(this,Array.prototype.slice.call(arguments,1)))}),function(H){function stripArguments(){return Array.prototype.slice.call(arguments,1)}function drawPointsWrapped(proceed){proceed.apply(this),this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,pick(this.pointArrayMap,["y"]))}var pick=H.pick,wrap=H.wrap,each=H.each,extend=H.extend,isArray=H.isArray,fireEvent=H.fireEvent,Axis=H.Axis,Series=H.Series;extend(Axis.prototype,{isInBreak:function(brk,val){var repeat=brk.repeat||Infinity,from=brk.from,length=brk.to-brk.from,test=from<=val?(val-from)%repeat:repeat-(from-val)%repeat;return brk.inclusive?test<=length:test<length&&0!==test},isInAnyBreak:function(val,testKeep){var inbrk,keep,ret,breaks=this.options.breaks,i=breaks&&breaks.length;if(i){for(;i--;)this.isInBreak(breaks[i],val)&&(inbrk=!0,keep||(keep=pick(breaks[i].showPoints,!this.isXAxis)));ret=inbrk&&testKeep?inbrk&&!keep:inbrk}return ret}}),wrap(Axis.prototype,"setTickPositions",function(proceed){if(proceed.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var i,axis=this,tickPositions=this.tickPositions,info=this.tickPositions.info,newPositions=[];for(i=0;i<tickPositions.length;i++)axis.isInAnyBreak(tickPositions[i])||newPositions.push(tickPositions[i]);this.tickPositions=newPositions,this.tickPositions.info=info}}),wrap(Axis.prototype,"init",function(proceed,chart,userOptions){var breaks,axis=this;userOptions.breaks&&userOptions.breaks.length&&(userOptions.ordinal=!1),proceed.call(this,chart,userOptions),breaks=this.options.breaks,axis.isBroken=isArray(breaks)&&!!breaks.length,axis.isBroken&&(axis.val2lin=function(val){var brk,i,nval=val;for(i=0;i<axis.breakArray.length;i++)if((brk=axis.breakArray[i]).to<=val)nval-=brk.len;else{if(brk.from>=val)break;if(axis.isInBreak(brk,val)){nval-=val-brk.from;break}}return nval},axis.lin2val=function(val){var brk,i,nval=val;for(i=0;i<axis.breakArray.length&&!((brk=axis.breakArray[i]).from>=nval);i++)brk.to<nval?nval+=brk.len:axis.isInBreak(brk,nval)&&(nval+=brk.len);return nval},axis.setExtremes=function(newMin,newMax,redraw,animation,eventArguments){for(;this.isInAnyBreak(newMin);)newMin-=this.closestPointRange;for(;this.isInAnyBreak(newMax);)newMax-=this.closestPointRange;Axis.prototype.setExtremes.call(this,newMin,newMax,redraw,animation,eventArguments)},axis.setAxisTranslation=function(saveOld){Axis.prototype.setAxisTranslation.call(this,saveOld);var inBrk,repeat,start,i,breaks=axis.options.breaks,breakArrayT=[],breakArray=[],length=0,min=axis.userMin||axis.min,max=axis.userMax||axis.max,pointRangePadding=pick(axis.pointRangePadding,0);each(breaks,function(brk){repeat=brk.repeat||Infinity,axis.isInBreak(brk,min)&&(min+=brk.to%repeat-min%repeat),axis.isInBreak(brk,max)&&(max-=max%repeat-brk.from%repeat)}),each(breaks,function(brk){for(start=brk.from,repeat=brk.repeat||Infinity;min<start-repeat;)start-=repeat;for(;start<min;)start+=repeat;for(i=start;i<max;i+=repeat)breakArrayT.push({value:i,move:"in"}),breakArrayT.push({value:i+(brk.to-brk.from),move:"out",size:brk.breakSize})}),breakArrayT.sort(function(a,b){return a.value===b.value?("in"===a.move?0:1)-("in"===b.move?0:1):a.value-b.value}),inBrk=0,start=min,each(breakArrayT,function(brk){1===(inBrk+="in"===brk.move?1:-1)&&"in"===brk.move&&(start=brk.value),0===inBrk&&(breakArray.push({from:start,to:brk.value,len:brk.value-start-(brk.size||0)}),length+=brk.value-start-(brk.size||0))}),axis.breakArray=breakArray,axis.unitLength=max-min-length+pointRangePadding,fireEvent(axis,"afterBreaks"),axis.options.staticScale?axis.transA=axis.options.staticScale:axis.unitLength&&(axis.transA*=(max-axis.min+pointRangePadding)/axis.unitLength),pointRangePadding&&(axis.minPixelPadding=axis.transA*axis.minPointOffset),axis.min=min,axis.max=max})}),wrap(Series.prototype,"generatePoints",function(proceed){proceed.apply(this,stripArguments(arguments));var point,series=this,xAxis=series.xAxis,yAxis=series.yAxis,points=series.points,i=points.length,connectNulls=series.options.connectNulls;if(xAxis&&yAxis&&(xAxis.options.breaks||yAxis.options.breaks))for(;i--;)null===(point=points[i]).y&&!1===connectNulls||!xAxis.isInAnyBreak(point.x,!0)&&!yAxis.isInAnyBreak(point.y,!0)||(points.splice(i,1),this.data[i]&&this.data[i].destroyElements())}),H.Series.prototype.drawBreaks=function(axis,keys){var breaks,threshold,eventName,y,series=this,points=series.points;axis&&each(keys,function(key){breaks=axis.breakArray||[],threshold=axis.isXAxis?axis.min:pick(series.options.threshold,axis.min),each(points,function(point){y=pick(point["stack"+key.toUpperCase()],point[key]),each(breaks,function(brk){eventName=!1,threshold<brk.from&&y>brk.to||threshold>brk.from&&y<brk.from?eventName="pointBreak":(threshold<brk.from&&y>brk.from&&y<brk.to||threshold>brk.from&&y>brk.to&&y<brk.from)&&(eventName="pointInBreak"),eventName&&fireEvent(axis,eventName,{point:point,brk:brk})})})})},H.Series.prototype.gappedPath=function(){var xRange,gapSize=this.options.gapSize,points=this.points.slice(),i=points.length-1,yAxis=this.yAxis;if(gapSize&&0<i)for("value"!==this.options.gapUnit&&(gapSize*=this.closestPointRange);i--;)points[i+1].x-points[i].x>gapSize&&(xRange=(points[i].x+points[i+1].x)/2,points.splice(i+1,0,{isNull:!0,x:xRange}),this.options.stacking&&((yAxis.stacks[this.stackKey][xRange]=new H.StackItem(yAxis,yAxis.options.stackLabels,!1,xRange,this.stack)).total=0));return this.getGraphPath(points)},wrap(H.seriesTypes.column.prototype,"drawPoints",drawPointsWrapped),wrap(H.Series.prototype,"drawPoints",drawPointsWrapped)}(Highcharts),function(H){var arrayMax=H.arrayMax,arrayMin=H.arrayMin,Axis=H.Axis,defaultPlotOptions=H.defaultPlotOptions,defined=H.defined,each=H.each,extend=H.extend,format=H.format,isNumber=H.isNumber,merge=H.merge,pick=H.pick,Point=H.Point,Series=H.Series,Tooltip=H.Tooltip,wrap=H.wrap,seriesProto=Series.prototype,baseProcessData=seriesProto.processData,baseGeneratePoints=seriesProto.generatePoints,baseDestroy=seriesProto.destroy,commonOptions={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},specificOptions={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},defaultDataGroupingUnits=H.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],approximations=H.approximations={sum:function(arr){var ret,len=arr.length;if(!len&&arr.hasNulls)ret=null;else if(len)for(ret=0;len--;)ret+=arr[len];return ret},average:function(arr){var len=arr.length,ret=approximations.sum(arr);return isNumber(ret)&&len&&(ret/=len),ret},averages:function(){var ret=[];return each(arguments,function(arr){ret.push(approximations.average(arr))}),ret[0]===undefined?undefined:ret},open:function(arr){return arr.length?arr[0]:arr.hasNulls?null:undefined},high:function(arr){return arr.length?arrayMax(arr):arr.hasNulls?null:undefined},low:function(arr){return arr.length?arrayMin(arr):arr.hasNulls?null:undefined},close:function(arr){return arr.length?arr[arr.length-1]:arr.hasNulls?null:undefined},ohlc:function(open,high,low,close){if(open=approximations.open(open),high=approximations.high(high),low=approximations.low(low),close=approximations.close(close),isNumber(open)||isNumber(high)||isNumber(low)||isNumber(close))return[open,high,low,close]},range:function(low,high){return low=approximations.low(low),high=approximations.high(high),isNumber(low)||isNumber(high)?[low,high]:null===low&&null===high?null:void 0}};seriesProto.groupData=function(xData,yData,groupPositions,approximation){var pointX,pointY,groupedY,valuesLen,i,j,series=this,data=series.data,dataOptions=series.options.data,groupedXData=[],groupedYData=[],groupMap=[],dataLength=xData.length,handleYData=!!yData,values=[],approximationFn="function"==typeof approximation?approximation:approximations[approximation]||specificOptions[series.type]&&approximations[specificOptions[series.type].approximation]||approximations[commonOptions.approximation],pointArrayMap=series.pointArrayMap,pointArrayMapLength=pointArrayMap&&pointArrayMap.length,pos=0,start=0;for(pointArrayMapLength?each(pointArrayMap,function(){values.push([])}):values.push([]),valuesLen=pointArrayMapLength||1,i=0;i<=dataLength&&!(xData[i]>=groupPositions[0]);i++);for(;i<=dataLength;i++){for(;groupPositions[pos+1]!==undefined&&xData[i]>=groupPositions[pos+1]||i===dataLength;){for(pointX=groupPositions[pos],series.dataGroupInfo={start:start,length:values[0].length},(groupedY=approximationFn.apply(series,values))!==undefined&&(groupedXData.push(pointX),groupedYData.push(groupedY),groupMap.push(series.dataGroupInfo)),start=i,j=0;j<valuesLen;j++)values[j].length=0,values[j].hasNulls=!1;if(pos+=1,i===dataLength)break}if(i===dataLength)break;if(pointArrayMap){var val,index=series.cropStart+i,point=data&&data[index]||series.pointClass.prototype.applyOptions.apply({series:series},[dataOptions[index]]);for(j=0;j<pointArrayMapLength;j++)val=point[pointArrayMap[j]],isNumber(val)?values[j].push(val):null===val&&(values[j].hasNulls=!0)}else pointY=handleYData?yData[i]:null,isNumber(pointY)?values[0].push(pointY):null===pointY&&(values[0].hasNulls=!0)}return[groupedXData,groupedYData,groupMap]},seriesProto.processData=function(){var hasGroupedData,currentDataGrouping,series=this,chart=series.chart,dataGroupingOptions=series.options.dataGrouping,groupingEnabled=!1!==series.allowDG&&dataGroupingOptions&&pick(dataGroupingOptions.enabled,chart.options.isStock),visible=series.visible||!chart.options.chart.ignoreHiddenSeries,lastDataGrouping=this.currentDataGrouping;if(series.forceCrop=groupingEnabled,series.groupPixelWidth=null,!(!(series.hasProcessed=!0)===baseProcessData.apply(series,arguments)||!groupingEnabled)){series.destroyGroupedData();var i,processedXData=series.processedXData,processedYData=series.processedYData,plotSizeX=chart.plotSizeX,xAxis=series.xAxis,ordinal=xAxis.options.ordinal,groupPixelWidth=series.groupPixelWidth=xAxis.getGroupPixelWidth&&xAxis.getGroupPixelWidth();if(groupPixelWidth){hasGroupedData=!0,series.isDirty=!0,series.points=null;var extremes=xAxis.getExtremes(),xMin=extremes.min,xMax=extremes.max,interval=groupPixelWidth*(xMax-xMin)/plotSizeX*(ordinal&&xAxis.getGroupIntervalFactor(xMin,xMax,series)||1),groupPositions=xAxis.getTimeTicks(xAxis.normalizeTimeTickInterval(interval,dataGroupingOptions.units||defaultDataGroupingUnits),Math.min(xMin,processedXData[0]),Math.max(xMax,processedXData[processedXData.length-1]),xAxis.options.startOfWeek,processedXData,series.closestPointRange),groupedData=seriesProto.groupData.apply(series,[processedXData,processedYData,groupPositions,dataGroupingOptions.approximation]),groupedXData=groupedData[0],groupedYData=groupedData[1];if(dataGroupingOptions.smoothed&&groupedXData.length){for(groupedXData[i=groupedXData.length-1]=Math.min(groupedXData[i],xMax);i--&&0<i;)groupedXData[i]+=interval/2;groupedXData[0]=Math.max(groupedXData[0],xMin)}currentDataGrouping=groupPositions.info,series.closestPointRange=groupPositions.info.totalRange,series.groupMap=groupedData[2],defined(groupedXData[0])&&groupedXData[0]<xAxis.dataMin&&visible&&(xAxis.min===xAxis.dataMin&&(xAxis.min=groupedXData[0]),xAxis.dataMin=groupedXData[0]),series.processedXData=groupedXData,series.processedYData=groupedYData}else series.groupMap=null;series.hasGroupedData=hasGroupedData,series.currentDataGrouping=currentDataGrouping,series.preventGraphAnimation=(lastDataGrouping&&lastDataGrouping.totalRange)!==(currentDataGrouping&&currentDataGrouping.totalRange)}},seriesProto.destroyGroupedData=function(){var groupedData=this.groupedData;each(groupedData||[],function(point,i){point&&(groupedData[i]=point.destroy?point.destroy():null)}),this.groupedData=null},seriesProto.generatePoints=function(){baseGeneratePoints.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},wrap(Point.prototype,"update",function(proceed){this.dataGroup?H.error(24):proceed.apply(this,[].slice.call(arguments,1))}),wrap(Tooltip.prototype,"tooltipFooterHeaderFormatter",function(proceed,labelConfig,isFooter){var xDateFormatEnd,currentDataGrouping,dateTimeLabelFormats,labelFormats,formattedKey,tooltip=this,series=labelConfig.series,options=series.options,tooltipOptions=series.tooltipOptions,dataGroupingOptions=options.dataGrouping,xDateFormat=tooltipOptions.xDateFormat,xAxis=series.xAxis,dateFormat=H.dateFormat;return xAxis&&"datetime"===xAxis.options.type&&dataGroupingOptions&&isNumber(labelConfig.key)?(currentDataGrouping=series.currentDataGrouping,dateTimeLabelFormats=dataGroupingOptions.dateTimeLabelFormats,currentDataGrouping?(labelFormats=dateTimeLabelFormats[currentDataGrouping.unitName],1===currentDataGrouping.count?xDateFormat=labelFormats[0]:(xDateFormat=labelFormats[1],xDateFormatEnd=labelFormats[2])):!xDateFormat&&dateTimeLabelFormats&&(xDateFormat=tooltip.getXDateFormat(labelConfig,tooltipOptions,xAxis)),formattedKey=dateFormat(xDateFormat,labelConfig.key),xDateFormatEnd&&(formattedKey+=dateFormat(xDateFormatEnd,labelConfig.key+currentDataGrouping.totalRange-1)),format(tooltipOptions[(isFooter?"footer":"header")+"Format"],{point:extend(labelConfig.point,{key:formattedKey}),series:series})):proceed.call(tooltip,labelConfig,isFooter)}),seriesProto.destroy=function(){for(var series=this,groupedData=series.groupedData||[],i=groupedData.length;i--;)groupedData[i]&&groupedData[i].destroy();baseDestroy.apply(series)},wrap(seriesProto,"setOptions",function(proceed,itemOptions){var options=proceed.call(this,itemOptions),type=this.type,plotOptions=this.chart.options.plotOptions,defaultOptions=defaultPlotOptions[type].dataGrouping;return specificOptions[type]&&(defaultOptions||(defaultOptions=merge(commonOptions,specificOptions[type])),options.dataGrouping=merge(defaultOptions,plotOptions.series&&plotOptions.series.dataGrouping,plotOptions[type].dataGrouping,itemOptions.dataGrouping)),this.chart.options.isStock&&(this.requireSorting=!0),options}),wrap(Axis.prototype,"setScale",function(proceed){proceed.call(this),each(this.series,function(series){series.hasProcessed=!1})}),Axis.prototype.getGroupPixelWidth=function(){var i,dataLength,dgOptions,series=this.series,len=series.length,groupPixelWidth=0,doGrouping=!1;for(i=len;i--;)(dgOptions=series[i].options.dataGrouping)&&(groupPixelWidth=Math.max(groupPixelWidth,dgOptions.groupPixelWidth));for(i=len;i--;)(dgOptions=series[i].options.dataGrouping)&&series[i].hasProcessed&&(dataLength=(series[i].processedXData||series[i].data).length,(series[i].groupPixelWidth||dataLength>this.chart.plotSizeX/groupPixelWidth||dataLength&&dgOptions.forced)&&(doGrouping=!0));return doGrouping?groupPixelWidth:0},Axis.prototype.setDataGrouping=function(dataGrouping,redraw){var i;if(redraw=pick(redraw,!0),dataGrouping||(dataGrouping={forced:!1,units:null}),this instanceof Axis)for(i=this.series.length;i--;)this.series[i].update({dataGrouping:dataGrouping},!1);else each(this.chart.options.series,function(seriesOptions){seriesOptions.dataGrouping=dataGrouping},!1);redraw&&this.chart.redraw()}}(Highcharts),function(H){var each=H.each,Point=H.Point,seriesType=H.seriesType,seriesTypes=H.seriesTypes;seriesType("ohlc","column",{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0},{directTouch:!1,pointArrayMap:["open","high","low","close"],toYData:function(point){return[point.open,point.high,point.low,point.close]},pointValKey:"close",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointAttribs:function(point,state){var attribs=seriesTypes.column.prototype.pointAttribs.call(this,point,state),options=this.options;return delete attribs.fill,!point.options.color&&options.upColor&&point.open<point.close&&(attribs.stroke=options.upColor),attribs},translate:function(){var series=this,yAxis=series.yAxis,hasModifyValue=!!series.modifyValue,translated=["plotOpen","plotHigh","plotLow","plotClose","yBottom"];seriesTypes.column.prototype.translate.apply(series),each(series.points,function(point){each([point.open,point.high,point.low,point.close,point.low],function(value,i){null!==value&&(hasModifyValue&&(value=series.modifyValue(value)),point[translated[i]]=yAxis.toPixels(value,!0))}),point.tooltipPos[1]=point.plotHigh+yAxis.pos-series.chart.plotTop})},drawPoints:function(){var series=this,points=series.points,chart=series.chart;each(points,function(point){var plotOpen,plotClose,crispCorr,halfWidth,path,crispX,graphic=point.graphic,isNew=!graphic;point.plotY!==undefined&&(graphic||(point.graphic=graphic=chart.renderer.path().add(series.group)),graphic.attr(series.pointAttribs(point,point.selected&&"select")),crispCorr=graphic.strokeWidth()%2/2,crispX=Math.round(point.plotX)-crispCorr,halfWidth=Math.round(point.shapeArgs.width/2),path=["M",crispX,Math.round(point.yBottom),"L",crispX,Math.round(point.plotHigh)],null!==point.open&&(plotOpen=Math.round(point.plotOpen)+crispCorr,path.push("M",crispX,plotOpen,"L",crispX-halfWidth,plotOpen)),null!==point.close&&(plotClose=Math.round(point.plotClose)+crispCorr,path.push("M",crispX,plotClose,"L",crispX+halfWidth,plotClose)),graphic[isNew?"attr":"animate"]({d:path}).addClass(point.getClassName(),!0))})},animate:null},{getClassName:function(){return Point.prototype.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}})}(Highcharts),function(H){var defaultPlotOptions=H.defaultPlotOptions,each=H.each,merge=H.merge,seriesType=H.seriesType,seriesTypes=H.seriesTypes,candlestickOptions={states:{hover:{lineWidth:2}},tooltip:defaultPlotOptions.ohlc.tooltip,threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0};seriesType("candlestick","ohlc",merge(defaultPlotOptions.column,candlestickOptions),{pointAttribs:function(point,state){var stateOptions,attribs=seriesTypes.column.prototype.pointAttribs.call(this,point,state),options=this.options,isUp=point.open<point.close,stroke=options.lineColor||this.color;return attribs["stroke-width"]=options.lineWidth,attribs.fill=point.options.color||isUp&&options.upColor||this.color,attribs.stroke=point.lineColor||isUp&&options.upLineColor||stroke,state&&(stateOptions=options.states[state],attribs.fill=stateOptions.color||attribs.fill,attribs.stroke=stateOptions.lineColor||attribs.stroke,attribs["stroke-width"]=stateOptions.lineWidth||attribs["stroke-width"]),attribs},drawPoints:function(){var series=this,points=series.points,chart=series.chart;each(points,function(point){var plotOpen,plotClose,topBox,bottomBox,hasTopWhisker,hasBottomWhisker,crispCorr,crispX,path,halfWidth,graphic=point.graphic,isNew=!graphic;point.plotY!==undefined&&(graphic||(point.graphic=graphic=chart.renderer.path().add(series.group)),graphic.attr(series.pointAttribs(point,point.selected&&"select")).shadow(series.options.shadow),crispCorr=graphic.strokeWidth()%2/2,crispX=Math.round(point.plotX)-crispCorr,plotOpen=point.plotOpen,plotClose=point.plotClose,topBox=Math.min(plotOpen,plotClose),bottomBox=Math.max(plotOpen,plotClose),halfWidth=Math.round(point.shapeArgs.width/2),hasTopWhisker=Math.round(topBox)!==Math.round(point.plotHigh),hasBottomWhisker=bottomBox!==point.yBottom,topBox=Math.round(topBox)+crispCorr,bottomBox=Math.round(bottomBox)+crispCorr,(path=[]).push("M",crispX-halfWidth,bottomBox,"L",crispX-halfWidth,topBox,"L",crispX+halfWidth,topBox,"L",crispX+halfWidth,bottomBox,"Z","M",crispX,topBox,"L",crispX,hasTopWhisker?Math.round(point.plotHigh):topBox,"M",crispX,bottomBox,"L",crispX,hasBottomWhisker?Math.round(point.yBottom):bottomBox),graphic[isNew?"attr":"animate"]({d:path}).addClass(point.getClassName(),!0))})}})}(Highcharts),function(H,onSeriesMixin){var addEvent=H.addEvent,each=H.each,merge=H.merge,noop=H.noop,Renderer=H.Renderer,Series=H.Series,seriesType=H.seriesType,SVGRenderer=H.SVGRenderer,TrackerMixin=H.TrackerMixin,VMLRenderer=H.VMLRenderer,symbols=SVGRenderer.prototype.symbols;seriesType("flags","column",{pointRange:0,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd6eb"}},style:{fontSize:"11px",fontWeight:"bold"}},{sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Series.prototype.init,pointAttribs:function(point,state){var options=this.options,color=point&&point.color||this.color,lineColor=options.lineColor,lineWidth=point&&point.lineWidth,fill=point&&point.fillColor||options.fillColor;return state&&(fill=options.states[state].fillColor,lineColor=options.states[state].lineColor,lineWidth=options.states[state].lineWidth),{fill:fill||color,stroke:lineColor||color,"stroke-width":lineWidth||options.lineWidth||0}},translate:onSeriesMixin.translate,drawPoints:function(){var plotX,plotY,shape,i,point,graphic,stackIndex,anchorY,outsideRight,series=this,points=series.points,chart=series.chart,renderer=chart.renderer,options=series.options,optionsY=options.y,yAxis=series.yAxis,boxesMap={},boxes=[];for(i=points.length;i--;)outsideRight=(point=points[i]).plotX>series.xAxis.len,plotX=point.plotX,stackIndex=point.stackIndex,shape=point.options.shape||options.shape,(plotY=point.plotY
)!==undefined&&(plotY=point.plotY+optionsY-(stackIndex!==undefined&&stackIndex*options.stackDistance)),point.anchorX=stackIndex?undefined:point.plotX,anchorY=stackIndex?undefined:point.plotY,graphic=point.graphic,plotY!==undefined&&0<=plotX&&!outsideRight?(graphic||(graphic=point.graphic=renderer.label("",null,null,shape,null,null,options.useHTML).attr(series.pointAttribs(point)).css(merge(options.style,point.style)).attr({align:"flag"===shape?"left":"center",width:options.width,height:options.height,"text-align":options.textAlign}).addClass("highcharts-point").add(series.markerGroup),point.graphic.div&&(point.graphic.div.point=point),graphic.shadow(options.shadow),graphic.isNew=!0),0<plotX&&(plotX-=graphic.strokeWidth()%2),graphic.attr({text:point.options.title||options.title||"A"})[graphic.isNew?"attr":"animate"]({y:plotY,anchorY:anchorY}),boxesMap[point.plotX]?boxesMap[point.plotX].size=Math.max(boxesMap[point.plotX].size,graphic.width):boxesMap[point.plotX]={align:0,size:graphic.width,target:plotX,anchorX:plotX},point.tooltipPos=chart.inverted?[yAxis.len+yAxis.pos-chart.plotLeft-plotY,series.xAxis.len-plotX]:[plotX,plotY+yAxis.pos-chart.plotTop]):graphic&&(point.graphic=graphic.destroy());H.objectEach(boxesMap,function(box){box.plotX=box.anchorX,boxes.push(box)}),H.distribute(boxes,this.xAxis.len),each(points,function(point){var box=point.graphic&&boxesMap[point.plotX];box&&(point.graphic[point.graphic.isNew?"attr":"animate"]({x:box.pos,anchorX:point.anchorX}),point.graphic.isNew=!1)}),options.useHTML&&H.wrap(series.markerGroup,"on",function(proceed){return H.SVGElement.prototype.on.apply(proceed.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})},drawTracker:function(){var points=this.points;TrackerMixin.drawTrackerPoint.apply(this),each(points,function(point){var graphic=point.graphic;graphic&&addEvent(graphic.element,"mouseover",function(){0<point.stackIndex&&!point.raised&&(point._y=graphic.y,graphic.attr({y:point._y-8}),point.raised=!0),each(points,function(otherPoint){otherPoint!==point&&otherPoint.raised&&otherPoint.graphic&&(otherPoint.graphic.attr({y:otherPoint._y}),otherPoint.raised=!1)})})})},animate:noop,buildKDTree:noop,setClip:noop}),symbols.flag=function(x,y,w,h,options){var anchorX=options&&options.anchorX||x,anchorY=options&&options.anchorY||y;return symbols.circle(anchorX-1,anchorY-1,2,2).concat(["M",anchorX,anchorY,"L",x,y+h,x,y,x+w,y,x+w,y+h,x,y+h,"Z"])},each(["circle","square"],function(shape){symbols[shape+"pin"]=function(x,y,w,h,options){var path,labelTopOrBottomY,anchorX=options&&options.anchorX,anchorY=options&&options.anchorY;return"circle"===shape&&w<h&&(x-=Math.round((h-w)/2),w=h),path=symbols[shape](x,y,w,h),anchorX&&anchorY&&(labelTopOrBottomY=anchorY<y?y:y+h,path.push("M","circle"===shape?path[1]-path[4]:path[1]+path[4]/2,labelTopOrBottomY,"L",anchorX,anchorY),path=path.concat(symbols.circle(anchorX-1,anchorY-1,2,2))),path}}),Renderer===VMLRenderer&&each(["flag","circlepin","squarepin"],function(shape){VMLRenderer.prototype.symbols[shape]=symbols[shape]})}(Highcharts,function(H){var each=H.each,seriesTypes=H.seriesTypes,stableSort=H.stableSort;return{translate:function(){seriesTypes.column.prototype.translate.apply(this);var point,lastPoint,leftPoint,lastX,rightPoint,currentDataGrouping,series=this,options=series.options,chart=series.chart,points=series.points,cursor=points.length-1,optionsOnSeries=options.onSeries,onSeries=optionsOnSeries&&chart.get(optionsOnSeries),onKey=options.onKey||"y",step=onSeries&&onSeries.options.step,onData=onSeries&&onSeries.points,i=onData&&onData.length,xAxis=series.xAxis,yAxis=series.yAxis,xAxisExt=xAxis.getExtremes(),xOffset=0;if(onSeries&&onSeries.visible&&i)for(xOffset=(onSeries.pointXOffset||0)+(onSeries.barW||0)/2,currentDataGrouping=onSeries.currentDataGrouping,lastX=onData[i-1].x+(currentDataGrouping?currentDataGrouping.totalRange:0),stableSort(points,function(a,b){return a.x-b.x}),onKey="plot"+onKey[0].toUpperCase()+onKey.substr(1);i--&&points[cursor]&&(point=points[cursor],!((leftPoint=onData[i]).x<=point.x&&leftPoint[onKey]!==undefined&&(point.x<=lastX&&(point.plotY=leftPoint[onKey],leftPoint.x<point.x&&!step&&(rightPoint=onData[i+1])&&rightPoint[onKey]!==undefined&&(point.plotY+=(point.x-leftPoint.x)/(rightPoint.x-leftPoint.x)*(rightPoint[onKey]-leftPoint[onKey]))),i++,--cursor<0))););each(points,function(point,i){var stackIndex;point.plotY===undefined&&(point.x>=xAxisExt.min&&point.x<=xAxisExt.max?point.plotY=chart.chartHeight-xAxis.bottom-(xAxis.opposite?xAxis.height:0)+xAxis.offset-yAxis.top:point.shapeArgs={}),point.plotX+=xOffset,(lastPoint=points[i-1])&&lastPoint.plotX===point.plotX&&(lastPoint.stackIndex===undefined&&(lastPoint.stackIndex=0),stackIndex=lastPoint.stackIndex+1),point.stackIndex=stackIndex})}}}(Highcharts)),function(H){function Scrollbar(renderer,options,chart){this.init(renderer,options,chart)}var swapXY,addEvent=H.addEvent,Axis=H.Axis,correctFloat=H.correctFloat,defaultOptions=H.defaultOptions,defined=H.defined,destroyObjectProperties=H.destroyObjectProperties,each=H.each,fireEvent=H.fireEvent,hasTouch=H.hasTouch,isTouchDevice=H.isTouchDevice,merge=H.merge,pick=H.pick,removeEvent=H.removeEvent,svg=H.svg,wrap=H.wrap,defaultScrollbarOptions={height:isTouchDevice?20:14,barBorderRadius:0,buttonBorderRadius:0,liveRedraw:svg&&!isTouchDevice,margin:10,minWidth:6,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:1,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"#333333",trackBackgroundColor:"#f2f2f2",trackBorderColor:"#f2f2f2",trackBorderWidth:1};defaultOptions.scrollbar=merge(!0,defaultScrollbarOptions,defaultOptions.scrollbar),H.swapXY=swapXY=function(path,vertical){var i,temp,len=path.length;if(vertical)for(i=0;i<len;i+=3)temp=path[i+1],path[i+1]=path[i+2],path[i+2]=temp;return path},Scrollbar.prototype={init:function(renderer,options,chart){this.scrollbarButtons=[],this.renderer=renderer,this.userOptions=options,this.options=merge(defaultScrollbarOptions,options),this.chart=chart,this.size=pick(this.options.size,this.options.height),options.enabled&&(this.render(),this.initEvents(),this.addEvents())},render:function(){var group,scroller=this,renderer=scroller.renderer,options=scroller.options,size=scroller.size;scroller.group=group=renderer.g("scrollbar").attr({zIndex:options.zIndex,translateY:-99999}).add(),scroller.track=renderer.rect().addClass("highcharts-scrollbar-track").attr({x:0,r:options.trackBorderRadius||0,height:size,width:size}).add(group),scroller.track.attr({fill:options.trackBackgroundColor,stroke:options.trackBorderColor,"stroke-width":options.trackBorderWidth}),this.trackBorderWidth=scroller.track.strokeWidth(),scroller.track.attr({y:-this.trackBorderWidth%2/2}),scroller.scrollbarGroup=renderer.g().add(group),scroller.scrollbar=renderer.rect().addClass("highcharts-scrollbar-thumb").attr({height:size,width:size,r:options.barBorderRadius||0}).add(scroller.scrollbarGroup),scroller.scrollbarRifles=renderer.path(swapXY(["M",-3,size/4,"L",-3,2*size/3,"M",0,size/4,"L",0,2*size/3,"M",3,size/4,"L",3,2*size/3],options.vertical)).addClass("highcharts-scrollbar-rifles").add(scroller.scrollbarGroup),scroller.scrollbar.attr({fill:options.barBackgroundColor,stroke:options.barBorderColor,"stroke-width":options.barBorderWidth}),scroller.scrollbarRifles.attr({stroke:options.rifleColor,"stroke-width":1}),scroller.scrollbarStrokeWidth=scroller.scrollbar.strokeWidth(),scroller.scrollbarGroup.translate(-scroller.scrollbarStrokeWidth%2/2,-scroller.scrollbarStrokeWidth%2/2),scroller.drawScrollbarButton(0),scroller.drawScrollbarButton(1)},position:function(x,y,width,height){var scroller=this,vertical=scroller.options.vertical,xOffset=height,yOffset=0,method=scroller.rendered?"animate":"attr";scroller.x=x,scroller.y=y+this.trackBorderWidth,scroller.width=width,scroller.height=height,scroller.xOffset=xOffset,scroller.yOffset=yOffset,vertical?(scroller.width=scroller.yOffset=width=yOffset=scroller.size,scroller.xOffset=xOffset=0,scroller.barWidth=height-2*width,scroller.x=x+=scroller.options.margin):(scroller.height=scroller.xOffset=height=xOffset=scroller.size,scroller.barWidth=width-2*height,scroller.y=scroller.y+scroller.options.margin),scroller.group[method]({translateX:x,translateY:scroller.y}),scroller.track[method]({width:width,height:height}),scroller.scrollbarButtons[1][method]({translateX:vertical?0:width-xOffset,translateY:vertical?height-yOffset:0})},drawScrollbarButton:function(index){var group,tempElem,scroller=this,renderer=scroller.renderer,scrollbarButtons=scroller.scrollbarButtons,options=scroller.options,size=scroller.size;group=renderer.g().add(scroller.group),scrollbarButtons.push(group),(tempElem=renderer.rect().addClass("highcharts-scrollbar-button").add(group)).attr({stroke:options.buttonBorderColor,"stroke-width":options.buttonBorderWidth,fill:options.buttonBackgroundColor}),tempElem.attr(tempElem.crisp({x:-.5,y:-.5,width:size+1,height:size+1,r:options.buttonBorderRadius},tempElem.strokeWidth())),(tempElem=renderer.path(swapXY(["M",size/2+(index?-1:1),size/2-3,"L",size/2+(index?-1:1),size/2+3,"L",size/2+(index?2:-2),size/2],options.vertical)).addClass("highcharts-scrollbar-arrow").add(scrollbarButtons[index])).attr({fill:options.buttonArrowColor})},setRange:function(from,to){var fromPX,toPX,newPos,newSize,newRiflesPos,scroller=this,options=scroller.options,vertical=options.vertical,minWidth=options.minWidth,fullWidth=scroller.barWidth,method=this.rendered&&!this.hasDragged?"animate":"attr";defined(fullWidth)&&(from=Math.max(from,0),fromPX=Math.ceil(fullWidth*from),toPX=fullWidth*Math.min(to,1),scroller.calculatedWidth=newSize=correctFloat(toPX-fromPX),newSize<minWidth&&(fromPX=(fullWidth-minWidth+newSize)*from,newSize=minWidth),newPos=Math.floor(fromPX+scroller.xOffset+scroller.yOffset),newRiflesPos=newSize/2-.5,scroller.from=from,scroller.to=to,vertical?(scroller.scrollbarGroup[method]({translateY:newPos}),scroller.scrollbar[method]({height:newSize}),scroller.scrollbarRifles[method]({translateY:newRiflesPos}),scroller.scrollbarTop=newPos,scroller.scrollbarLeft=0):(scroller.scrollbarGroup[method]({translateX:newPos}),scroller.scrollbar[method]({width:newSize}),scroller.scrollbarRifles[method]({translateX:newRiflesPos}),scroller.scrollbarLeft=newPos,scroller.scrollbarTop=0),newSize<=12?scroller.scrollbarRifles.hide():scroller.scrollbarRifles.show(!0),!1===options.showFull&&(from<=0&&1<=to?scroller.group.hide():scroller.group.show()),scroller.rendered=!0)},initEvents:function(){var scroller=this;scroller.mouseMoveHandler=function(e){var change,normalizedEvent=scroller.chart.pointer.normalize(e),direction=scroller.options.vertical?"chartY":"chartX",initPositions=scroller.initPositions;!scroller.grabbedCenter||e.touches&&0===e.touches[0][direction]||(change=scroller.cursorToScrollbarPosition(normalizedEvent)[direction]-scroller[direction],scroller.hasDragged=!0,scroller.updatePosition(initPositions[0]+change,initPositions[1]+change),scroller.hasDragged&&fireEvent(scroller,"changed",{from:scroller.from,to:scroller.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e}))},scroller.mouseUpHandler=function(e){scroller.hasDragged&&fireEvent(scroller,"changed",{from:scroller.from,to:scroller.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e}),scroller.grabbedCenter=scroller.hasDragged=scroller.chartX=scroller.chartY=null},scroller.mouseDownHandler=function(e){var normalizedEvent=scroller.chart.pointer.normalize(e),mousePosition=scroller.cursorToScrollbarPosition(normalizedEvent);scroller.chartX=mousePosition.chartX,scroller.chartY=mousePosition.chartY,scroller.initPositions=[scroller.from,scroller.to],scroller.grabbedCenter=!0},scroller.buttonToMinClick=function(e){var range=correctFloat(scroller.to-scroller.from)*scroller.options.step;scroller.updatePosition(correctFloat(scroller.from-range),correctFloat(scroller.to-range)),fireEvent(scroller,"changed",{from:scroller.from,to:scroller.to,trigger:"scrollbar",DOMEvent:e})},scroller.buttonToMaxClick=function(e){var range=(scroller.to-scroller.from)*scroller.options.step;scroller.updatePosition(scroller.from+range,scroller.to+range),fireEvent(scroller,"changed",{from:scroller.from,to:scroller.to,trigger:"scrollbar",DOMEvent:e})},scroller.trackClick=function(e){var normalizedEvent=scroller.chart.pointer.normalize(e),range=scroller.to-scroller.from,top=scroller.y+scroller.scrollbarTop,left=scroller.x+scroller.scrollbarLeft;scroller.options.vertical&&normalizedEvent.chartY>top||!scroller.options.vertical&&normalizedEvent.chartX>left?scroller.updatePosition(scroller.from+range,scroller.to+range):scroller.updatePosition(scroller.from-range,scroller.to-range),fireEvent(scroller,"changed",{from:scroller.from,to:scroller.to,trigger:"scrollbar",DOMEvent:e})}},cursorToScrollbarPosition:function(normalizedEvent){var scroller=this,options=scroller.options,minWidthDifference=options.minWidth>scroller.calculatedWidth?options.minWidth:0;return{chartX:(normalizedEvent.chartX-scroller.x-scroller.xOffset)/(scroller.barWidth-minWidthDifference),chartY:(normalizedEvent.chartY-scroller.y-scroller.yOffset)/(scroller.barWidth-minWidthDifference)}},updatePosition:function(from,to){1<to&&(from=correctFloat(1-correctFloat(to-from)),to=1),from<0&&(to=correctFloat(to-from),from=0),this.from=from,this.to=to},update:function(options){this.destroy(),this.init(this.chart.renderer,merge(!0,this.options,options),this.chart)},addEvents:function(){var _events,buttonsOrder=this.options.inverted?[1,0]:[0,1],buttons=this.scrollbarButtons,bar=this.scrollbarGroup.element,track=this.track.element,mouseDownHandler=this.mouseDownHandler,mouseMoveHandler=this.mouseMoveHandler,mouseUpHandler=this.mouseUpHandler;_events=[[buttons[buttonsOrder[0]].element,"click",this.buttonToMinClick],[buttons[buttonsOrder[1]].element,"click",this.buttonToMaxClick],[track,"click",this.trackClick],[bar,"mousedown",mouseDownHandler],[bar.ownerDocument,"mousemove",mouseMoveHandler],[bar.ownerDocument,"mouseup",mouseUpHandler]],hasTouch&&_events.push([bar,"touchstart",mouseDownHandler],[bar.ownerDocument,"touchmove",mouseMoveHandler],[bar.ownerDocument,"touchend",mouseUpHandler]),each(_events,function(args){addEvent.apply(null,args)}),this._events=_events},removeEvents:function(){each(this._events,function(args){removeEvent.apply(null,args)}),this._events.length=0},destroy:function(){var scroller=this.chart.scroller;this.removeEvents(),each(["track","scrollbarRifles","scrollbar","scrollbarGroup","group"],function(prop){this[prop]&&this[prop].destroy&&(this[prop]=this[prop].destroy())},this),scroller&&this===scroller.scrollbar&&(scroller.scrollbar=null,destroyObjectProperties(scroller.scrollbarButtons))}},wrap(Axis.prototype,"init",function(proceed){var axis=this;proceed.apply(axis,Array.prototype.slice.call(arguments,1)),axis.options.scrollbar&&axis.options.scrollbar.enabled&&(axis.options.scrollbar.vertical=!axis.horiz,axis.options.startOnTick=axis.options.endOnTick=!1,axis.scrollbar=new Scrollbar(axis.chart.renderer,axis.options.scrollbar,axis.chart),addEvent(axis.scrollbar,"changed",function(e){var to,from,unitedMin=Math.min(pick(axis.options.min,axis.min),axis.min,axis.dataMin),range=Math.max(pick(axis.options.max,axis.max),axis.max,axis.dataMax)-unitedMin;from=axis.horiz&&!axis.reversed||!axis.horiz&&axis.reversed?(to=unitedMin+range*this.to,unitedMin+range*this.from):(to=unitedMin+range*(1-this.from),unitedMin+range*(1-this.to)),axis.setExtremes(from,to,!0,!1,e)}))}),wrap(Axis.prototype,"render",function(proceed){var offsetsIndex,from,to,axis=this,scrollMin=Math.min(pick(axis.options.min,axis.min),axis.min,pick(axis.dataMin,axis.min)),scrollMax=Math.max(pick(axis.options.max,axis.max),axis.max,pick(axis.dataMax,axis.max)),scrollbar=axis.scrollbar,titleOffset=axis.titleOffset||0;proceed.apply(axis,Array.prototype.slice.call(arguments,1)),scrollbar&&(offsetsIndex=axis.horiz?(scrollbar.position(axis.left,axis.top+axis.height+2+axis.chart.scrollbarsOffsets[1]+(axis.opposite?0:titleOffset+axis.axisTitleMargin+axis.offset),axis.width,axis.height),1):(scrollbar.position(axis.left+axis.width+2+axis.chart.scrollbarsOffsets[0]+(axis.opposite?titleOffset+axis.axisTitleMargin+axis.offset:0),axis.top,axis.width,axis.height),0),(!axis.opposite&&!axis.horiz||axis.opposite&&axis.horiz)&&(axis.chart.scrollbarsOffsets[offsetsIndex]+=axis.scrollbar.size+axis.scrollbar.options.margin),isNaN(scrollMin)||isNaN(scrollMax)||!defined(axis.min)||!defined(axis.max)?scrollbar.setRange(0,0):(from=(axis.min-scrollMin)/(scrollMax-scrollMin),to=(axis.max-scrollMin)/(scrollMax-scrollMin),axis.horiz&&!axis.reversed||!axis.horiz&&axis.reversed?scrollbar.setRange(from,to):scrollbar.setRange(1-to,1-from)))}),wrap(Axis.prototype,"getOffset",function(proceed){var axis=this,index=axis.horiz?2:1,scrollbar=axis.scrollbar;proceed.apply(axis,Array.prototype.slice.call(arguments,1)),scrollbar&&(axis.chart.scrollbarsOffsets=[0,0],axis.chart.axisOffset[index]+=scrollbar.size+scrollbar.options.margin)}),wrap(Axis.prototype,"destroy",function(proceed){this.scrollbar&&(this.scrollbar=this.scrollbar.destroy()),proceed.apply(this,Array.prototype.slice.call(arguments,1))}),H.Scrollbar=Scrollbar}(Highcharts),function(H){function Navigator(chart){this.init(chart)}var defaultSeriesType,addEvent=H.addEvent,Axis=H.Axis,Chart=H.Chart,color=H.color,defaultDataGroupingUnits=H.defaultDataGroupingUnits,defaultOptions=H.defaultOptions,defined=H.defined,destroyObjectProperties=H.destroyObjectProperties,each=H.each,erase=H.erase,error=H.error,extend=H.extend,grep=H.grep,hasTouch=H.hasTouch,isArray=H.isArray,isNumber=H.isNumber,isObject=H.isObject,merge=H.merge,pick=H.pick,removeEvent=H.removeEvent,Scrollbar=H.Scrollbar,Series=H.Series,seriesTypes=H.seriesTypes,wrap=H.wrap,units=[].concat(defaultDataGroupingUnits),numExt=function(extreme){var numbers=grep(arguments,isNumber);if(numbers.length)return Math[extreme].apply(0,numbers)};units[4]=["day",[1,2,3,4]],units[5]=["week",[1,2,3]],defaultSeriesType=seriesTypes.areaspline===undefined?"line":"areaspline",extend(defaultOptions,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:color("#6685c2").setOpacity(.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:defaultSeriesType,fillOpacity:.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:units},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},pointRange:0,threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),H.Renderer.prototype.symbols["navigator-handle"]=function(x,y,w,h,options){var halfWidth=options.width/2,markerPosition=Math.round(halfWidth/3)+.5,height=options.height;return["M",-halfWidth-1,.5,"L",halfWidth,.5,"L",halfWidth,height+.5,"L",-halfWidth-1,height+.5,"L",-halfWidth-1,.5,"M",-markerPosition,4,"L",-markerPosition,height-3,"M",markerPosition-1,4,"L",markerPosition-1,height-3]},Navigator.prototype={drawHandle:function(x,index,inverted,verb){var navigator=this,height=navigator.navigatorOptions.handles.height;navigator.handles[index][verb](inverted?{translateX:Math.round(navigator.left+navigator.height/2),translateY:Math.round(navigator.top+parseInt(x,10)+.5-height)}:{translateX:Math.round(navigator.left+parseInt(x,10)),translateY:Math.round(navigator.top+navigator.height/2-height/2-1)})},drawOutline:function(zoomedMin,zoomedMax,inverted,verb){var verticalMin,path,navigator=this,maskInside=navigator.navigatorOptions.maskInside,outlineWidth=navigator.outline.strokeWidth(),halfOutline=outlineWidth/2,outlineCorrection=outlineWidth%2/2,outlineHeight=navigator.outlineHeight,scrollbarHeight=navigator.scrollbarHeight,navigatorSize=navigator.size,left=navigator.left-scrollbarHeight,navigatorTop=navigator.top;path=inverted?["M",(left-=halfOutline)+outlineHeight,navigatorTop-scrollbarHeight-outlineCorrection,"L",left+outlineHeight,verticalMin=navigatorTop+zoomedMax+outlineCorrection,"L",left,verticalMin,"L",left,zoomedMax=navigatorTop+zoomedMin+outlineCorrection,"L",left+outlineHeight,zoomedMax,"L",left+outlineHeight,navigatorTop+navigatorSize+scrollbarHeight].concat(maskInside?["M",left+outlineHeight,verticalMin-halfOutline,"L",left+outlineHeight,zoomedMax+halfOutline]:[]):["M",left,navigatorTop+=halfOutline,"L",zoomedMin+=left+scrollbarHeight-outlineCorrection,navigatorTop,"L",zoomedMin,navigatorTop+outlineHeight,"L",zoomedMax+=left+scrollbarHeight-outlineCorrection,navigatorTop+outlineHeight,"L",zoomedMax,navigatorTop,"L",left+navigatorSize+2*scrollbarHeight,navigatorTop].concat(maskInside?["M",zoomedMin-halfOutline,navigatorTop,"L",zoomedMax+halfOutline,navigatorTop]:[]),navigator.outline[verb]({d:path})},drawMasks:function(zoomedMin,zoomedMax,inverted,verb){var height,width,x,y,navigator=this,left=navigator.left,top=navigator.top,navigatorHeight=navigator.height;height=inverted?(x=[left,left,left],y=[top,top+zoomedMin,top+zoomedMax],width=[navigatorHeight,navigatorHeight,navigatorHeight],[zoomedMin,zoomedMax-zoomedMin,navigator.size-zoomedMax]):(x=[left,left+zoomedMin,left+zoomedMax],y=[top,top,top],width=[zoomedMin,zoomedMax-zoomedMin,navigator.size-zoomedMax],[navigatorHeight,navigatorHeight,navigatorHeight]),each(navigator.shades,function(shade,i){shade[verb]({x:x[i],y:y[i],width:width[i],height:height[i]})})},renderElements:function(){var navigatorGroup,navigator=this,navigatorOptions=navigator.navigatorOptions,maskInside=navigatorOptions.maskInside,chart=navigator.chart,inverted=chart.inverted,renderer=chart.renderer;navigator.navigatorGroup=navigatorGroup=renderer.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();var mouseCursor={cursor:inverted?"ns-resize":"ew-resize"};each([!maskInside,maskInside,!maskInside],function(hasMask,index){navigator.shades[index]=renderer.rect().addClass("highcharts-navigator-mask"+(1===index?"-inside":"-outside")).attr({fill:hasMask?navigatorOptions.maskFill:"rgba(0,0,0,0)"}).css(1===index&&mouseCursor).add(navigatorGroup)}),navigator.outline=renderer.path().addClass("highcharts-navigator-outline").attr({"stroke-width":navigatorOptions.outlineWidth,stroke:navigatorOptions.outlineColor}).add(navigatorGroup),navigatorOptions.handles.enabled&&each([0,1],function(index){navigatorOptions.handles.inverted=chart.inverted,navigator.handles[index]=renderer.symbol(navigatorOptions.handles.symbols[index],-navigatorOptions.handles.width/2-1,0,navigatorOptions.handles.width,navigatorOptions.handles.height,navigatorOptions.handles),navigator.handles[index].attr({zIndex:7-index}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][index]).add(navigatorGroup);var handlesOptions=navigatorOptions.handles;navigator.handles[index].attr({fill:handlesOptions.backgroundColor,stroke:handlesOptions.borderColor,"stroke-width":handlesOptions.lineWidth}).css(mouseCursor)})},update:function(options){each(this.series||[],function(series){series.baseSeries&&delete series.baseSeries.navigatorSeries}),this.destroy();var chartOptions=this.chart.options;merge(!0,chartOptions.navigator,this.options,options),this.init(this.chart)},render:function(min,max,pxMin,pxMax){var navigatorWidth,scrollbarLeft,scrollbarTop,navigatorSize,zoomedMin,zoomedMax,verb,newMin,newMax,currentRange,navigator=this,chart=navigator.chart,scrollbarHeight=navigator.scrollbarHeight,xAxis=navigator.xAxis,scrollbarXAxis=xAxis.fake?chart.xAxis[0]:xAxis,navigatorEnabled=navigator.navigatorEnabled,rendered=navigator.rendered,inverted=chart.inverted,minRange=chart.xAxis[0].minRange,maxRange=chart.xAxis[0].options.maxRange;if(!this.hasDragged||defined(pxMin)){if(!isNumber(min)||!isNumber(max)){if(!rendered)return;pxMin=0,pxMax=pick(xAxis.width,scrollbarXAxis.width)}navigator.left=pick(xAxis.left,chart.plotLeft+scrollbarHeight+(inverted?chart.plotWidth:0)),navigator.size=zoomedMax=navigatorSize=pick(xAxis.len,(inverted?chart.plotHeight:chart.plotWidth)-2*scrollbarHeight),navigatorWidth=inverted?scrollbarHeight:navigatorSize+2*scrollbarHeight,pxMin=pick(pxMin,xAxis.toPixels(min,!0)),pxMax=pick(pxMax,xAxis.toPixels(max,!0)),isNumber(pxMin)&&Math.abs(pxMin)!==Infinity||(pxMin=0,pxMax=navigatorWidth),newMin=xAxis.toValue(pxMin,!0),newMax=xAxis.toValue(pxMax,!0),(currentRange=Math.abs(H.correctFloat(newMax-newMin)))<minRange?this.grabbedLeft?pxMin=xAxis.toPixels(newMax-minRange,!0):this.grabbedRight&&(pxMax=xAxis.toPixels(newMin+minRange,!0)):defined(maxRange)&&maxRange<currentRange&&(this.grabbedLeft?pxMin=xAxis.toPixels(newMax-maxRange,!0):this.grabbedRight&&(pxMax=xAxis.toPixels(newMin+maxRange,!0))),navigator.zoomedMax=Math.min(Math.max(pxMin,pxMax,0),zoomedMax),navigator.zoomedMin=Math.min(Math.max(navigator.fixedWidth?navigator.zoomedMax-navigator.fixedWidth:Math.min(pxMin,pxMax),0),zoomedMax),navigator.range=navigator.zoomedMax-navigator.zoomedMin,zoomedMax=Math.round(navigator.zoomedMax),zoomedMin=Math.round(navigator.zoomedMin),navigatorEnabled&&(navigator.navigatorGroup.attr({visibility:"visible"}),verb=rendered&&!navigator.hasDragged?"animate":"attr",navigator.drawMasks(zoomedMin,zoomedMax,inverted,verb),navigator.drawOutline(zoomedMin,zoomedMax,inverted,verb),navigator.navigatorOptions.handles.enabled&&(navigator.drawHandle(zoomedMin,0,inverted,verb),navigator.drawHandle(zoomedMax,1,inverted,verb))),navigator.scrollbar&&(inverted?(scrollbarTop=navigator.top-scrollbarHeight,scrollbarLeft=navigator.left-scrollbarHeight+(navigatorEnabled||!scrollbarXAxis.opposite?0:(scrollbarXAxis.titleOffset||0)+scrollbarXAxis.axisTitleMargin),scrollbarHeight=navigatorSize+2*scrollbarHeight):(scrollbarTop=navigator.top+(navigatorEnabled?navigator.height:-scrollbarHeight),scrollbarLeft=navigator.left-scrollbarHeight),navigator.scrollbar.position(scrollbarLeft,scrollbarTop,navigatorWidth,scrollbarHeight),navigator.scrollbar.setRange(navigator.zoomedMin/navigatorSize,navigator.zoomedMax/navigatorSize)),navigator.rendered=!0}},addMouseEvents:function(){var mouseMoveHandler,mouseUpHandler,navigator=this,chart=navigator.chart,container=chart.container,eventsToUnbind=[];navigator.mouseMoveHandler=mouseMoveHandler=function(e){navigator.onMouseMove(e)},navigator.mouseUpHandler=mouseUpHandler=function(e){navigator.onMouseUp(e)},(eventsToUnbind=navigator.getPartsEvents("mousedown")).push(addEvent(container,"mousemove",mouseMoveHandler),addEvent(container.ownerDocument,"mouseup",mouseUpHandler)),hasTouch&&(eventsToUnbind.push(addEvent(container,"touchmove",mouseMoveHandler),addEvent(container.ownerDocument,"touchend",mouseUpHandler)),eventsToUnbind.concat(navigator.getPartsEvents("touchstart"))),navigator.eventsToUnbind=eventsToUnbind,navigator.series&&navigator.series[0]&&eventsToUnbind.push(addEvent(navigator.series[0].xAxis,"foundExtremes",function(){chart.navigator.modifyNavigatorAxisExtremes()}))},getPartsEvents:function(eventName){var navigator=this,events=[];return each(["shades","handles"],function(name){each(navigator[name],function(navigatorItem,index){events.push(addEvent(navigatorItem.element,eventName,function(e){navigator[name+"Mousedown"](e,index)}))})}),events},shadesMousedown:function(e,index){e=this.chart.pointer.normalize(e);var fixedMax,ext,left,navigator=this,chart=navigator.chart,xAxis=navigator.xAxis,zoomedMin=navigator.zoomedMin,navigatorPosition=navigator.left,navigatorSize=navigator.size,range=navigator.range,chartX=e.chartX;chart.inverted&&(chartX=e.chartY,navigatorPosition=navigator.top),1===index?(navigator.grabbedCenter=chartX,navigator.fixedWidth=range,navigator.dragOffset=chartX-zoomedMin):(left=chartX-navigatorPosition-range/2,0===index?left=Math.max(0,left):2===index&&navigatorSize<=left+range&&(left=navigatorSize-range,fixedMax=navigator.getUnionExtremes().dataMax),left!==zoomedMin&&(navigator.fixedWidth=range,ext=xAxis.toFixedRange(left,left+range,null,fixedMax),chart.xAxis[0].setExtremes(Math.min(ext.min,ext.max),Math.max(ext.min,ext.max),!0,null,{trigger:"navigator"})))},handlesMousedown:function(e,index){e=this.chart.pointer.normalize(e);var navigator=this,chart=navigator.chart,baseXAxis=chart.xAxis[0],reverse=chart.inverted&&!baseXAxis.reversed||!chart.inverted&&baseXAxis.reversed;navigator.fixedExtreme=0===index?(navigator.grabbedLeft=!0,navigator.otherHandlePos=navigator.zoomedMax,reverse?baseXAxis.min:baseXAxis.max):(navigator.grabbedRight=!0,navigator.otherHandlePos=navigator.zoomedMin,reverse?baseXAxis.max:baseXAxis.min),chart.fixedRange=null},onMouseMove:function(e){var chartX,navigator=this,chart=navigator.chart,left=navigator.left,navigatorSize=navigator.navigatorSize,range=navigator.range,dragOffset=navigator.dragOffset,inverted=chart.inverted;e.touches&&0===e.touches[0].pageX||(chartX=(e=chart.pointer.normalize(e)).chartX,inverted&&(left=navigator.top,chartX=e.chartY),navigator.grabbedLeft?(navigator.hasDragged=!0,navigator.render(0,0,chartX-left,navigator.otherHandlePos)):navigator.grabbedRight?(navigator.hasDragged=!0,navigator.render(0,0,navigator.otherHandlePos,chartX-left)):navigator.grabbedCenter&&(navigator.hasDragged=!0,chartX<dragOffset?chartX=dragOffset:navigatorSize+dragOffset-range<chartX&&(chartX=navigatorSize+dragOffset-range),navigator.render(0,0,chartX-dragOffset,chartX-dragOffset+range)),navigator.hasDragged&&navigator.scrollbar&&navigator.scrollbar.options.liveRedraw&&(e.DOMType=e.type,setTimeout(function(){navigator.onMouseUp(e)},0)))},onMouseUp:function(e){var fixedMin,fixedMax,ext,navigator=this,chart=navigator.chart,xAxis=navigator.xAxis,scrollbar=navigator.scrollbar,DOMEvent=e.DOMEvent||e;(!navigator.hasDragged||scrollbar&&scrollbar.hasDragged)&&"scrollbar"!==e.trigger||(navigator.zoomedMin===navigator.otherHandlePos?fixedMin=navigator.fixedExtreme:navigator.zoomedMax===navigator.otherHandlePos&&(fixedMax=navigator.fixedExtreme),navigator.zoomedMax===navigator.size&&(fixedMax=navigator.getUnionExtremes().dataMax),ext=xAxis.toFixedRange(navigator.zoomedMin,navigator.zoomedMax,fixedMin,fixedMax),defined(ext.min)&&chart.xAxis[0].setExtremes(Math.min(ext.min,ext.max),Math.max(ext.min,ext.max),!0,!navigator.hasDragged&&null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:DOMEvent})),"mousemove"!==e.DOMType&&(navigator.grabbedLeft=navigator.grabbedRight=navigator.grabbedCenter=navigator.fixedWidth=navigator.fixedExtreme=navigator.otherHandlePos=navigator.hasDragged=navigator.dragOffset=null)},removeEvents:function(){this.eventsToUnbind&&(each(this.eventsToUnbind,function(unbind){unbind()}),this.eventsToUnbind=undefined),this.removeBaseSeriesEvents()},removeBaseSeriesEvents:function(){var baseSeries=this.baseSeries||[];this.navigatorEnabled&&baseSeries[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&each(baseSeries,function(series){removeEvent(series,"updatedData",this.updatedDataHandler)},this),baseSeries[0].xAxis&&removeEvent(baseSeries[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))},init:function(chart){var chartOptions=chart.options,navigatorOptions=chartOptions.navigator,navigatorEnabled=navigatorOptions.enabled,scrollbarOptions=chartOptions.scrollbar,scrollbarEnabled=scrollbarOptions.enabled,height=navigatorEnabled?navigatorOptions.height:0,scrollbarHeight=scrollbarEnabled?scrollbarOptions.height:0;this.handles=[],this.shades=[],this.chart=chart,this.setBaseSeries(),this.height=height,this.scrollbarHeight=scrollbarHeight,this.scrollbarEnabled=scrollbarEnabled,this.navigatorEnabled=navigatorEnabled,this.navigatorOptions=navigatorOptions,this.scrollbarOptions=scrollbarOptions,this.outlineHeight=height+scrollbarHeight,this.opposite=pick(navigatorOptions.opposite,!navigatorEnabled&&chart.inverted);var navigator=this,baseSeries=navigator.baseSeries,xAxisIndex=chart.xAxis.length,yAxisIndex=chart.yAxis.length,baseXaxis=baseSeries&&baseSeries[0]&&baseSeries[0].xAxis||chart.xAxis[0];chart.extraMargin={type:navigator.opposite?"plotTop":"marginBottom",value:(navigatorEnabled||!chart.inverted?navigator.outlineHeight:0)+navigatorOptions.margin},chart.inverted&&(chart.extraMargin.type=navigator.opposite?"marginRight":"plotLeft"),chart.isDirtyBox=!0,navigator.navigatorEnabled?(navigator.xAxis=new Axis(chart,merge({breaks:baseXaxis.options.breaks,
ordinal:baseXaxis.options.ordinal},navigatorOptions.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:xAxisIndex,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},chart.inverted?{offsets:[scrollbarHeight,0,-scrollbarHeight,0],width:height}:{offsets:[0,-scrollbarHeight,0,scrollbarHeight],height:height})),navigator.yAxis=new Axis(chart,merge(navigatorOptions.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:yAxisIndex,zoomEnabled:!1},chart.inverted?{width:height}:{height:height})),baseSeries||navigatorOptions.series.data?navigator.updateNavigatorSeries():0===chart.series.length&&wrap(chart,"redraw",function(proceed,animation){0<chart.series.length&&!navigator.series&&(navigator.setBaseSeries(),chart.redraw=proceed),proceed.call(chart,animation)}),navigator.renderElements(),navigator.addMouseEvents()):navigator.xAxis={translate:function(value,reverse){var axis=chart.xAxis[0],ext=axis.getExtremes(),scrollTrackWidth=axis.len-2*scrollbarHeight,min=numExt("min",axis.options.min,ext.dataMin),valueRange=numExt("max",axis.options.max,ext.dataMax)-min;return reverse?value*valueRange/scrollTrackWidth+min:scrollTrackWidth*(value-min)/valueRange},toPixels:function(value){return this.translate(value)},toValue:function(value){return this.translate(value,!0)},toFixedRange:Axis.prototype.toFixedRange,fake:!0},chart.options.scrollbar.enabled&&(chart.scrollbar=navigator.scrollbar=new Scrollbar(chart.renderer,merge(chart.options.scrollbar,{margin:navigator.navigatorEnabled?0:10,vertical:chart.inverted}),chart),addEvent(navigator.scrollbar,"changed",function(e){var range=navigator.size,to=range*this.to,from=range*this.from;navigator.hasDragged=navigator.scrollbar.hasDragged,navigator.render(0,0,from,to),(chart.options.scrollbar.liveRedraw||"mousemove"!==e.DOMType)&&setTimeout(function(){navigator.onMouseUp(e)})})),navigator.addBaseSeriesEvents(),navigator.addChartEvents()},getUnionExtremes:function(returnFalseOnNoBaseSeries){var ret,baseAxis=this.chart.xAxis[0],navAxis=this.xAxis,navAxisOptions=navAxis.options,baseAxisOptions=baseAxis.options;return returnFalseOnNoBaseSeries&&null===baseAxis.dataMin||(ret={dataMin:pick(navAxisOptions&&navAxisOptions.min,numExt("min",baseAxisOptions.min,baseAxis.dataMin,navAxis.dataMin,navAxis.min)),dataMax:pick(navAxisOptions&&navAxisOptions.max,numExt("max",baseAxisOptions.max,baseAxis.dataMax,navAxis.dataMax,navAxis.max))}),ret},setBaseSeries:function(baseSeriesOptions,redraw){var chart=this.chart,baseSeries=this.baseSeries=[];baseSeriesOptions=baseSeriesOptions||chart.options&&chart.options.navigator.baseSeries||0,each(chart.series||[],function(series,i){series.options.isInternal||!series.options.showInNavigator&&(i!==baseSeriesOptions&&series.options.id!==baseSeriesOptions||!1===series.options.showInNavigator)||baseSeries.push(series)}),this.xAxis&&!this.xAxis.fake&&this.updateNavigatorSeries(redraw)},updateNavigatorSeries:function(redraw){var baseOptions,mergedNavSeriesOptions,baseNavigatorOptions,navigator=this,chart=navigator.chart,baseSeries=navigator.baseSeries,chartNavigatorSeriesOptions=navigator.navigatorOptions.series,navSeriesMixin={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:!1,isInternal:!0,visible:!0},navigatorSeries=navigator.series=H.grep(navigator.series||[],function(navSeries){var base=navSeries.baseSeries;return!(H.inArray(base,baseSeries)<0)||(base&&(removeEvent(base,"updatedData",navigator.updatedDataHandler),delete base.navigatorSeries),navSeries.destroy(),!1)});baseSeries&&baseSeries.length&&each(baseSeries,function eachBaseSeries(base){var linkedNavSeries=base.navigatorSeries,userNavOptions=extend({color:base.color},isArray(chartNavigatorSeriesOptions)?defaultOptions.navigator.series:chartNavigatorSeriesOptions);if(!linkedNavSeries||!1!==navigator.navigatorOptions.adaptToUpdatedData){navSeriesMixin.name="Navigator "+baseSeries.length,baseOptions=base.options||{},baseNavigatorOptions=baseOptions.navigatorOptions||{},mergedNavSeriesOptions=merge(baseOptions,navSeriesMixin,userNavOptions,baseNavigatorOptions);var navigatorSeriesData=baseNavigatorOptions.data||userNavOptions.data;navigator.hasNavigatorData=navigator.hasNavigatorData||!!navigatorSeriesData,mergedNavSeriesOptions.data=navigatorSeriesData||baseOptions.data&&baseOptions.data.slice(0),linkedNavSeries&&linkedNavSeries.options?linkedNavSeries.update(mergedNavSeriesOptions,redraw):(base.navigatorSeries=chart.initSeries(mergedNavSeriesOptions),base.navigatorSeries.baseSeries=base,navigatorSeries.push(base.navigatorSeries))}}),(!chartNavigatorSeriesOptions.data||baseSeries&&baseSeries.length)&&!isArray(chartNavigatorSeriesOptions)||(navigator.hasNavigatorData=!1,chartNavigatorSeriesOptions=H.splat(chartNavigatorSeriesOptions),each(chartNavigatorSeriesOptions,function(userSeriesOptions,i){navSeriesMixin.name="Navigator "+(navigatorSeries.length+1),(mergedNavSeriesOptions=merge(defaultOptions.navigator.series,{color:chart.series[i]&&!chart.series[i].options.isInternal&&chart.series[i].color||chart.options.colors[i]||chart.options.colors[0]},navSeriesMixin,userSeriesOptions)).data=userSeriesOptions.data,mergedNavSeriesOptions.data&&(navigator.hasNavigatorData=!0,navigatorSeries.push(chart.initSeries(mergedNavSeriesOptions)))})),this.addBaseSeriesEvents()},addBaseSeriesEvents:function(){var navigator=this,baseSeries=navigator.baseSeries||[];baseSeries[0]&&baseSeries[0].xAxis&&addEvent(baseSeries[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes),each(baseSeries,function(base){addEvent(base,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)}),addEvent(base,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)}),!1!==this.navigatorOptions.adaptToUpdatedData&&base.xAxis&&addEvent(base,"updatedData",this.updatedDataHandler),addEvent(base,"remove",function(){this.navigatorSeries&&(erase(navigator.series,this.navigatorSeries),this.navigatorSeries.remove(!1),delete this.navigatorSeries)})},this)},modifyNavigatorAxisExtremes:function(){var unionExtremes,xAxis=this.xAxis;xAxis.getExtremes&&(!(unionExtremes=this.getUnionExtremes(!0))||unionExtremes.dataMin===xAxis.min&&unionExtremes.dataMax===xAxis.max||(xAxis.min=unionExtremes.dataMin,xAxis.max=unionExtremes.dataMax))},modifyBaseAxisExtremes:function(){var newMax,newMin,baseXAxis=this,navigator=baseXAxis.chart.navigator,baseExtremes=baseXAxis.getExtremes(),baseMin=baseExtremes.min,baseMax=baseExtremes.max,baseDataMin=baseExtremes.dataMin,baseDataMax=baseExtremes.dataMax,range=baseMax-baseMin,stickToMin=navigator.stickToMin,stickToMax=navigator.stickToMax,overscroll=baseXAxis.options.overscroll,navigatorSeries=navigator.series&&navigator.series[0],hasSetExtremes=!!baseXAxis.setExtremes;baseXAxis.eventArgs&&"rangeSelectorButton"===baseXAxis.eventArgs.trigger||(stickToMin&&(newMax=(newMin=baseDataMin)+range),stickToMax&&(newMax=baseDataMax+overscroll,stickToMin||(newMin=Math.max(newMax-range,navigatorSeries&&navigatorSeries.xData?navigatorSeries.xData[0]:-Number.MAX_VALUE))),hasSetExtremes&&(stickToMin||stickToMax)&&isNumber(newMin)&&(baseXAxis.min=baseXAxis.userMin=newMin,baseXAxis.max=baseXAxis.userMax=newMax)),navigator.stickToMin=navigator.stickToMax=null},updatedDataHandler:function(){var navigator=this.chart.navigator,baseSeries=this,navigatorSeries=this.navigatorSeries;navigator.stickToMax=Math.round(navigator.zoomedMax)>=Math.round(navigator.size),navigator.stickToMin=isNumber(baseSeries.xAxis.min)&&baseSeries.xAxis.min<=baseSeries.xData[0]&&(!this.chart.fixedRange||!navigator.stickToMax),navigatorSeries&&!navigator.hasNavigatorData&&(navigatorSeries.options.pointStart=baseSeries.xData[0],navigatorSeries.setData(baseSeries.options.data,!1,null,!1))},addChartEvents:function(){addEvent(this.chart,"redraw",function(){var navigator=this.navigator,xAxis=navigator&&(navigator.baseSeries&&navigator.baseSeries[0]&&navigator.baseSeries[0].xAxis||navigator.scrollbar&&this.xAxis[0]);xAxis&&navigator.render(xAxis.min,xAxis.max)})},destroy:function(){this.removeEvents(),this.xAxis&&(erase(this.chart.xAxis,this.xAxis),erase(this.chart.axes,this.xAxis)),this.yAxis&&(erase(this.chart.yAxis,this.yAxis),erase(this.chart.axes,this.yAxis)),each(this.series||[],function(s){s.destroy&&s.destroy()}),each(["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"],function(prop){this[prop]&&this[prop].destroy&&this[prop].destroy(),this[prop]=null},this),each([this.handles],function(coll){destroyObjectProperties(coll)},this)}},H.Navigator=Navigator,wrap(Axis.prototype,"zoom",function(proceed,newMin,newMax){var previousZoom,ret,chart=this.chart,chartOptions=chart.options,zoomType=chartOptions.chart.zoomType,navigator=chartOptions.navigator,rangeSelector=chartOptions.rangeSelector;return this.isXAxis&&(navigator&&navigator.enabled||rangeSelector&&rangeSelector.enabled)&&("x"===zoomType?chart.resetZoomButton="blocked":"y"===zoomType?ret=!1:"xy"===zoomType&&this.options.range&&(previousZoom=this.previousZoom,defined(newMin)?this.previousZoom=[this.min,this.max]:previousZoom&&(newMin=previousZoom[0],newMax=previousZoom[1],delete this.previousZoom))),ret!==undefined?ret:proceed.call(this,newMin,newMax)}),wrap(Chart.prototype,"init",function(proceed,options,callback){addEvent(this,"beforeRender",function(){var options=this.options;(options.navigator.enabled||options.scrollbar.enabled)&&(this.scroller=this.navigator=new Navigator(this))}),proceed.call(this,options,callback)}),wrap(Chart.prototype,"setChartSize",function(proceed){var scrollbarHeight,legendOptions,xAxis,yAxis,legend=this.legend,navigator=this.navigator;proceed.apply(this,[].slice.call(arguments,1)),navigator&&(legendOptions=legend&&legend.options,xAxis=navigator.xAxis,yAxis=navigator.yAxis,scrollbarHeight=navigator.scrollbarHeight,this.inverted?(navigator.left=navigator.opposite?this.chartWidth-scrollbarHeight-navigator.height:this.spacing[3]+scrollbarHeight,navigator.top=this.plotTop+scrollbarHeight):(navigator.left=this.plotLeft+scrollbarHeight,navigator.top=navigator.navigatorOptions.top||this.chartHeight-navigator.height-scrollbarHeight-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(legendOptions&&"bottom"===legendOptions.verticalAlign&&legendOptions.enabled&&!legendOptions.floating?legend.legendHeight+pick(legendOptions.margin,10):0)),xAxis&&yAxis&&(this.inverted?xAxis.options.left=yAxis.options.left=navigator.left:xAxis.options.top=yAxis.options.top=navigator.top,xAxis.setAxisSize(),yAxis.setAxisSize()))}),wrap(Series.prototype,"addPoint",function(proceed,options,redraw,shift,animation){var turboThreshold=this.options.turboThreshold;turboThreshold&&this.xData.length>turboThreshold&&isObject(options,!0)&&this.chart.navigator&&error(20,!0),proceed.call(this,options,redraw,shift,animation)}),wrap(Chart.prototype,"addSeries",function(proceed,options,redraw,animation){var series=proceed.call(this,options,!1,animation);return this.navigator&&this.navigator.setBaseSeries(null,!1),pick(redraw,!0)&&this.redraw(),series}),wrap(Series.prototype,"update",function(proceed,newOptions,redraw){proceed.call(this,newOptions,!1),this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1),pick(redraw,!0)&&this.chart.redraw()}),Chart.prototype.callbacks.push(function(chart){var extremes,navigator=chart.navigator;navigator&&(extremes=chart.xAxis[0].getExtremes(),navigator.render(extremes.min,extremes.max))})}(Highcharts),function(H){function RangeSelector(chart){this.init(chart)}var addEvent=H.addEvent,Axis=H.Axis,Chart=H.Chart,css=H.css,createElement=H.createElement,dateFormat=H.dateFormat,defaultOptions=H.defaultOptions,useUTC=defaultOptions.global.useUTC,defined=H.defined,destroyObjectProperties=H.destroyObjectProperties,discardElement=H.discardElement,each=H.each,extend=H.extend,fireEvent=H.fireEvent,HCDate=H.Date,isNumber=H.isNumber,merge=H.merge,pick=H.pick,pInt=H.pInt,splat=H.splat,wrap=H.wrap;extend(defaultOptions,{rangeSelector:{verticalAlign:"top",buttonTheme:{"stroke-width":0,width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:undefined,inputPosition:{align:"right",x:0,y:0},buttonPosition:{align:"left",x:0,y:0},labelStyle:{color:"#666666"}}}),defaultOptions.lang=merge(defaultOptions.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),RangeSelector.prototype={clickButton:function(i,redraw){var newMin,baseXAxisOptions,rangeMin,minSetting,rangeSetting,ctx,ytdExtremes,rangeSelector=this,chart=rangeSelector.chart,rangeOptions=rangeSelector.buttonOptions[i],baseAxis=chart.xAxis[0],unionExtremes=chart.scroller&&chart.scroller.getUnionExtremes()||baseAxis||{},dataMin=unionExtremes.dataMin,dataMax=unionExtremes.dataMax,newMax=baseAxis&&Math.round(Math.min(baseAxis.max,pick(dataMax,baseAxis.max))),type=rangeOptions.type,range=rangeOptions._range,dataGrouping=rangeOptions.dataGrouping;if(null!==dataMin&&null!==dataMax){if(chart.fixedRange=range,dataGrouping&&(this.forcedDataGrouping=!0,Axis.prototype.setDataGrouping.call(baseAxis||{chart:this.chart},dataGrouping,!1)),"month"===type||"year"===type)baseAxis?(ctx={range:rangeOptions,max:newMax,dataMin:dataMin,dataMax:dataMax},newMin=baseAxis.minFromRange.call(ctx),isNumber(ctx.newMax)&&(newMax=ctx.newMax)):range=rangeOptions;else if(range)newMin=Math.max(newMax-range,dataMin),newMax=Math.min(newMin+range,dataMax);else if("ytd"===type){if(!baseAxis)return void addEvent(chart,"beforeRender",function(){rangeSelector.clickButton(i)});dataMax===undefined&&(dataMin=Number.MAX_VALUE,dataMax=Number.MIN_VALUE,each(chart.series,function(series){var xData=series.xData;dataMin=Math.min(xData[0],dataMin),dataMax=Math.max(xData[xData.length-1],dataMax)}),redraw=!1),newMin=rangeMin=(ytdExtremes=rangeSelector.getYTDExtremes(dataMax,dataMin,useUTC)).min,newMax=ytdExtremes.max}else"all"===type&&baseAxis&&(newMin=dataMin,newMax=dataMax);newMin+=rangeOptions._offsetMin,newMax+=rangeOptions._offsetMax,rangeSelector.setSelected(i),baseAxis?baseAxis.setExtremes(newMin,newMax,pick(redraw,1),null,{trigger:"rangeSelectorButton",rangeSelectorButton:rangeOptions}):(baseXAxisOptions=splat(chart.options.xAxis)[0],rangeSetting=baseXAxisOptions.range,baseXAxisOptions.range=range,minSetting=baseXAxisOptions.min,baseXAxisOptions.min=rangeMin,addEvent(chart,"load",function resetMinAndRange(){baseXAxisOptions.range=rangeSetting,baseXAxisOptions.min=minSetting}))}},setSelected:function(selected){this.selected=this.options.selected=selected},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(chart){var rangeSelector=this,options=chart.options.rangeSelector,buttonOptions=options.buttons||[].concat(rangeSelector.defaultButtons),selectedOption=options.selected,blurInputs=function(){var minInput=rangeSelector.minInput,maxInput=rangeSelector.maxInput;minInput&&minInput.blur&&fireEvent(minInput,"blur"),maxInput&&maxInput.blur&&fireEvent(maxInput,"blur")};rangeSelector.chart=chart,rangeSelector.options=options,rangeSelector.buttons=[],chart.extraTopMargin=options.height,rangeSelector.buttonOptions=buttonOptions,this.unMouseDown=addEvent(chart.container,"mousedown",blurInputs),this.unResize=addEvent(chart,"resize",blurInputs),each(buttonOptions,rangeSelector.computeButtonRange),selectedOption!==undefined&&buttonOptions[selectedOption]&&this.clickButton(selectedOption,!1),addEvent(chart,"load",function(){chart.xAxis&&chart.xAxis[0]&&addEvent(chart.xAxis[0],"setExtremes",function(e){this.max-this.min!==chart.fixedRange&&"rangeSelectorButton"!==e.trigger&&"updatedData"!==e.trigger&&rangeSelector.forcedDataGrouping&&this.setDataGrouping(!1,!1)})})},updateButtonStates:function(){var rangeSelector=this,chart=this.chart,baseAxis=chart.xAxis[0],actualRange=Math.round(baseAxis.max-baseAxis.min),hasNoData=!baseAxis.hasVisibleSeries,day=864e5,unionExtremes=chart.scroller&&chart.scroller.getUnionExtremes()||baseAxis,dataMin=unionExtremes.dataMin,dataMax=unionExtremes.dataMax,ytdExtremes=rangeSelector.getYTDExtremes(dataMax,dataMin,useUTC),ytdMin=ytdExtremes.min,ytdMax=ytdExtremes.max,selected=rangeSelector.selected,selectedExists=isNumber(selected),allButtonsEnabled=rangeSelector.options.allButtonsEnabled,buttons=rangeSelector.buttons;each(rangeSelector.buttonOptions,function(rangeOptions,i){var range=rangeOptions._range,type=rangeOptions.type,count=rangeOptions.count||1,button=buttons[i],state=0,offsetRange=rangeOptions._offsetMax-rangeOptions._offsetMin,isSelected=i===selected,isTooGreatRange=dataMax-dataMin<range,isTooSmallRange=range<baseAxis.minRange,isYTDButNotSelected=!1,isAllButAlreadyShowingAll=!1,isSameRange=range===actualRange;("month"===type||"year"===type)&&actualRange>={month:28,year:365}[type]*day*count+offsetRange&&actualRange<={month:31,year:366}[type]*day*count+offsetRange?isSameRange=!0:"ytd"===type?(isSameRange=ytdMax-ytdMin+offsetRange===actualRange,isYTDButNotSelected=!isSelected):"all"===type&&(isSameRange=baseAxis.max-baseAxis.min>=dataMax-dataMin,isAllButAlreadyShowingAll=!isSelected&&selectedExists&&isSameRange),!allButtonsEnabled&&(isTooGreatRange||isTooSmallRange||isAllButAlreadyShowingAll||hasNoData)?state=3:(isSelected&&isSameRange||isSameRange&&!selectedExists&&!isYTDButNotSelected)&&(selectedExists=!0,state=2),button.state!==state&&button.setState(state)})},computeButtonRange:function(rangeOptions){var type=rangeOptions.type,count=rangeOptions.count||1,fixedTimes={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};fixedTimes[type]?rangeOptions._range=fixedTimes[type]*count:"month"!==type&&"year"!==type||(rangeOptions._range=24*{month:30,year:365}[type]*36e5*count),rangeOptions._offsetMin=pick(rangeOptions.offsetMin,0),rangeOptions._offsetMax=pick(rangeOptions.offsetMax,0),rangeOptions._range+=rangeOptions._offsetMax-rangeOptions._offsetMin},setInputValue:function(name,time){var options=this.chart.options.rangeSelector,input=this[name+"Input"];defined(time)&&(input.previousValue=input.HCTime,input.HCTime=time),input.value=dateFormat(options.inputEditDateFormat||"%Y-%m-%d",input.HCTime),this[name+"DateBox"].attr({text:dateFormat(options.inputDateFormat||"%b %e, %Y",input.HCTime)})},showInput:function(name){var inputGroup=this.inputGroup,dateBox=this[name+"DateBox"];css(this[name+"Input"],{left:inputGroup.translateX+dateBox.x+"px",top:inputGroup.translateY+"px",width:dateBox.width-2+"px",height:dateBox.height-2+"px",border:"2px solid silver"})},hideInput:function(name){css(this[name+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(name)},drawInput:function(name){function updateExtremes(){var inputValue=input.value,value=(options.inputDateParser||Date.parse)(inputValue),chartAxis=chart.xAxis[0],dataAxis=chart.scroller&&chart.scroller.xAxis?chart.scroller.xAxis:chartAxis,dataMin=dataAxis.dataMin,dataMax=dataAxis.dataMax;value!==input.previousValue&&(input.previousValue=value,isNumber(value)||(value=inputValue.split("-"),value=Date.UTC(pInt(value[0]),pInt(value[1])-1,pInt(value[2]))),isNumber(value)&&(useUTC||(value+=60*(new Date).getTimezoneOffset()*1e3),isMin?value>rangeSelector.maxInput.HCTime?value=undefined:value<dataMin&&(value=dataMin):value<rangeSelector.minInput.HCTime?value=undefined:dataMax<value&&(value=dataMax),value!==undefined&&chartAxis.setExtremes(isMin?value:chartAxis.min,isMin?chartAxis.max:value,undefined,undefined,{trigger:"rangeSelectorInput"})))}var input,label,dateBox,rangeSelector=this,chart=rangeSelector.chart,chartStyle=chart.renderer.style||{},renderer=chart.renderer,options=chart.options.rangeSelector,lang=defaultOptions.lang,div=rangeSelector.div,isMin="min"===name,inputGroup=this.inputGroup;this[name+"Label"]=label=renderer.label(lang[isMin?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).addClass("highcharts-range-label").attr({padding:2}).add(inputGroup),inputGroup.offset+=label.width+5,this[name+"DateBox"]=dateBox=renderer.label("",inputGroup.offset).addClass("highcharts-range-input").attr({padding:2,width:options.inputBoxWidth||90,height:options.inputBoxHeight||17,stroke:options.inputBoxBorderColor||"#cccccc","stroke-width":1,"text-align":"center"}).on("click",function(){rangeSelector.showInput(name),rangeSelector[name+"Input"].focus()}).add(inputGroup),inputGroup.offset+=dateBox.width+(isMin?10:0),this[name+"Input"]=input=createElement("input",{name:name,className:"highcharts-range-selector",type:"text"},{top:chart.plotTop+"px"},div),label.css(merge(chartStyle,options.labelStyle)),dateBox.css(merge({color:"#333333"},chartStyle,options.inputStyle)),css(input,extend({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:chartStyle.fontSize,fontFamily:chartStyle.fontFamily,top:"-9999em"},options.inputStyle)),input.onfocus=function(){rangeSelector.showInput(name)},input.onblur=function(){rangeSelector.hideInput(name)},input.onchange=updateExtremes,input.onkeypress=function(event){13===event.keyCode&&updateExtremes()}},getPosition:function(){var chart=this.chart,options=chart.options.rangeSelector,top="top"===options.verticalAlign?chart.plotTop-chart.axisOffset[0]:0;return{buttonTop:top+options.buttonPosition.y,inputTop:top+options.inputPosition.y-10}},getYTDExtremes:function(dataMax,dataMin,useUTC){var min,now=new HCDate(dataMax),year=now[HCDate.hcGetFullYear](),startOfYear=useUTC?HCDate.UTC(year,0,1):+new HCDate(year,0,1);return min=Math.max(dataMin||0,startOfYear),now=now.getTime(),{max:Math.min(dataMax||now,now),min:min}},render:function(min,max){var buttonLeft,group,groupHeight,alignTranslateY,minPosition,translateX,rangeSelector=this,chart=rangeSelector.chart,renderer=chart.renderer,container=chart.container,chartOptions=chart.options,navButtonOptions=chartOptions.exporting&&!1!==chartOptions.exporting.enabled&&chartOptions.navigation&&chartOptions.navigation.buttonOptions,lang=defaultOptions.lang,div=rangeSelector.div,options=chartOptions.rangeSelector,floating=options.floating,buttons=rangeSelector.buttons,inputGroup=rangeSelector.inputGroup,buttonTheme=options.buttonTheme,buttonPosition=options.buttonPosition,inputPosition=options.inputPosition,inputEnabled=options.inputEnabled,states=buttonTheme&&buttonTheme.states,plotLeft=chart.plotLeft,buttonGroup=rangeSelector.buttonGroup,rendered=rangeSelector.rendered,verticalAlign=rangeSelector.options.verticalAlign,legend=chart.legend,legendOptions=legend&&legend.options,buttonPositionY=buttonPosition.y,inputPositionY=inputPosition.y,animate=rendered||!1,exportingX=0,translateY=0;if(!1!==options.enabled){var inputGroupX,inputGroupWidth,buttonGroupX,buttonGroupWidth;if(rendered||(rangeSelector.group=group=renderer.g("range-selector-group").attr({zIndex:7}).add(),rangeSelector.buttonGroup=buttonGroup=renderer.g("range-selector-buttons").add(group),rangeSelector.zoomText=renderer.text(lang.rangeSelectorZoom,pick(plotLeft+buttonPosition.x,plotLeft),15).css(options.labelStyle).add(buttonGroup),buttonLeft=pick(plotLeft+buttonPosition.x,plotLeft)+rangeSelector.zoomText.getBBox().width+5,each(rangeSelector.buttonOptions,function(rangeOptions,i){buttons[i]=renderer.button(rangeOptions.text,buttonLeft,0,function(){var callDefaultEvent,buttonEvents=rangeOptions.events&&rangeOptions.events.click;buttonEvents&&(callDefaultEvent=buttonEvents.call(rangeOptions)),!1!==callDefaultEvent&&rangeSelector.clickButton(i),rangeSelector.isActive=!0},buttonTheme,states&&states.hover,states&&states.select,states&&states.disabled).attr({"text-align":"center"}).add(buttonGroup),buttonLeft+=buttons[i].width+pick(options.buttonSpacing,5)}),!1!==inputEnabled&&(rangeSelector.div=div=createElement("div",null,{position:"relative",height:0,zIndex:1}),container.parentNode.insertBefore(div,container),rangeSelector.inputGroup=inputGroup=renderer.g("input-group").add(group),inputGroup.offset=0,rangeSelector.drawInput("min"),rangeSelector.drawInput("max"))),plotLeft=chart.plotLeft-chart.spacing[3],rangeSelector.updateButtonStates(),navButtonOptions&&this.titleCollision(chart)&&"top"===verticalAlign&&"right"===buttonPosition.align&&buttonPosition.y+buttonGroup.getBBox().height-12<(navButtonOptions.y||0)+navButtonOptions.height&&(exportingX=-40),"left"===buttonPosition.align?translateX=buttonPosition.x-chart.spacing[3]:"right"===buttonPosition.align&&(translateX=buttonPosition.x+exportingX-chart.spacing[1]),buttonGroup.align({y:buttonPosition.y,width:buttonGroup.getBBox().width,align:buttonPosition.align,x:translateX},!0,chart.spacingBox),rangeSelector.group.placed=animate,rangeSelector.buttonGroup.placed=animate,!1!==inputEnabled)exportingX=navButtonOptions&&this.titleCollision(chart)&&"top"===verticalAlign&&"right"===inputPosition.align&&inputPosition.y-inputGroup.getBBox().height-12<(navButtonOptions.y||0)+navButtonOptions.height+chart.spacing[0]?-40:0,"left"===inputPosition.align?translateX=plotLeft:"right"===inputPosition.align&&(translateX=-Math.max(chart.axisOffset[1],-exportingX)),inputGroup.align({y:inputPosition.y,width:inputGroup.getBBox().width,align:inputPosition.align,x:inputPosition.x+translateX-2},!0,chart.spacingBox),inputGroupX=inputGroup.alignAttr.translateX+inputGroup.alignOptions.x-exportingX+inputGroup.getBBox().x+2,inputGroupWidth=inputGroup.alignOptions.width,buttonGroupX=buttonGroup.alignAttr.translateX+buttonGroup.getBBox().x,buttonGroupWidth=buttonGroup.getBBox().width+20,(inputPosition.align===buttonPosition.align||inputGroupX<buttonGroupX+buttonGroupWidth&&buttonGroupX<inputGroupX+inputGroupWidth&&buttonPositionY<inputPositionY+inputGroup.getBBox().height)&&inputGroup.attr({translateX:inputGroup.alignAttr.translateX+(chart.axisOffset[1]>=-exportingX?0:-exportingX),translateY:inputGroup.alignAttr.translateY+buttonGroup.getBBox().height+10}),rangeSelector.setInputValue("min",min),rangeSelector.setInputValue("max",max),rangeSelector.inputGroup.placed=animate;rangeSelector.group.align({verticalAlign:verticalAlign},!0,chart.spacingBox),groupHeight=rangeSelector.group.getBBox().height+20,alignTranslateY=rangeSelector.group.alignAttr.translateY,"bottom"===verticalAlign&&(translateY=alignTranslateY-(groupHeight=groupHeight+(legendOptions&&"bottom"===legendOptions.verticalAlign&&legendOptions.enabled&&!legendOptions.floating?legend.legendHeight+pick(legendOptions.margin,10):0)-20)-(floating?0:options.y)-10),"top"===verticalAlign?(floating&&(translateY=0),chart.titleOffset&&(translateY=chart.titleOffset+chart.options.title.margin),translateY+=chart.margin[0]-chart.spacing[0]||0):"middle"===verticalAlign&&(inputPositionY===buttonPositionY?translateY=inputPositionY<0?alignTranslateY+minPosition:alignTranslateY:(inputPositionY||buttonPositionY)&&(inputPositionY<0||buttonPositionY<0?translateY-=Math.min(inputPositionY,buttonPositionY):translateY=alignTranslateY-groupHeight+minPosition)),rangeSelector.group.translate(options.x,options.y+Math.floor(translateY)),!1!==inputEnabled&&(rangeSelector.minInput.style.marginTop=rangeSelector.group.translateY+"px",rangeSelector.maxInput.style.marginTop=rangeSelector.group.translateY+"px"),rangeSelector.rendered=!0}},getHeight:function(){var minPosition,rangeSelector=this,options=rangeSelector.options,rangeSelectorGroup=rangeSelector.group,inputPosition=options.inputPosition,buttonPosition=options.buttonPosition,yPosition=options.y,buttonPositionY=buttonPosition.y,inputPositionY=inputPosition.y,rangeSelectorHeight=0;return rangeSelectorHeight=rangeSelectorGroup?rangeSelectorGroup.getBBox(!0).height+13+yPosition:0,minPosition=Math.min(inputPositionY,buttonPositionY),(inputPositionY<0&&buttonPositionY<0||0<inputPositionY&&0<buttonPositionY)&&(rangeSelectorHeight+=Math.abs(minPosition)),rangeSelectorHeight},titleCollision:function(chart){return!(chart.options.title.text||chart.options.subtitle.text)},update:function(options){var chart=this.chart;merge(!0,chart.options.rangeSelector,options),this.destroy(),this.init(chart),chart.rangeSelector.render()},destroy:function(){var rSelector=this,minInput=rSelector.minInput,maxInput=rSelector.maxInput;rSelector.unMouseDown(),rSelector.unResize(),destroyObjectProperties(rSelector.buttons),minInput&&(minInput.onfocus=minInput.onblur=minInput.onchange=null),maxInput&&(maxInput.onfocus=maxInput.onblur=maxInput.onchange=null),H.objectEach(rSelector,function(val,key){val&&"chart"!==key&&(val.destroy?val.destroy():val.nodeType&&discardElement(this[key])),val!==RangeSelector.prototype[key]&&(rSelector[key]=null)},this)}},Axis.prototype.toFixedRange=function(pxMin,pxMax,fixedMin,fixedMax){var fixedRange=this.chart&&this.chart.fixedRange,newMin=pick(fixedMin,this.translate(pxMin,!0,!this.horiz)),newMax=pick(fixedMax,this.translate(pxMax,!0,!this.horiz)),changeRatio=fixedRange&&(newMax-newMin)/fixedRange;return.7<changeRatio&&changeRatio<1.3&&(fixedMax?newMin=newMax-fixedRange:newMax=newMin+fixedRange),isNumber(newMin)||(newMin=newMax=undefined),{min:newMin,max:newMax}},Axis.prototype.minFromRange=function(){var min,dataMin,range,rangeOptions=this.range,timeName={month:"Month",year:"FullYear"}[rangeOptions.type],max=this.max,getTrueRange=function(base,count){var date=new Date(base),basePeriod=date["get"+timeName]();return date["set"+timeName](basePeriod+count),basePeriod===date["get"+timeName]()&&date.setDate(0),date.getTime()-base};return isNumber(rangeOptions)?(min=max-rangeOptions,range=rangeOptions):(min=max+getTrueRange(max,-rangeOptions.count),this.chart&&(this.chart.fixedRange=max-min)),dataMin=pick(this.dataMin,Number.MIN_VALUE),isNumber(min)||(min=dataMin),min<=dataMin&&(min=dataMin,range===undefined&&(range=getTrueRange(min,rangeOptions.count)),this.newMax=Math.min(min+range,this.dataMax)),isNumber(max)||(min=undefined),min},wrap(Chart.prototype,"init",function(proceed,options,callback){addEvent(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new RangeSelector(this))}),proceed.call(this,options,callback)}),wrap(Chart.prototype,"render",function(proceed,options,callback){var verticalAlign,chart=this,axes=chart.axes,rangeSelector=chart.rangeSelector;rangeSelector&&(each(axes,function(axis){axis.updateNames(),axis.setScale()}),chart.getAxisMargins(),rangeSelector.render(),verticalAlign=rangeSelector.options.verticalAlign,rangeSelector.options.floating||("bottom"===verticalAlign?this.extraBottomMargin=!0:"middle"!==verticalAlign&&(this.extraTopMargin=!0))),proceed.call(this,options,callback)}),wrap(Chart.prototype,"update",function(proceed,options,redraw,oneToOne){var verticalAlign,chart=this,rangeSelector=chart.rangeSelector;this.extraBottomMargin=!1,this.extraTopMargin=!1,rangeSelector&&(rangeSelector.render(),verticalAlign=options.rangeSelector&&options.rangeSelector.verticalAlign||rangeSelector.options&&rangeSelector.options.verticalAlign,rangeSelector.options.floating||("bottom"===verticalAlign?this.extraBottomMargin=!0:"middle"!==verticalAlign&&(this.extraTopMargin=!0))),proceed.call(this,H.merge(!0,options,{chart:{marginBottom:pick(options.chart&&options.chart.marginBottom,chart.margin.bottom),spacingBottom:pick(options.chart&&options.chart.spacingBottom,chart.spacing.bottom)}}),redraw,oneToOne)}),wrap(Chart.prototype,"redraw",function(proceed,options,callback){var verticalAlign,rangeSelector=this.rangeSelector;rangeSelector&&!rangeSelector.options.floating&&(rangeSelector.render(),"bottom"===(verticalAlign=rangeSelector.options.verticalAlign)?this.extraBottomMargin=!0:"middle"!==verticalAlign&&(this.extraTopMargin=!0)),proceed.call(this,options,callback)}),Chart.prototype.adjustPlotArea=function(){var rangeSelectorHeight,rangeSelector=this.rangeSelector;this.rangeSelector&&(rangeSelectorHeight=rangeSelector.getHeight(),this.extraTopMargin&&(this.plotTop+=rangeSelectorHeight),this.extraBottomMargin&&(this.marginBottom+=rangeSelectorHeight))},Chart.prototype.callbacks.push(function(chart){function renderRangeSelector(){extremes=chart.xAxis[0].getExtremes(),isNumber(extremes.min)&&rangeSelector.render(extremes.min,extremes.max)}var extremes,unbindRender,unbindSetExtremes,rangeSelector=chart.rangeSelector;rangeSelector&&(unbindSetExtremes=addEvent(chart.xAxis[0],"afterSetExtremes",function(e){rangeSelector.render(e.min,e.max)}),unbindRender=addEvent(chart,"redraw",renderRangeSelector),renderRangeSelector()),addEvent(chart,"destroy",function destroyEvents(){rangeSelector&&(unbindRender(),unbindSetExtremes())})}),H.RangeSelector=RangeSelector}(Highcharts),function(H){var arrayMax=H.arrayMax,arrayMin=H.arrayMin,Axis=H.Axis,
Chart=H.Chart,defined=H.defined,each=H.each,extend=H.extend,format=H.format,grep=H.grep,inArray=H.inArray,isNumber=H.isNumber,isString=H.isString,map=H.map,merge=H.merge,pick=H.pick,Point=H.Point,Renderer=H.Renderer,Series=H.Series,splat=H.splat,SVGRenderer=H.SVGRenderer,VMLRenderer=H.VMLRenderer,wrap=H.wrap,seriesProto=Series.prototype,seriesInit=seriesProto.init,seriesProcessData=seriesProto.processData,pointTooltipFormatter=Point.prototype.tooltipFormatter;H.StockChart=H.stockChart=function(a,b,c){var opposite,hasRenderToArg=isString(a)||a.nodeName,options=arguments[hasRenderToArg?1:0],seriesOptions=options.series,defaultOptions=H.getOptions(),navigatorEnabled=pick(options.navigator&&options.navigator.enabled,defaultOptions.navigator.enabled,!0),disableStartOnTick=navigatorEnabled?{startOnTick:!1,endOnTick:!1}:null,lineOptions={marker:{enabled:!1,radius:2}},columnOptions={shadow:!1,borderWidth:0};return options.xAxis=map(splat(options.xAxis||{}),function(xAxisOptions){return merge({minPadding:0,maxPadding:0,overscroll:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},defaultOptions.xAxis,xAxisOptions,{type:"datetime",categories:null},disableStartOnTick)}),options.yAxis=map(splat(options.yAxis||{}),function(yAxisOptions){return opposite=pick(yAxisOptions.opposite,!0),merge({labels:{y:-2},opposite:opposite,showLastLabel:!1,title:{text:null}},defaultOptions.yAxis,yAxisOptions)}),options.series=null,(options=merge({chart:{panning:!0,pinchType:"x"},navigator:{enabled:navigatorEnabled},scrollbar:{enabled:pick(defaultOptions.scrollbar.enabled,!0)},rangeSelector:{enabled:pick(defaultOptions.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:lineOptions,spline:lineOptions,area:lineOptions,areaspline:lineOptions,arearange:lineOptions,areasplinerange:lineOptions,column:columnOptions,columnrange:columnOptions,candlestick:columnOptions,ohlc:columnOptions}},options,{isStock:!0})).series=seriesOptions,hasRenderToArg?new Chart(a,options,c):new Chart(options,b)},wrap(Axis.prototype,"autoLabelAlign",function(proceed){var key,chart=this.chart,options=this.options,panes=chart._labelPanes=chart._labelPanes||{},labelOptions=this.options.labels;return this.chart.options.isStock&&"yAxis"===this.coll&&!panes[key=options.top+","+options.height]&&labelOptions.enabled?(15===labelOptions.x&&(labelOptions.x=0),labelOptions.align===undefined&&(labelOptions.align="right"),panes[key]=this,"right"):proceed.apply(this,[].slice.call(arguments,1))}),wrap(Axis.prototype,"destroy",function(proceed){var chart=this.chart,key=this.options&&this.options.top+","+this.options.height;return key&&chart._labelPanes&&chart._labelPanes[key]===this&&delete chart._labelPanes[key],proceed.apply(this,Array.prototype.slice.call(arguments,1))}),wrap(Axis.prototype,"getPlotLinePath",function(proceed,value,lineWidth,old,force,translatedValue){function getAxis(coll){var otherColl="xAxis"===coll?"yAxis":"xAxis",opt=axis.options[otherColl];return isNumber(opt)?[chart[otherColl][opt]]:isString(opt)?[chart.get(opt)]:map(series,function(s){return s[otherColl]})}var x1,y1,x2,y2,axes2,uniqueAxes,transVal,axis=this,series=this.isLinked&&!this.series?this.linkedParent.series:this.series,chart=axis.chart,renderer=chart.renderer,axisLeft=axis.left,axisTop=axis.top,result=[],axes=[];return"xAxis"!==axis.coll&&"yAxis"!==axis.coll?proceed.apply(this,[].slice.call(arguments,1)):(axes=getAxis(axis.coll),axes2=axis.isXAxis?chart.yAxis:chart.xAxis,each(axes2,function(A){if(!defined(A.options.id)||-1===A.options.id.indexOf("navigator")){var a=A.isXAxis?"yAxis":"xAxis",rax=defined(A.options[a])?chart[a][A.options[a]]:chart[a][0];axis===rax&&axes.push(A)}}),uniqueAxes=axes.length?[]:[axis.isXAxis?chart.yAxis[0]:chart.xAxis[0]],each(axes,function(axis2){-1!==inArray(axis2,uniqueAxes)||H.find(uniqueAxes,function(unique){return unique.pos===axis2.pos&&unique.len&&axis2.len})||uniqueAxes.push(axis2)}),transVal=pick(translatedValue,axis.translate(value,null,null,old)),isNumber(transVal)&&(axis.horiz?each(uniqueAxes,function(axis2){var skip;y1=axis2.pos,y2=y1+axis2.len,((x1=x2=Math.round(transVal+axis.transB))<axisLeft||x1>axisLeft+axis.width)&&(force?x1=x2=Math.min(Math.max(axisLeft,x1),axisLeft+axis.width):skip=!0),skip||result.push("M",x1,y1,"L",x2,y2)}):each(uniqueAxes,function(axis2){var skip;x1=axis2.pos,x2=x1+axis2.len,((y1=y2=Math.round(axisTop+axis.height-transVal))<axisTop||y1>axisTop+axis.height)&&(force?y1=y2=Math.min(Math.max(axisTop,y1),axis.top+axis.height):skip=!0),skip||result.push("M",x1,y1,"L",x2,y2)})),0<result.length?renderer.crispPolyLine(result,lineWidth||1):null)}),SVGRenderer.prototype.crispPolyLine=function(points,width){var i;for(i=0;i<points.length;i+=6)points[i+1]===points[i+4]&&(points[i+1]=points[i+4]=Math.round(points[i+1])-width%2/2),points[i+2]===points[i+5]&&(points[i+2]=points[i+5]=Math.round(points[i+2])+width%2/2);return points},Renderer===VMLRenderer&&(VMLRenderer.prototype.crispPolyLine=SVGRenderer.prototype.crispPolyLine),wrap(Axis.prototype,"hideCrosshair",function(proceed,i){proceed.call(this,i),this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}),wrap(Axis.prototype,"drawCrosshair",function(proceed,e,point){if(proceed.call(this,e,point),defined(this.crosshair.label)&&this.crosshair.label.enabled&&this.cross){var posx,posy,crossBox,limit,align,value,chart=this.chart,options=this.options.crosshair.label,horiz=this.horiz,opposite=this.opposite,left=this.left,top=this.top,crossLabel=this.crossLabel,formatOption=options.format,formatFormat="",tickInside="inside"===this.options.tickPosition,snap=!1!==this.crosshair.snap,offset=0;e||(e=this.cross&&this.cross.e),align=horiz?"center":opposite?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center",crossLabel||(crossLabel=this.crossLabel=chart.renderer.label(null,null,null,options.shape||"callout").addClass("highcharts-crosshair-label"+(this.series[0]&&" highcharts-color-"+this.series[0].colorIndex)).attr({align:options.align||align,padding:pick(options.padding,8),r:pick(options.borderRadius,3),zIndex:2}).add(this.labelGroup)).attr({fill:options.backgroundColor||this.series[0]&&this.series[0].color||"#666666",stroke:options.borderColor||"","stroke-width":options.borderWidth||0}).css(extend({color:"#ffffff",fontWeight:"normal",fontSize:"11px",textAlign:"center"},options.style)),posy=horiz?(posx=snap?point.plotX+left:e.chartX,top+(opposite?0:this.height)):(posx=opposite?this.width+left:0,snap?point.plotY+top:e.chartY),formatOption||options.formatter||(this.isDatetimeAxis&&(formatFormat="%b %d, %Y"),formatOption="{value"+(formatFormat?":"+formatFormat:"")+"}"),value=snap?point[this.isXAxis?"x":"y"]:this.toValue(horiz?e.chartX:e.chartY),crossLabel.attr({text:formatOption?format(formatOption,{value:value}):options.formatter.call(this,value),x:posx,y:posy,visibility:"visible"}),crossBox=crossLabel.getBBox(),horiz?(tickInside&&!opposite||!tickInside&&opposite)&&(posy=crossLabel.y-crossBox.height):posy=crossLabel.y-crossBox.height/2,limit=horiz?{left:left-crossBox.x,right:left+this.width-crossBox.x}:{left:"left"===this.labelAlign?left:0,right:"right"===this.labelAlign?left+this.width:chart.chartWidth},crossLabel.translateX<limit.left&&(offset=limit.left-crossLabel.translateX),crossLabel.translateX+crossBox.width>=limit.right&&(offset=-(crossLabel.translateX+crossBox.width-limit.right)),crossLabel.attr({x:posx+offset,y:posy,anchorX:horiz?posx:this.opposite?0:chart.chartWidth,anchorY:horiz?this.opposite?chart.chartHeight:0:posy+crossBox.height/2})}}),seriesProto.init=function(){seriesInit.apply(this,arguments),this.setCompare(this.options.compare)},seriesProto.setCompare=function(compare){this.modifyValue="value"===compare||"percent"===compare?function(value,point){var compareValue=this.compareValue;if(value!==undefined&&compareValue!==undefined)return"value"===compare?value-=compareValue:value=value/compareValue*100-(100===this.options.compareBase?0:100),point&&(point.change=value),value}:null,this.userOptions.compare=compare,this.chart.hasRendered&&(this.isDirty=!0)},seriesProto.processData=function(){var i,processedXData,processedYData,length,compareValue,series=this,keyIndex=-1,compareStart=!0===series.options.compareStart?0:1;if(seriesProcessData.apply(this,arguments),series.xAxis&&series.processedYData)for(processedXData=series.processedXData,length=(processedYData=series.processedYData).length,series.pointArrayMap&&-1===(keyIndex=inArray("close",series.pointArrayMap))&&(keyIndex=inArray(series.pointValKey||"y",series.pointArrayMap)),i=0;i<length-compareStart;i++)if(compareValue=processedYData[i]&&-1<keyIndex?processedYData[i][keyIndex]:processedYData[i],isNumber(compareValue)&&processedXData[i+compareStart]>=series.xAxis.min&&0!==compareValue){series.compareValue=compareValue;break}},wrap(seriesProto,"getExtremes",function(proceed){var extremes;proceed.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(extremes=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)],this.dataMin=arrayMin(extremes),this.dataMax=arrayMax(extremes))}),Axis.prototype.setCompare=function(compare,redraw){this.isXAxis||(each(this.series,function(series){series.setCompare(compare)}),pick(redraw,!0)&&this.chart.redraw())},Point.prototype.tooltipFormatter=function(pointFormat){var point=this;return pointFormat=pointFormat.replace("{point.change}",(0<point.change?"+":"")+H.numberFormat(point.change,pick(point.series.tooltipOptions.changeDecimals,2))),pointTooltipFormatter.apply(this,[pointFormat])},wrap(Series.prototype,"render",function(proceed){this.chart.is3d&&this.chart.is3d()||this.chart.polar||!this.xAxis||this.xAxis.isRadial||(!this.clipBox&&this.animate?(this.clipBox=merge(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]?this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}):this.clipBox&&(this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len)),proceed.call(this)}),wrap(Chart.prototype,"getSelectedPoints",function(proceed){var points=proceed.call(this);return each(this.series,function(serie){serie.hasGroupedData&&(points=points.concat(grep(serie.points||[],function(point){return point.selected})))}),points}),wrap(Chart.prototype,"update",function(proceed,options){return"scrollbar"in options&&this.navigator&&(merge(!0,this.options.scrollbar,options.scrollbar),this.navigator.update({},!1),delete options.scrollbar),proceed.apply(this,Array.prototype.slice.call(arguments,1))})}(Highcharts)});