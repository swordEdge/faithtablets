"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,defined,each,noop,seriesTypes;defined=(H=Highcharts).defined,each=H.each,noop=H.noop,seriesTypes=H.seriesTypes,H.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(vis){var point=this,method=vis?"show":"hide";each(["graphic","dataLabel"],function(key){point[key]&&point[key][method]()})},setState:function(state){H.Point.prototype.setState.call(this,state),this.graphic&&this.graphic.attr({zIndex:"hover"===state?1:0})}},H.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:noop,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:seriesTypes.column.prototype.pointAttribs,translateColors:function(){var series=this,nullColor=this.options.nullColor,colorAxis=this.colorAxis,colorKey=this.colorKey;each(this.data,function(point){var color,value=point[colorKey];(color=point.options.color||(point.isNull?nullColor:colorAxis&&value!==undefined?colorAxis.toColor(value,point):point.color||series.color))&&(point.color=color)})},colorAttribs:function(point){var ret={};return defined(point.color)&&(ret[this.colorProp||"fill"]=point.color),ret}},function(H){var colorPointMixin=H.colorPointMixin,colorSeriesMixin=H.colorSeriesMixin,each=H.each,LegendSymbolMixin=H.LegendSymbolMixin,merge=H.merge,noop=H.noop,pick=H.pick,Series=H.Series,seriesType=H.seriesType,seriesTypes=H.seriesTypes;seriesType("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}},merge(colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var options;seriesTypes.scatter.prototype.init.apply(this,arguments),(options=this.options).pointRange=pick(options.pointRange,options.colsize||1),this.yAxis.axisPointRange=options.rowsize||1},translate:function(){var series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,seriesPointPadding=options.pointPadding||0,between=function(x,a,b){return Math.min(Math.max(a,x),b)};series.generatePoints(),each(series.points,function(point){var xPad=(options.colsize||1)/2,yPad=(options.rowsize||1)/2,x1=between(Math.round(xAxis.len-xAxis.translate(point.x-xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),x2=between(Math.round(xAxis.len-xAxis.translate(point.x+xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),y1=between(Math.round(yAxis.translate(point.y-yPad,0,1,0,1)),-yAxis.len,2*yAxis.len),y2=between(Math.round(yAxis.translate(point.y+yPad,0,1,0,1)),-yAxis.len,2*yAxis.len),pointPadding=pick(point.pointPadding,seriesPointPadding);point.plotX=point.clientX=(x1+x2)/2,point.plotY=(y1+y2)/2,point.shapeType="rect",point.shapeArgs={x:Math.min(x1,x2)+pointPadding,y:Math.min(y1,y2)+pointPadding,width:Math.abs(x2-x1)-2*pointPadding,height:Math.abs(y2-y1)-2*pointPadding}}),series.translateColors()},drawPoints:function(){seriesTypes.column.prototype.drawPoints.call(this),each(this.points,function(point){point.graphic.attr(this.colorAttribs(point))},this)},animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,alignDataLabel:seriesTypes.column.prototype.alignDataLabel,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,Series.prototype.getExtremes.call(this)}}),H.extend({haloPath:function(size){if(!size)return[];var rect=this.shapeArgs;return["M",rect.x-size,rect.y-size,"L",rect.x-size,rect.y+rect.height+size,rect.x+rect.width+size,rect.y+rect.height+size,rect.x+rect.width+size,rect.y-size,"Z"]}},colorPointMixin))}(Highcharts),function(H){var seriesType=H.seriesType,each=H.each,reduce=H.reduce,pick=H.pick,between=function(x,a,b){return Math.min(Math.max(a,x),b)},tilePaddingFromTileSize=function(series,xDiv,yDiv){var options=series.options;return{xPad:(options.colsize||1)/-xDiv,yPad:(options.rowsize||1)/-yDiv}};H.tileShapeTypes={hexagon:{alignDataLabel:H.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(series){return tilePaddingFromTileSize(series,3,2)},haloPath:function(size){if(!size)return[];var hexagon=this.tileEdges;return["M",hexagon.x2-size,hexagon.y1+size,"L",hexagon.x3+size,hexagon.y1+size,hexagon.x4+1.5*size,hexagon.y2,hexagon.x3+size,hexagon.y3-size,hexagon.x2-size,hexagon.y3-size,hexagon.x1-1.5*size,hexagon.y2,"Z"]},translate:function(){var yShift,series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,seriesPointPadding=options.pointPadding||0,xPad=(options.colsize||1)/3,yPad=(options.rowsize||1)/2;series.generatePoints(),each(series.points,function(point){var x1=between(Math.floor(xAxis.len-xAxis.translate(point.x-2*xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),x2=between(Math.floor(xAxis.len-xAxis.translate(point.x-xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),x3=between(Math.floor(xAxis.len-xAxis.translate(point.x+xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),x4=between(Math.floor(xAxis.len-xAxis.translate(point.x+2*xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),y1=between(Math.floor(yAxis.translate(point.y-yPad,0,1,0,1)),-yAxis.len,2*yAxis.len),y2=between(Math.floor(yAxis.translate(point.y,0,1,0,1)),-yAxis.len,2*yAxis.len),y3=between(Math.floor(yAxis.translate(point.y+yPad,0,1,0,1)),-yAxis.len,2*yAxis.len),pointPadding=pick(point.pointPadding,seriesPointPadding),midPointPadding=pointPadding*Math.abs(x2-x1)/Math.abs(y3-y2),xMidPadding=xAxis.reversed?-midPointPadding:midPointPadding,xPointPadding=xAxis.reversed?-pointPadding:pointPadding,yPointPadding=yAxis.reversed?-pointPadding:pointPadding;point.x%2&&(y1+=yShift=yShift||Math.round(Math.abs(y3-y1)/2)*(yAxis.reversed?-1:1),y2+=yShift,y3+=yShift),point.plotX=point.clientX=(x2+x3)/2,point.plotY=y2,x1+=xMidPadding+xPointPadding,x2+=xPointPadding,x3-=xPointPadding,x4-=xMidPadding+xPointPadding,y1-=yPointPadding,y3+=yPointPadding,point.tileEdges={x1:x1,x2:x2,x3:x3,x4:x4,y1:y1,y2:y2,y3:y3},point.shapeType="path",point.shapeArgs={d:["M",x2,y1,"L",x3,y1,x4,y2,x3,y3,x2,y3,x1,y2,"Z"]}}),series.translateColors()}},diamond:{alignDataLabel:H.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(series){return tilePaddingFromTileSize(series,2,2)},haloPath:function(size){if(!size)return[];var diamond=this.tileEdges;return["M",diamond.x2,diamond.y1+size,"L",diamond.x3+size,diamond.y2,diamond.x2,diamond.y3-size,diamond.x1-size,diamond.y2,"Z"]},translate:function(){var yShift,series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,seriesPointPadding=options.pointPadding||0,xPad=options.colsize||1,yPad=(options.rowsize||1)/2;series.generatePoints(),each(series.points,function(point){var x1=between(Math.round(xAxis.len-xAxis.translate(point.x-xPad,0,1,0,0)),-xAxis.len,2*xAxis.len),x2=between(Math.round(xAxis.len-xAxis.translate(point.x,0,1,0,0)),-xAxis.len,2*xAxis.len),x3=between(Math.round(xAxis.len-xAxis.translate(point.x+xPad,0,1,0,0)),-xAxis.len,2*xAxis.len),y1=between(Math.round(yAxis.translate(point.y-yPad,0,1,0,0)),-yAxis.len,2*yAxis.len),y2=between(Math.round(yAxis.translate(point.y,0,1,0,0)),-yAxis.len,2*yAxis.len),y3=between(Math.round(yAxis.translate(point.y+yPad,0,1,0,0)),-yAxis.len,2*yAxis.len),pointPadding=pick(point.pointPadding,seriesPointPadding),midPointPadding=pointPadding*Math.abs(x2-x1)/Math.abs(y3-y2),xPointPadding=xAxis.reversed?-midPointPadding:midPointPadding,yPointPadding=yAxis.reversed?-pointPadding:pointPadding;point.x%2&&(y1+=yShift=Math.abs(y3-y1)/2*(yAxis.reversed?-1:1),y2+=yShift,y3+=yShift),point.plotX=point.clientX=x2,point.plotY=y2,x1+=xPointPadding,x3-=xPointPadding,y1-=yPointPadding,y3+=yPointPadding,point.tileEdges={x1:x1,x2:x2,x3:x3,y1:y1,y2:y2,y3:y3},point.shapeType="path",point.shapeArgs={d:["M",x2,y1,"L",x3,y2,x2,y3,x1,y2,"Z"]}}),series.translateColors()}},circle:{alignDataLabel:H.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(series){return tilePaddingFromTileSize(series,2,2)},haloPath:function(size){return H.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,size+(size&&this.radius))},translate:function(){var colsizePx,yRadiusPx,xRadiusPx,radius,series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,seriesPointPadding=options.pointPadding||0,yRadius=(options.rowsize||1)/2,colsize=options.colsize||1,forceNextRadiusCompute=!1;series.generatePoints(),each(series.points,function(point){var x=between(Math.round(xAxis.len-xAxis.translate(point.x,0,1,0,0)),-xAxis.len,2*xAxis.len),y=between(Math.round(yAxis.translate(point.y,0,1,0,0)),-yAxis.len,2*yAxis.len),pointPadding=seriesPointPadding,hasPerPointPadding=!1;point.pointPadding!==undefined&&(pointPadding=point.pointPadding,forceNextRadiusCompute=hasPerPointPadding=!0),radius&&!forceNextRadiusCompute||(colsizePx=Math.abs(between(Math.floor(xAxis.len-xAxis.translate(point.x+colsize,0,1,0,0)),-xAxis.len,2*xAxis.len)-x),yRadiusPx=Math.abs(between(Math.floor(yAxis.translate(point.y+yRadius,0,1,0,0)),-yAxis.len,2*yAxis.len)-y),xRadiusPx=Math.floor(Math.sqrt(colsizePx*colsizePx+yRadiusPx*yRadiusPx)/2),radius=Math.min(colsizePx,xRadiusPx,yRadiusPx)-pointPadding,forceNextRadiusCompute&&!hasPerPointPadding&&(forceNextRadiusCompute=!1)),point.x%2&&(y+=yRadiusPx*(yAxis.reversed?-1:1)),point.plotX=point.clientX=x,point.plotY=y,point.radius=radius,point.shapeType="circle",point.shapeArgs={x:x,y:y,r:radius}}),series.translateColors()}},square:{alignDataLabel:H.seriesTypes.heatmap.prototype.alignDataLabel,translate:H.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:H.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}},H.wrap(H.Axis.prototype,"setAxisTranslation",function(proceed){proceed.apply(this,Array.prototype.slice.call(arguments,1));var axis=this,seriesPadding=reduce(H.map(axis.series,function(series){return series.getSeriesPixelPadding&&series.getSeriesPixelPadding(axis)}),function(a,b){return(a&&a.padding)>(b&&b.padding)?a:b})||{padding:0,axisLengthFactor:1},lengthPadding=Math.round(seriesPadding.padding*seriesPadding.axisLengthFactor);seriesPadding.padding&&(axis.len-=lengthPadding,proceed.apply(axis,Array.prototype.slice.call(arguments,1)),axis.minPixelPadding+=seriesPadding.padding,axis.len+=lengthPadding)}),seriesType("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var ret=H.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));return this.tileShape=H.tileShapeTypes[ret.tileShape],ret},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(axis){var coord1,coord2,isX=axis.isXAxis,padding=this.tileShape.getSeriesPadding(this);return padding?(coord1=Math.round(axis.translate(isX?2*padding.xPad:padding.yPad,0,1,0,1)),coord2=Math.round(axis.translate(isX?padding.xPad:0,0,1,0,1)),{padding:Math.abs(coord1-coord2)||0,axisLengthFactor:isX?2:1.1}):{padding:0,axisLengthFactor:1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},H.extend({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},H.colorPointMixin))}(Highcharts)});