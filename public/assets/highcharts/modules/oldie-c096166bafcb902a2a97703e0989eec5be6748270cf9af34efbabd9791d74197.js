"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,VMLRenderer,VMLRendererExtension,VMLElement,Chart,createElement,css,defined,deg2rad,discardElement,doc,each,erase,extend,extendClass,isArray,isNumber,isObject,merge,noop,pick,pInt,svg,SVGElement,SVGRenderer,win,wrap;Chart=(H=Highcharts).Chart,createElement=H.createElement,css=H.css,defined=H.defined,deg2rad=H.deg2rad,discardElement=H.discardElement,doc=H.doc,each=H.each,erase=H.erase,extend=H.extend,extendClass=H.extendClass,isArray=H.isArray,isNumber=H.isNumber,isObject=H.isObject,merge=H.merge,noop=H.noop,pick=H.pick,pInt=H.pInt,svg=H.svg,SVGElement=H.SVGElement,SVGRenderer=H.SVGRenderer,win=H.win,wrap=H.wrap,H.getOptions().global.VMLRadialGradientURL="http://code.highcharts.com/6.0.3/gfx/vml-radial-gradient.png",doc&&!doc.defaultView&&(H.getStyle=function(el,prop){var val,alias={width:"clientWidth",height:"clientHeight"}[prop];return el.style[prop]?H.pInt(el.style[prop]):("opacity"===prop&&(prop="filter"),alias?(el.style.zoom=1,Math.max(el[alias]-2*H.getStyle(el,"padding"),0)):(val=el.currentStyle[prop.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()})],"filter"===prop&&(val=val.replace(/alpha\(opacity=([0-9]+)\)/,function(a,b){return b/100})),""===val?1:H.pInt(val)))}),Array.prototype.forEach||(H.forEachPolyfill=function(fn,ctx){for(var i=0,len=this.length;i<len;i++)if(!1===fn.call(ctx,this[i],i,this))return i}),Array.prototype.indexOf||(H.indexOfPolyfill=function(arr){var len,i=0;if(arr)for(len=arr.length;i<len;i++)if(arr[i]===this)return i;return-1}),Array.prototype.filter||(H.filterPolyfill=function(fn){for(var ret=[],i=0,length=this.length;i<length;i++)fn(this[i],i)&&ret.push(this[i]);return ret}),Object.prototype.keys||(H.keysPolyfill=function(obj){var prop,result=[],hasOwnProperty=Object.prototype.hasOwnProperty;for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);return result}),Array.prototype.reduce||(H.reducePolyfill=function(func,initialValue){for(var context=this,accumulator=initialValue||{},len=this.length,i=0;i<len;++i)accumulator=func.call(context,accumulator,this[i],i,this);return accumulator}),svg||(wrap(H.SVGRenderer.prototype,"text",function(proceed){return proceed.apply(this,Array.prototype.slice.call(arguments,1)).css({position:"absolute"})}),H.Pointer.prototype.normalize=function(e,chartPosition){return(e=e||win.event).target||(e.target=e.srcElement),chartPosition||(this.chartPosition=chartPosition=H.offset(this.chart.container)),H.extend(e,{chartX:Math.round(Math.max(e.x,e.clientX-chartPosition.left)),chartY:Math.round(e.y)})},Chart.prototype.ieSanitizeSVG=function(svg){return svg=svg.replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(s){return s.toLowerCase()})},doc.createElementNS||(doc.createElementNS=function(ns,tagName){return doc.createElement(tagName)}),H.addEventListenerPolyfill=function(type,fn){function wrappedFn(e){e.target=e.srcElement||win,fn.call(el,e)}var el=this;el.attachEvent&&(el.hcEventsIE||(el.hcEventsIE={}),fn.hcKey||(fn.hcKey=H.uniqueKey()),el.hcEventsIE[fn.hcKey]=wrappedFn,el.attachEvent("on"+type,wrappedFn))},H.removeEventListenerPolyfill=function(type,fn){this.detachEvent&&(fn=this.hcEventsIE[fn.hcKey],this.detachEvent("on"+type,fn))},(VMLElement={docMode8:doc&&8===doc.documentMode,init:function(renderer,nodeName){var wrapper=this,markup=["<",nodeName,' filled="f" stroked="f"'],style=["position: ","absolute",";"],isDiv="div"===nodeName;("shape"===nodeName||isDiv)&&style.push("left:0;top:0;width:1px;height:1px;"),style.push("visibility: ",isDiv?"hidden":"visible"),markup.push(' style="',style.join(""),'"/>'),nodeName&&(markup=isDiv||"span"===nodeName||"img"===nodeName?markup.join(""):renderer.prepVML(markup),wrapper.element=createElement(markup)),wrapper.renderer=renderer},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;return parent&&(this.parentGroup=parent),inverted&&renderer.invertChild(element,parentNode),parentNode.appendChild(element),wrapper.added=!0,wrapper.alignOnAdd&&!wrapper.deferUpdateTransform&&wrapper.updateTransform(),wrapper.onAdd&&wrapper.onAdd(),this.className&&this.attr("class",this.className),wrapper},updateTransform:SVGElement.prototype.htmlUpdateTransform,setSpanRotation:function(){var rotation=this.rotation,costheta=Math.cos(rotation*deg2rad),sintheta=Math.sin(rotation*deg2rad);css(this.element,{filter:rotation?["progid:DXImageTransform.Microsoft.Matrix(M11=",costheta,", M12=",-sintheta,", M21=",sintheta,", M22=",costheta,", sizingMethod='auto expand')"].join(""):"none"})},getSpanCorrection:function(width,baseline,alignCorrection,rotation,align){var quad,costheta=rotation?Math.cos(rotation*deg2rad):1,sintheta=rotation?Math.sin(rotation*deg2rad):0,height=pick(this.elemHeight,this.element.offsetHeight),nonLeft=align&&"left"!==align;this.xCorr=costheta<0&&-width,this.yCorr=sintheta<0&&-height,quad=costheta*sintheta<0,this.xCorr+=sintheta*baseline*(quad?1-alignCorrection:alignCorrection),this.yCorr-=costheta*baseline*(rotation?quad?alignCorrection:1-alignCorrection:1),nonLeft&&(this.xCorr-=width*alignCorrection*(costheta<0?-1:1),rotation&&(this.yCorr-=height*alignCorrection*(sintheta<0?-1:1)),css(this.element,{textAlign:align}))},pathToVML:function(value){for(var i=value.length,path=[];i--;)isNumber(value[i])?path[i]=Math.round(10*value[i])-5:"Z"===value[i]?path[i]="x":(path[i]=value[i],!value.isArc||"wa"!==value[i]&&"at"!==value[i]||(path[i+5]===path[i+7]&&(path[i+7]+=value[i+7]>value[i+5]?1:-1),path[i+6]===path[i+8]&&(path[i+8]+=value[i+8]>value[i+6]?1:-1)));return path.join(" ")||"x"},clip:function(clipRect){var clipMembers,cssRet,wrapper=this;return cssRet=clipRect?(clipMembers=clipRect.members,erase(clipMembers,wrapper),clipMembers.push(wrapper),wrapper.destroyClip=function(){erase(clipMembers,wrapper)},clipRect.getCSS(wrapper)):(wrapper.destroyClip&&wrapper.destroyClip(),{clip:wrapper.docMode8?"inherit":"rect(auto)"}),wrapper.css(cssRet)},css:SVGElement.prototype.htmlCss,safeRemoveChild:function(element){element.parentNode&&discardElement(element)},destroy:function(){return this.destroyClip&&this.destroyClip(),SVGElement.prototype.destroy.apply(this)},on:function(eventType,handler){return this.element["on"+eventType]=function(){var evt=win.event;evt.target=evt.srcElement,handler(evt)},this},cutOffPath:function(path,length){var len;return 9!==(len=(path=path.split(/[ ,]/)).length)&&11!==len||(path[len-4]=path[len-2]=pInt(path[len-2])-10*length),path.join(" ")},shadow:function(shadowOptions,group,cutOff){var i,shadow,markup,strokeWidth,modifiedPath,shadowWidth,shadowElementOpacity,shadows=[],element=this.element,renderer=this.renderer,elemStyle=element.style,path=element.path;if(path&&"string"!=typeof path.value&&(path="x"),modifiedPath=path,shadowOptions){for(shadowWidth=pick(shadowOptions.width,3),shadowElementOpacity=(shadowOptions.opacity||.15)/shadowWidth,i=1;i<=3;i++)strokeWidth=2*shadowWidth+1-2*i,cutOff&&(modifiedPath=this.cutOffPath(path.value,strokeWidth+.5)),markup=['<shape isShadow="true" strokeweight="',strokeWidth,'" filled="false" path="',modifiedPath,'" coordsize="10 10" style="',element.style.cssText,'" />'],shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+pick(shadowOptions.offsetX,1),top:pInt(elemStyle.top)+pick(shadowOptions.offsetY,1)}),cutOff&&(shadow.cutOff=strokeWidth+1),markup=['<stroke color="',shadowOptions.color||"#000000",'" opacity="',shadowElementOpacity*i,'"/>'],createElement(renderer.prepVML(markup),null,null,shadow),group?group.element.appendChild(shadow):element.parentNode.insertBefore(shadow,element),shadows.push(shadow);this.shadows=shadows}return this},updateShadows:noop,setAttr:function(key,value){this.docMode8?this.element[key]=value:this.element.setAttribute(key,value)},classSetter:function(value){(this.added?this.element:this).className=value},dashstyleSetter:function(value,key,element){(element.getElementsByTagName("stroke")[0]||createElement(this.renderer.prepVML(["<stroke/>"]),null,null,element))[key]=value||"solid",this[key]=value},dSetter:function(value,key,element){var i,shadows=this.shadows;if(value=value||[],this.d=value.join&&value.join(" "),element.path=value=this.pathToVML(value),shadows)for(i=shadows.length;i--;)shadows[i].path=shadows[i].cutOff?this.cutOffPath(value,shadows[i].cutOff):value;this.setAttr(key,value)},fillSetter:function(value,key,element){var nodeName=element.nodeName;"SPAN"===nodeName?element.style.color=value:"IMG"!==nodeName&&(element.filled="none"!==value,this.setAttr("fillcolor",this.renderer.color(value,element,key,this)))},"fill-opacitySetter":function(value,key,element){createElement(this.renderer.prepVML(["<",key.split("-")[0],' opacity="',value,'"/>']),null,null,element)},opacitySetter:noop,rotationSetter:function(value,key,element){var style=element.style;this[key]=style[key]=value,style.left=-Math.round(Math.sin(value*deg2rad)+1)+"px",style.top=Math.round(Math.cos(value*deg2rad))+"px"},strokeSetter:function(value,key,element){this.setAttr("strokecolor",this.renderer.color(value,element,key,this))},"stroke-widthSetter":function(value,key,element){element.stroked=!!value,this[key]=value,isNumber(value)&&(value+="px"),this.setAttr("strokeweight",value)},titleSetter:function(value,key){this.setAttr(key,value)},visibilitySetter:function(value,key,element){"inherit"===value&&(value="visible"),this.shadows&&each(this.shadows,function(shadow){shadow.style[key]=value}),"DIV"===element.nodeName&&(value="hidden"===value?"-999em":0,this.docMode8||(element.style[key]=value?"visible":"hidden"),key="top"),element.style[key]=value},xSetter:function(value,key,element){this[key]=value,"x"===key?key="left":"y"===key&&(key="top"),this.updateClipping?(this[key]=value,this.updateClipping()):element.style[key]=value},zIndexSetter:function(value,key,element){element.style[key]=value}})["stroke-opacitySetter"]=VMLElement["fill-opacitySetter"],H.VMLElement=VMLElement=extendClass(SVGElement,VMLElement),VMLElement.prototype.ySetter=VMLElement.prototype.widthSetter=VMLElement.prototype.heightSetter=VMLElement.prototype.xSetter,VMLRendererExtension={Element:VMLElement,isIE8:-1<win.navigator.userAgent.indexOf("MSIE 8.0"),init:function(container,width,height){var boxWrapper,box,css,renderer=this;if(renderer.alignedObjects=[],box=(boxWrapper=renderer.createElement("div").css({position:"relative"})).element,container.appendChild(boxWrapper.element),renderer.isVML=!0,renderer.box=box,renderer.boxWrapper=boxWrapper,renderer.gradients={},renderer.cache={},renderer.cacheKeys=[],renderer.imgCount=0,renderer.setSize(width,height,!1),!doc.namespaces.hcv){doc.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),css="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{doc.createStyleSheet().cssText=css}catch(e){doc.styleSheets[0].cssText+=css}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(x,y,width,height){var clipRect=this.createElement(),isObj=isObject(x);return extend(clipRect,{members:[],count:0,left:(isObj?x.x:x)+1,top:(isObj?x.y:y)+1,width:(isObj?x.width:width)-1,height:(isObj?x.height:height)-1,getCSS:function(wrapper){var element=wrapper.element,nodeName=element.nodeName,isShape="shape"===nodeName,inverted=wrapper.inverted,rect=this,top=rect.top-(isShape?element.offsetTop:0),left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:"rect("+Math.round(inverted?left:top)+"px,"+Math.round(inverted?bottom:right)+"px,"+Math.round(inverted?right:bottom)+"px,"+Math.round(inverted?top:left)+"px)"};return!inverted&&wrapper.docMode8&&"DIV"===nodeName&&extend(ret,{width:right+"px",height:bottom+"px"}),ret},updateClipping:function(){each(clipRect.members,function(member){member.element&&member.css(clipRect.getCSS(member))})}})},color:function(color,elem,prop,wrapper){var colorObject,markup,fillType,renderer=this,regexRgba=/^rgba/,ret="none";if(color&&color.linearGradient?fillType="gradient":color&&color.radialGradient&&(fillType="pattern"),fillType){var stopColor,stopOpacity,x1,y1,x2,y2,opacity1,opacity2,color1,color2,firstStop,lastStop,gradient=color.linearGradient||color.radialGradient,fillAttr="",stops=color.stops,colors=[],addFillNode=function(){markup=['<fill colors="'+colors.join(",")+'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="',fillType,'" ',fillAttr,'focus="100%" method="any" />'],createElement(renderer.prepVML(markup),null,null,elem)};if(firstStop=stops[0],lastStop=stops[stops.length-1],0<firstStop[0]&&stops.unshift([0,firstStop[1]]),lastStop[0]<1&&stops.push([1,lastStop[1]]),each(stops,function(stop,i){stopOpacity=regexRgba.test(stop[1])?(colorObject=H.color(stop[1]),stopColor=colorObject.get("rgb"),colorObject.get("a")):(stopColor=stop[1],1),colors.push(100*stop[0]+"% "+stopColor),i?(opacity2=stopOpacity,color1=stopColor):(opacity1=stopOpacity,color2=stopColor)}),"fill"===prop)if("gradient"===fillType)x1=gradient.x1||gradient[0]||0,y1=gradient.y1||gradient[1]||0,x2=gradient.x2||gradient[2]||0,y2=gradient.y2||gradient[3]||0,fillAttr='angle="'+(90-180*Math.atan((y2-y1)/(x2-x1))/Math.PI)+'"',addFillNode();else{var bBox,r=gradient.r,sizex=2*r,sizey=2*r,cx=gradient.cx,cy=gradient.cy,radialReference=elem.radialReference,applyRadialGradient=function(){radialReference&&(bBox=wrapper.getBBox(),cx+=(radialReference[0]-bBox.x)/bBox.width-.5,cy+=(radialReference[1]-bBox.y)/bBox.height-.5,sizex*=radialReference[2]/bBox.width,sizey*=radialReference[2]/bBox.height),fillAttr='src="'+H.getOptions().global.VMLRadialGradientURL+'" size="'+sizex+","+sizey+'" origin="0.5,0.5" position="'+cx+","+cy+'" color2="'+color2+'" ',addFillNode()};wrapper.added?applyRadialGradient():wrapper.onAdd=applyRadialGradient,ret=color1}else ret=stopColor}else if(regexRgba.test(color)&&"IMG"!==elem.tagName)colorObject=H.color(color),wrapper[prop+"-opacitySetter"](colorObject.get("a"),prop,elem),ret=colorObject.get("rgb");else{var propNodes=elem.getElementsByTagName(prop);propNodes.length&&(propNodes[0].opacity=1,propNodes[0].type="solid"),ret=color}return ret},prepVML:function(markup){var vmlStyle="display:inline-block;behavior:url(#default#VML);",isIE8=this.isIE8;return markup=markup.join(""),markup=isIE8?-1===(markup=markup.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?markup.replace("/>",' style="'+vmlStyle+'" />'):markup.replace('style="','style="'+vmlStyle):markup.replace("<","<hcv:")},text:SVGRenderer.prototype.html,path:function(path){var attr={coordsize:"10 10"};return isArray(path)?attr.d=path:isObject(path)&&extend(attr,path),this.createElement("shape").attr(attr)},circle:function(x,y,r){var circle=this.symbol("circle");return isObject(x)&&(r=x.r,y=x.y,x=x.x),circle.isCircle=!0,circle.r=r,circle.attr({x:x,y:y})},g:function(name){var attribs;return name&&(attribs={className:"highcharts-"+name,"class":"highcharts-"+name}),this.createElement("div").attr(attribs)},image:function(src,x,y,width,height){var obj=this.createElement("img").attr({src:src});return 1<arguments.length&&obj.attr({x:x,y:y,width:width,height:height}),obj},createElement:function(nodeName){return"rect"===nodeName?this.symbol(nodeName):SVGRenderer.prototype.createElement.call(this,nodeName)},invertChild:function(element,parentNode){var ren=this,parentStyle=parentNode.style,imgStyle="IMG"===element.tagName&&element.style;css(element,{flip:"x",left:pInt(parentStyle.width)-(imgStyle?pInt(imgStyle.top):1),top:pInt(parentStyle.height)-(imgStyle?pInt(imgStyle.left):1),rotation:-90}),each(element.childNodes,function(child){ren.invertChild(child,element)})},symbols:{arc:function(x,y,w,h,options){var ret,start=options.start,end=options.end,radius=options.r||w||h,innerRadius=options.innerR,cosStart=Math.cos(start),sinStart=Math.sin(start),cosEnd=Math.cos(end),sinEnd=Math.sin(end);return end-start==0?["x"]:(ret=["wa",x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd],options.open&&!innerRadius&&ret.push("e","M",x,y),ret.push("at",x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,"x","e"),ret.isArc=!0,ret)},circle:function(x,y,w,h,wrapper){return wrapper&&defined(wrapper.r)&&(w=h=2*wrapper.r),wrapper&&wrapper.isCircle&&(x-=w/2,y-=h/2),["wa",x,y,x+w,y+h,x+w,y+h/2,x+w,y+h/2,"e"]},rect:function(x,y,w,h,options){return SVGRenderer.prototype.symbols[defined(options)&&options.r?"callout":"square"].call(0,x,y,w,h,options)}}},H.VMLRenderer=VMLRenderer=function(){this.init.apply(this,arguments)},VMLRenderer.prototype=merge(SVGRenderer.prototype,VMLRendererExtension),H.Renderer=VMLRenderer),SVGRenderer.prototype.measureSpanWidth=function(text,styles){var offsetWidth,measuringSpan=doc.createElement("span"),textNode=doc.createTextNode(text);return measuringSpan.appendChild(textNode),css(measuringSpan,styles),this.box.appendChild(measuringSpan),offsetWidth=measuringSpan.offsetWidth,discardElement(measuringSpan),offsetWidth}});