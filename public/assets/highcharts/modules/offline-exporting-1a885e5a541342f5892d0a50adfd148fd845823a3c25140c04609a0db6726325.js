"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){!function(Highcharts){function getScript(scriptLocation,callback){var head=doc.getElementsByTagName("head")[0],script=doc.createElement("script");script.type="text/javascript",script.src=scriptLocation,script.onload=callback,script.onerror=function(){Highcharts.error("Error loading script "+scriptLocation)},head.appendChild(script)}var merge=Highcharts.merge,win=Highcharts.win,nav=win.navigator,doc=win.document,each=Highcharts.each,domurl=win.URL||win.webkitURL||win,isMSBrowser=/Edge\/|Trident\/|MSIE /.test(nav.userAgent),isEdgeBrowser=/Edge\/\d+/.test(nav.userAgent),loadEventDeferDelay=isMSBrowser?150:0;Highcharts.CanVGRenderer={},Highcharts.dataURLtoBlob=function(dataURL){if(win.atob&&win.ArrayBuffer&&win.Uint8Array&&win.Blob&&domurl.createObjectURL){for(var blob,parts=dataURL.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/),binStr=win.atob(parts[3]),buf=new win.ArrayBuffer(binStr.length),binary=new win.Uint8Array(buf),i=0;i<binary.length;++i)binary[i]=binStr.charCodeAt(i);return blob=new win.Blob([binary],{type:parts[1]}),domurl.createObjectURL(blob)}},Highcharts.downloadURL=function(dataURL,filename){var windowRef,a=doc.createElement("a");if("string"==typeof dataURL||dataURL instanceof String||!nav.msSaveOrOpenBlob){if((isEdgeBrowser||2e6<dataURL.length)&&!(dataURL=Highcharts.dataURLtoBlob(dataURL)))throw"Data URL length limit reached";if(a.download!==undefined)a.href=dataURL,a.download=filename,doc.body.appendChild(a),a.click(),doc.body.removeChild(a);else try{if((windowRef=win.open(dataURL,"chart"))===undefined||null===windowRef)throw"Failed to open window"}catch(e){win.location.href=dataURL}}else nav.msSaveOrOpenBlob(dataURL,filename)},Highcharts.svgToDataUrl=function(svg){var webKit=-1<nav.userAgent.indexOf("WebKit")&&nav.userAgent.indexOf("Chrome")<0;try{if(!webKit&&nav.userAgent.toLowerCase().indexOf("firefox")<0)return domurl.createObjectURL(new win.Blob([svg],{type:"image/svg+xml;charset-utf-16"}))}catch(e){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(svg)},Highcharts.imageToDataUrl=function(imageURL,imageType,callbackArgs,scale,successCallback,taintedCallback,noCanvasSupportCallback,failedLoadCallback,finallyCallback){var taintedHandler,img=new win.Image,loadHandler=function(){setTimeout(function(){var dataURL,canvas=doc.createElement("canvas"),ctx=canvas.getContext&&canvas.getContext("2d");try{if(ctx){canvas.height=img.height*scale,canvas.width=img.width*scale,ctx.drawImage(img,0,0,canvas.width,canvas.height);try{dataURL=canvas.toDataURL(imageType),successCallback(dataURL,imageType,callbackArgs,scale)}catch(e){taintedHandler(imageURL,imageType,callbackArgs,scale)}}else noCanvasSupportCallback(imageURL,imageType,callbackArgs,scale)}finally{finallyCallback&&finallyCallback(imageURL,imageType,callbackArgs,scale)}},loadEventDeferDelay)},errorHandler=function(){failedLoadCallback(imageURL,imageType,callbackArgs,scale),finallyCallback&&finallyCallback(imageURL,imageType,callbackArgs,scale)};taintedHandler=function(){img=new win.Image,taintedHandler=taintedCallback,img.crossOrigin="Anonymous",img.onload=loadHandler,img.onerror=errorHandler,img.src=imageURL},img.onload=loadHandler,img.onerror=errorHandler,img.src=imageURL},Highcharts.downloadSVGLocal=function(svg,options,failCallback,successCallback){function svgToPdf(svgElement,margin){var width=svgElement.width.baseVal.value+2*margin,height=svgElement.height.baseVal.value+2*margin,pdf=new win.jsPDF("l","pt",[width,height]);return each(svgElement.querySelectorAll('*[visibility="hidden"]'),function(node){node.parentNode.removeChild(node)}),win.svg2pdf(svgElement,pdf,{removeInvalid:!0}),pdf.output("datauristring")}function downloadPDF(){dummySVGContainer.innerHTML=svg;var titleElements,svgData,textElements=dummySVGContainer.getElementsByTagName("text"),svgElementStyle=dummySVGContainer.getElementsByTagName("svg")[0].style;each(textElements,function(el){each(["font-family","font-size"],function(property){!el.style[property]&&svgElementStyle[property]&&(el.style[property]=svgElementStyle[property])}),el.style["font-family"]=el.style["font-family"]&&el.style["font-family"].split(" ").splice(-1),titleElements=el.getElementsByTagName("title"),each(titleElements,function(titleElement){el.removeChild(titleElement)})}),svgData=svgToPdf(dummySVGContainer.firstChild,0);try{Highcharts.downloadURL(svgData,filename),successCallback&&successCallback()}catch(e){failCallback()}}var svgurl,blob,finallyHandler,objectURLRevoke=!0,libURL=options.libURL||Highcharts.getOptions().exporting.libURL,dummySVGContainer=doc.createElement("div"),imageType=options.type||"image/png",filename=(options.filename||"chart")+"."+("image/svg+xml"===imageType?"svg":imageType.split("/")[1]),scale=options.scale||1;if(libURL="/"!==libURL.slice(-1)?libURL+"/":libURL,"image/svg+xml"===imageType)try{svgurl=nav.msSaveOrOpenBlob?((blob=new MSBlobBuilder).append(svg),blob.getBlob("image/svg+xml")):Highcharts.svgToDataUrl(svg),Highcharts.downloadURL(svgurl,filename),successCallback&&successCallback()}catch(e){failCallback()}else"application/pdf"===imageType?win.jsPDF&&win.svg2pdf?downloadPDF():(objectURLRevoke=!0,getScript(libURL+"jspdf.js",function(){getScript(libURL+"svg2pdf.js",function(){downloadPDF()})})):(svgurl=Highcharts.svgToDataUrl(svg),finallyHandler=function(){try{domurl.revokeObjectURL(svgurl)}catch(e){}},Highcharts.imageToDataUrl(svgurl,imageType,{},scale,function(imageURL){try{Highcharts.downloadURL(imageURL,filename),successCallback&&successCallback()}catch(e){failCallback()}},function(){var canvas=doc.createElement("canvas"),ctx=canvas.getContext("2d"),imageWidth=svg.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*scale,imageHeight=svg.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*scale,downloadWithCanVG=function(){ctx.drawSvg(svg,0,0,imageWidth,imageHeight);try{Highcharts.downloadURL(nav.msSaveOrOpenBlob?canvas.msToBlob():canvas.toDataURL(imageType),filename),successCallback&&successCallback()}catch(e){failCallback()}finally{finallyHandler()}};canvas.width=imageWidth,canvas.height=imageHeight,win.canvg?downloadWithCanVG():(objectURLRevoke=!0,getScript(libURL+"rgbcolor.js",function(){getScript(libURL+"canvg.js",function(){downloadWithCanVG()})}))},failCallback,failCallback,function(){objectURLRevoke&&finallyHandler()}))},Highcharts.Chart.prototype.getSVGForLocalExport=function(options,chartOptions,failCallback,successCallback){var images,chartCopyContainer,chartCopyOptions,el,i,l,chart=this,imagesEmbedded=0,sanitize=function(svg){return chart.sanitizeSVG(svg,chartCopyOptions)},embeddedSuccess=function(imageURL,imageType,callbackArgs){++imagesEmbedded,callbackArgs.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",imageURL),imagesEmbedded===images.length&&successCallback(sanitize(chartCopyContainer.innerHTML))};Highcharts.wrap(Highcharts.Chart.prototype,"getChartHTML",function(proceed){var ret=proceed.apply(this,Array.prototype.slice.call(arguments,1));return chartCopyOptions=this.options,chartCopyContainer=this.container.cloneNode(!0),ret}),chart.getSVGForExport(options,chartOptions),images=chartCopyContainer.getElementsByTagName("image");try{if(!images.length)return void successCallback(sanitize(chartCopyContainer.innerHTML));for(i=0,l=images.length;i<l;++i)el=images[i],Highcharts.imageToDataUrl(el.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:el},options.scale,embeddedSuccess,failCallback,failCallback,failCallback)}catch(e){failCallback()}},Highcharts.Chart.prototype.exportChartLocal=function(exportingOptions,chartOptions){var chart=this,options=Highcharts.merge(chart.options.exporting,exportingOptions),fallbackToExportServer=function(){if(!1===options.fallbackToExportServer){if(!options.error)throw"Fallback to export server disabled";options.error(options)}else chart.exportChart(options)},svgSuccess=function(svg){-1<svg.indexOf("<foreignObject")&&"image/svg+xml"!==options.type?fallbackToExportServer():Highcharts.downloadSVGLocal(svg,options,fallbackToExportServer)};isMSBrowser&&("application/pdf"===options.type||chart.container.getElementsByTagName("image").length&&"image/svg+xml"!==options.type)||"application/pdf"===options.type&&chart.container.getElementsByTagName("image").length?fallbackToExportServer():chart.getSVGForLocalExport(options,chartOptions,fallbackToExportServer,svgSuccess)},merge(!0,Highcharts.getOptions().exporting,{libURL:"https://code.highcharts.com/6.0.3/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}})}(Highcharts)});