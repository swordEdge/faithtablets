"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,dateFormat,each,isObject,pick,wrap,Axis,Chart,Tick,axisSide;dateFormat=(H=Highcharts).dateFormat,each=H.each,isObject=H.isObject,pick=H.pick,wrap=H.wrap,Axis=H.Axis,Chart=H.Chart,Tick=H.Tick,axisSide={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"},Axis.prototype.isOuterAxis=function(){var axis=this,thisIndex=-1,isOuter=!0;return each(this.chart.axes,function(otherAxis,index){if(otherAxis.side===axis.side)if(otherAxis===axis)thisIndex=index;else if(0<=thisIndex&&thisIndex<index)return void(isOuter=!1)}),isOuter},Tick.prototype.getLabelWidth=function(){return this.label.getBBox().width},Axis.prototype.getMaxLabelLength=function(force){var tickPositions=this.tickPositions,ticks=this.ticks,maxLabelLength=0;return this.maxLabelLength&&!force||(each(tickPositions,function(tick){(tick=ticks[tick])&&tick.labelLength>maxLabelLength&&(maxLabelLength=tick.labelLength)}),this.maxLabelLength=maxLabelLength),this.maxLabelLength},Axis.prototype.addTitle=function(){var hasData,showAxis,textAlign,axis=this,renderer=axis.chart.renderer,axisParent=axis.axisParent,horiz=axis.horiz,opposite=axis.opposite,options=axis.options,axisTitleOptions=options.title;hasData=axis.hasData(),axis.showAxis=showAxis=hasData||pick(options.showEmpty,!0),options.title="",axis.axisTitle||((textAlign=axisTitleOptions.textAlign)||(textAlign=(horiz?{low:"left",middle:"center",high:"right"}:{low:opposite?"right":"left",middle:"center",high:opposite?"left":"right"})[axisTitleOptions.align]),axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:textAlign}).addClass("highcharts-axis-title").css(axisTitleOptions.style).add(axisParent),axis.axisTitle.isNew=!0),axis.axisTitle[showAxis?"show":"hide"](!0)},H.dateFormats={W:function(timestamp){var dayNumber,date=new Date(timestamp),day=0===date.getUTCDay()?7:date.getUTCDay(),time=date.getTime(),startOfYear=new Date(date.getUTCFullYear(),0,1,-6);return date.setDate(date.getUTCDate()+4-day),dayNumber=Math.floor((time-startOfYear)/864e5),1+Math.floor(dayNumber/7)},E:function(timestamp){return dateFormat("%a",timestamp,!0).charAt(0)}},wrap(Tick.prototype,"addLabel",function(proceed){var axis=this.axis,isCategoryAxis=axis.options.categories!==undefined,tickPositions=axis.tickPositions,lastTick=tickPositions[tickPositions.length-1],isLastTick=this.pos!==lastTick;(!axis.options.grid||isCategoryAxis||isLastTick)&&proceed.apply(this)}),wrap(Tick.prototype,"getLabelPosition",function(proceed,x,y,label){var newX,newPos,axisHeight,fontSize,labelMetrics,lblB,lblH,labelCenter,retVal=proceed.apply(this,Array.prototype.slice.call(arguments,1)),axis=this.axis,options=axis.options,tickInterval=options.tickInterval||1;return options.grid&&(fontSize=options.labels.style.fontSize,lblB=(labelMetrics=axis.chart.renderer.fontMetrics(fontSize,label)).b,lblH=labelMetrics.h,axis.horiz&&options.categories===undefined?(axisHeight=axis.axisGroup.getBBox().height,newPos=this.pos+tickInterval/2,retVal.x=axis.translate(newPos)+axis.left,labelCenter=axisHeight/2+lblH/2-Math.abs(lblH-lblB),axis.side===axisSide.top?retVal.y=y-labelCenter:retVal.y=y+labelCenter):(options.categories===undefined&&(newPos=this.pos+tickInterval/2,retVal.y=axis.translate(newPos)+axis.top+lblB/2),newX=this.getLabelWidth()/2-axis.maxLabelLength/2,axis.side===axisSide.left?retVal.x+=newX:retVal.x-=newX)),retVal}),wrap(Axis.prototype,"tickSize",function(proceed){var labelPadding,distance,axis=this,retVal=proceed.apply(axis,Array.prototype.slice.call(arguments,1));return axis.options.grid&&!axis.horiz&&(labelPadding=2*Math.abs(axis.defaultLeftAxisOptions.labels.x),axis.maxLabelLength||(axis.maxLabelLength=axis.getMaxLabelLength()),distance=axis.maxLabelLength+labelPadding,retVal[0]=distance),retVal}),wrap(Axis.prototype,"getOffset",function(proceed){var axisHeight,tickSize,axis=this,axisOffset=axis.chart.axisOffset,side=axis.side,options=axis.options,axisTitleOptions=options.title,addTitle=axisTitleOptions&&axisTitleOptions.text&&!1!==axisTitleOptions.enabled;axis.options.grid&&isObject(axis.options.title)?(tickSize=axis.tickSize("tick")[0],axisOffset[side]&&tickSize&&(axisHeight=axisOffset[side]+tickSize),addTitle&&axis.addTitle(),proceed.apply(axis,Array.prototype.slice.call(arguments,1)),axisOffset[side]=pick(axisHeight,axisOffset[side]),options.title=axisTitleOptions):proceed.apply(axis,Array.prototype.slice.call(arguments,1))}),wrap(Axis.prototype,"renderUnsquish",function(proceed){this.options.grid&&(this.labelRotation=0,this.options.labels.rotation=0),proceed.apply(this)}),wrap(Axis.prototype,"setOptions",function(proceed,userOptions){var axis=this;userOptions.grid&&axis.horiz&&(userOptions.startOnTick=!0,userOptions.minPadding=0,userOptions.endOnTick=!0),proceed.apply(this,Array.prototype.slice.call(arguments,1))}),wrap(Axis.prototype,"render",function(proceed){var labelPadding,distance,lineWidth,linePath,yStartIndex,yEndIndex,xStartIndex,xEndIndex,axisGroupBox,axis=this,options=axis.options,renderer=axis.chart.renderer;options.grid?(labelPadding=2*Math.abs(axis.defaultLeftAxisOptions.labels.x),distance=axis.maxLabelLength+labelPadding,lineWidth=options.lineWidth,axis.rightWall&&axis.rightWall.destroy(),proceed.apply(axis),axisGroupBox=axis.axisGroup.getBBox(),axis.horiz&&(axis.rightWall=renderer.path(["M",axisGroupBox.x+axis.width+1,axisGroupBox.y,"L",axisGroupBox.x+axis.width+1,axisGroupBox.y+axisGroupBox.height]).attr({stroke:options.tickColor||"#ccd6eb","stroke-width":options.tickWidth||1,zIndex:7,"class":"grid-wall"}).add(axis.axisGroup)),axis.isOuterAxis()&&axis.axisLine&&(axis.horiz&&(distance=axisGroupBox.height-1),lineWidth&&(xStartIndex=(linePath=axis.getLinePath(lineWidth)).indexOf("M")+1,xEndIndex=linePath.indexOf("L")+1,yStartIndex=linePath.indexOf("M")+2,yEndIndex=linePath.indexOf("L")+2,axis.side!==axisSide.top&&axis.side!==axisSide.left||(distance=-distance),axis.horiz?(linePath[yStartIndex]=linePath[yStartIndex]+distance,linePath[yEndIndex]=linePath[yEndIndex]+distance):(linePath[xStartIndex]=linePath[xStartIndex]+distance,linePath[xEndIndex]=linePath[xEndIndex]+distance),axis.axisLineExtra?axis.axisLineExtra.animate({d:linePath}):axis.axisLineExtra=renderer.path(linePath).attr({stroke:options.lineColor,"stroke-width":lineWidth,zIndex:7}).add(axis.axisGroup),axis.axisLine[axis.showAxis?"show":"hide"](!0)))):proceed.apply(axis)}),wrap(Chart.prototype,"render",function(proceed){var fontMetrics,fontSize,fontSizeToCellHeightRatio=25/11;each(this.axes,function(axis){var options=axis.options;options.grid&&(fontSize=options.labels.style.fontSize,fontMetrics=axis.chart.renderer.fontMetrics(fontSize),"datetime"===options.type&&(options.units=[["millisecond",[1]],["second",[1]],["minute",[1]],["hour",[1]],["day",[1]],["week",[1]],["month",[1]],["year",null]]),axis.horiz?options.tickLength=options.cellHeight||fontMetrics.h*fontSizeToCellHeightRatio:(options.tickWidth=1,options.lineWidth||(options.lineWidth=1)))}),proceed.apply(this)}),function(H){var defined=H.defined,color=H.Color,columnType=H.seriesTypes.column,each=H.each,isNumber=H.isNumber,isObject=H.isObject,merge=H.merge,pick=H.pick,seriesType=H.seriesType,seriesTypes=H.seriesTypes,wrap=H.wrap,Axis=H.Axis,Point=H.Point,Series=H.Series;seriesType("xrange","column",{colorByPoint:!0,dataLabels:{verticalAlign:"middle",inside:!0,formatter:function(){var amount=this.point.partialFill;return isObject(amount)&&(amount=amount.amount),defined(amount)||(amount=0),100*amount+"%"}},tooltip:{headerFormat:'<span style="font-size: 0.85em">{point.x} - {point.x2}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.yCategory}</b><br/>'},borderRadius:3,pointRange:0},{type:"xrange",parallelArrays:["x","x2","y"],requireSorting:!1,animate:seriesTypes.line.prototype.animate,cropShoulder:1,getExtremesFromAll:!0,getColumnMetrics:function(){function swapAxes(){each(chart.series,function(s){var xAxis=s.xAxis;s.xAxis=s.yAxis,s.yAxis=xAxis})}var metrics,chart=this.chart;return swapAxes(),metrics=columnType.prototype.getColumnMetrics.call(this),swapAxes(),metrics},cropData:function(xData,yData,min,max){var crop=Series.prototype.cropData.call(this,this.x2Data,yData,min,max);return crop.xData=xData.slice(crop.start,crop.end),crop},translatePoint:function(point){var widthDifference,shapeArgs,partialFill,dlLeft,dlRight,dlWidth,series=this,xAxis=series.xAxis,metrics=series.columnMetrics,minPointLength=series.options.minPointLength||0,plotX=point.plotX,posX=pick(point.x2,point.x+(point.len||0)),plotX2=xAxis.translate(posX,0,0,0,1),length=plotX2-plotX,inverted=this.chart.inverted,crisper=pick(series.options.borderWidth,1)%2/2;minPointLength&&((widthDifference=minPointLength-length)<0&&(widthDifference=0),plotX-=widthDifference/2,plotX2+=widthDifference/2),plotX=Math.max(plotX,-10),plotX2=Math.min(Math.max(plotX2,-10),xAxis.len+10),point.shapeArgs={x:Math.floor(Math.min(plotX,plotX2))+crisper,y:Math.floor(point.plotY+metrics.offset)+crisper,width:Math.round(Math.abs(plotX2-plotX)),height:Math.round(metrics.width),r:series.options.borderRadius},dlRight=(dlLeft=point.shapeArgs.x)+point.shapeArgs.width,dlLeft<0||dlRight>xAxis.len?(dlLeft=Math.min(xAxis.len,Math.max(0,dlLeft)),dlWidth=(dlRight=Math.max(0,Math.min(dlRight,xAxis.len)))-dlLeft,point.dlBox=merge(point.shapeArgs,{x:dlLeft,width:dlRight-dlLeft,centerX:dlWidth?dlWidth/2:null})):point.dlBox=null,point.tooltipPos[0]+=inverted?0:length/2,point.tooltipPos[1]-=inverted?length/2:metrics.width/2,(partialFill=point.partialFill)&&(isObject(partialFill)&&(partialFill=partialFill.amount),isNumber(partialFill)||(partialFill=0),shapeArgs=point.shapeArgs,point.partShapeArgs={x:shapeArgs.x,y:shapeArgs.y,width:shapeArgs.width,height:shapeArgs.height,r:series.options.borderRadius},point.clipRectArgs={x:shapeArgs.x,y:shapeArgs.y,width:Math.round(shapeArgs.width*partialFill),height:shapeArgs.height})},translate:function(){columnType.prototype.translate.apply(this,arguments),each(this.points,function(point){this.translatePoint(point)},this)},drawPoint:function(point,verb){var fill,series=this,seriesOpts=series.options,renderer=series.chart.renderer,graphic=point.graphic,type=point.shapeType,shapeArgs=point.shapeArgs,partShapeArgs=point.partShapeArgs,clipRectArgs=point.clipRectArgs,pfOptions=point.partialFill,state=point.selected&&"select",cutOff=seriesOpts.stacking&&!seriesOpts.borderRadius;point.isNull?graphic&&(point.graphic=graphic.destroy()):(graphic?point.graphicOriginal[verb](merge(shapeArgs)):(point.graphic=graphic=renderer.g("point").addClass(point.getClassName()).add(point.group||series.group),point.graphicOriginal=renderer[type](shapeArgs).addClass(point.getClassName()).addClass("highcharts-partfill-original").add(graphic)),partShapeArgs&&(point.graphicOverlay?(point.graphicOverlay[verb](merge(partShapeArgs)),point.clipRect.animate(merge(clipRectArgs))):(point.clipRect=renderer.clipRect(clipRectArgs.x,clipRectArgs.y,clipRectArgs.width,clipRectArgs.height),point.graphicOverlay=renderer[type](partShapeArgs).addClass("highcharts-partfill-overlay").add(graphic).clip(point.clipRect))),point.graphicOriginal.attr(series.pointAttribs(point,state)).shadow(seriesOpts.shadow,null,cutOff),partShapeArgs&&(isObject(pfOptions)||(pfOptions={}),isObject(seriesOpts.partialFill)&&(pfOptions=merge(pfOptions,seriesOpts.partialFill)),fill=pfOptions.fill||color(point.color||series.color).brighten(-.3).get(),point.graphicOverlay.attr(series.pointAttribs(point,state)).attr({fill:fill}).shadow(seriesOpts.shadow,null,cutOff)))},drawPoints:function(){var series=this,chart=this.chart,animationLimit=series.options.animationLimit||250,verb=chart.pointCount<animationLimit?"animate":"attr";each(series.points,function(point){series.drawPoint(point,verb)})}},{init:function(){Point.prototype.init.apply(this,arguments);var colors,series=this.series,colorCount=series.chart.options.chart.colorCount;return this.y||(this.y=0),series.options.colorByPoint&&(colorCount=(colors=series.options.colors||series.chart.options.colors).length,!this.options.color&&colors[this.y%colorCount]&&(this.color=colors[this.y%colorCount])),this.colorIndex=this.y%colorCount,this},getLabelConfig:function(){var point=this,cfg=Point.prototype.getLabelConfig.call(point),yCats=point.series.yAxis.categories;return cfg.x2=point.x2,cfg.yCategory=point.yCategory=yCats&&yCats[point.y],cfg},tooltipDateKeys:["x","x2"],isValid:function(){return"number"==typeof this.x&&"number"==typeof this.x2}}),wrap(Axis.prototype,"getSeriesExtremes",function(proceed){var dataMax,modMax,axis=this,axisSeries=axis.series;proceed.call(axis),axis.isXAxis&&(dataMax=pick(axis.dataMax,-Number.MAX_VALUE),each(axisSeries,function(series){series.x2Data&&each(series.x2Data,function(val){dataMax<val&&(dataMax=val,modMax=!0)})}),modMax&&(axis.dataMax=dataMax))})}(Highcharts)});