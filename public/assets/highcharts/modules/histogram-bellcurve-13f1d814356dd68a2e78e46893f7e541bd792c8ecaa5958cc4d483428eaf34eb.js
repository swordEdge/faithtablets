"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var derivedSeriesMixin=function(H){var each=H.each,Series=H.Series,addEvent=H.addEvent,fireEvent=H.fireEvent,wrap=H.wrap,derivedSeriesMixin={init:function(){Series.prototype.init.apply(this,arguments),this.initialised=!1,this.baseSeries=null,this.eventRemovers=[],this.addEvents()},setDerivedData:H.noop,setBaseSeries:function(){var chart=this.chart,baseSeriesOptions=this.options.baseSeries,baseSeries=baseSeriesOptions&&(chart.series[baseSeriesOptions]||chart.get(baseSeriesOptions));this.baseSeries=baseSeries||null},addEvents:function(){var chartSeriesLinked,derivedSeries=this;chartSeriesLinked=addEvent(this.chart,"seriesLinked",function(){derivedSeries.setBaseSeries(),derivedSeries.baseSeries&&!derivedSeries.initialised&&(derivedSeries.setDerivedData(),derivedSeries.addBaseSeriesEvents(),derivedSeries.initialised=!0)}),this.eventRemovers.push(chartSeriesLinked)},addBaseSeriesEvents:function(){var updatedDataRemover,destroyRemover,derivedSeries=this;updatedDataRemover=addEvent(derivedSeries.baseSeries,"updatedData",function(){derivedSeries.setDerivedData()}),destroyRemover=addEvent(derivedSeries.baseSeries,"destroy",function(){derivedSeries.baseSeries=null,derivedSeries.initialised=!1}),derivedSeries.eventRemovers.push(updatedDataRemover,destroyRemover)},destroy:function(){each(this.eventRemovers,function(remover){remover()}),Series.prototype.destroy.apply(this,arguments)}};return wrap(H.Chart.prototype,"linkSeries",function(p){p.call(this),fireEvent(this,"seriesLinked")}),derivedSeriesMixin}(Highcharts);!function(H,derivedSeriesMixin){function fitToBinLeftClosed(binWidth){return function(y){return Math.floor(y/binWidth)*binWidth}}var each=H.each,objectEach=H.objectEach,seriesType=H.seriesType,correctFloat=H.correctFloat,isNumber=H.isNumber,arrayMax=H.arrayMax,arrayMin=H.arrayMin,merge=H.merge,binsNumberFormulas={"square-root":function(baseSeries){return Math.round(Math.sqrt(baseSeries.options.data.length))},sturges:function(baseSeries){return Math.ceil(Math.log(baseSeries.options.data.length)*Math.LOG2E)},rice:function(baseSeries){return Math.ceil(2*Math.pow(baseSeries.options.data.length,1/3))}};seriesType("histogram","column",{binsNumber:"square-root",binWidth:undefined,pointPadding:0,groupPadding:0,grouping:!1,pointPlacement:"between",tooltip:{headerFormat:"",pointFormat:'<span style="font-size:10px">{point.x} - {point.x2}</span><br/><span style="color:{point.color}">\u25cf</span> {series.name} <b>{point.y}</b><br/>'}},merge(derivedSeriesMixin,{setDerivedData:function(){var data=this.derivedData(this.baseSeries.yData,this.binsNumber(),this.options.binWidth);this.setData(data,!1)},derivedData:function(baseData,binsNumber,binWidth){var x,fitToBin,max=arrayMax(baseData),min=arrayMin(baseData),frequencies={},data=[];for(binWidth=this.binWidth=isNumber(binWidth)?binWidth:(max-min)/binsNumber,x=(fitToBin=fitToBinLeftClosed(binWidth))(min);x<=max;x+=binWidth)frequencies[correctFloat(x)]=0;return each(baseData,function(y){var x=correctFloat(fitToBin(y));frequencies[x]++}),objectEach(frequencies,function(frequency,x){data.push({x:Number(x),y:frequency,x2:correctFloat(Number(x)+binWidth)})}),data.sort(function(a,b){return a.x-b.x}),data},binsNumber:function(){var binsNumberOption=this.options.binsNumber,binsNumber=binsNumberFormulas[binsNumberOption]||"function"==typeof binsNumberOption;return Math.ceil(binsNumber&&binsNumber(this.baseSeries)||(isNumber(binsNumberOption)?binsNumberOption:binsNumberFormulas["square-root"](this.baseSeries)))}}))}(Highcharts,derivedSeriesMixin),function(H,derivedSeriesMixin){function mean(data){var length=data.length,sum=reduce(data,function(sum,value){return sum+value},0);return 0<length&&sum/length}function standardDeviation(data,average){var sum,len=data.length;return average=isNumber(average)?average:mean(data),sum=reduce(data,function(sum,value){var diff=value-average;return sum+diff*diff},0),1<len&&Math.sqrt(sum/(len-1))}function normalDensity(x,mean,standardDeviation){var translation=x-mean;return Math.exp(-translation*translation/(2*standardDeviation*standardDeviation))/(standardDeviation*Math.sqrt(2*Math.PI))}var seriesType=H.seriesType,correctFloat=H.correctFloat,isNumber=H.isNumber,merge=H.merge,reduce=H.reduce;seriesType("bellcurve","areaspline",{intervals:3,pointsInInterval:3,marker:{enabled:!1}},merge(derivedSeriesMixin,{setMean:function(){this.mean=correctFloat(mean(this.baseSeries.yData))},setStandardDeviation:function(){this.standardDeviation=correctFloat(standardDeviation(this.baseSeries.yData,this.mean))},setDerivedData:function(){1<this.baseSeries.yData.length&&(this.setMean(),this.setStandardDeviation(),this.setData(this.derivedData(this.mean,this.standardDeviation),!1))},derivedData:function(mean,standardDeviation){var i,intervals=this.options.intervals,pointsInInterval=this.options.pointsInInterval,x=mean-intervals*standardDeviation,stop=intervals*pointsInInterval*2+1,increment=standardDeviation/pointsInInterval,data=[];for(i=0;i<stop;i++)data.push([x,normalDensity(x,mean,standardDeviation)]),x+=increment;return data}}))}(Highcharts,derivedSeriesMixin)});