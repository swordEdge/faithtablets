"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){!function(H){function stripArguments(){return Array.prototype.slice.call(arguments,1)}function drawPointsWrapped(proceed){proceed.apply(this),this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,pick(this.pointArrayMap,["y"]))}var pick=H.pick,wrap=H.wrap,each=H.each,extend=H.extend,isArray=H.isArray,fireEvent=H.fireEvent,Axis=H.Axis,Series=H.Series;extend(Axis.prototype,{isInBreak:function(brk,val){var repeat=brk.repeat||Infinity,from=brk.from,length=brk.to-brk.from,test=from<=val?(val-from)%repeat:repeat-(from-val)%repeat;return brk.inclusive?test<=length:test<length&&0!==test},isInAnyBreak:function(val,testKeep){var inbrk,keep,ret,breaks=this.options.breaks,i=breaks&&breaks.length;if(i){for(;i--;)this.isInBreak(breaks[i],val)&&(inbrk=!0,keep||(keep=pick(breaks[i].showPoints,!this.isXAxis)));ret=inbrk&&testKeep?inbrk&&!keep:inbrk}return ret}}),wrap(Axis.prototype,"setTickPositions",function(proceed){if(proceed.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var i,axis=this,tickPositions=this.tickPositions,info=this.tickPositions.info,newPositions=[];for(i=0;i<tickPositions.length;i++)axis.isInAnyBreak(tickPositions[i])||newPositions.push(tickPositions[i]);this.tickPositions=newPositions,this.tickPositions.info=info}}),wrap(Axis.prototype,"init",function(proceed,chart,userOptions){var breaks,axis=this;userOptions.breaks&&userOptions.breaks.length&&(userOptions.ordinal=!1),proceed.call(this,chart,userOptions),breaks=this.options.breaks,axis.isBroken=isArray(breaks)&&!!breaks.length,axis.isBroken&&(axis.val2lin=function(val){var brk,i,nval=val;for(i=0;i<axis.breakArray.length;i++)if((brk=axis.breakArray[i]).to<=val)nval-=brk.len;else{if(brk.from>=val)break;if(axis.isInBreak(brk,val)){nval-=val-brk.from;break}}return nval},axis.lin2val=function(val){var brk,i,nval=val;for(i=0;i<axis.breakArray.length&&!((brk=axis.breakArray[i]).from>=nval);i++)brk.to<nval?nval+=brk.len:axis.isInBreak(brk,nval)&&(nval+=brk.len);return nval},axis.setExtremes=function(newMin,newMax,redraw,animation,eventArguments){for(;this.isInAnyBreak(newMin);)newMin-=this.closestPointRange;for(;this.isInAnyBreak(newMax);)newMax-=this.closestPointRange;Axis.prototype.setExtremes.call(this,newMin,newMax,redraw,animation,eventArguments)},axis.setAxisTranslation=function(saveOld){Axis.prototype.setAxisTranslation.call(this,saveOld);var inBrk,repeat,start,i,breaks=axis.options.breaks,breakArrayT=[],breakArray=[],length=0,min=axis.userMin||axis.min,max=axis.userMax||axis.max,pointRangePadding=pick(axis.pointRangePadding,0);each(breaks,function(brk){repeat=brk.repeat||Infinity,axis.isInBreak(brk,min)&&(min+=brk.to%repeat-min%repeat),axis.isInBreak(brk,max)&&(max-=max%repeat-brk.from%repeat)}),each(breaks,function(brk){for(start=brk.from,repeat=brk.repeat||Infinity;min<start-repeat;)start-=repeat;for(;start<min;)start+=repeat;for(i=start;i<max;i+=repeat)breakArrayT.push({value:i,move:"in"}),breakArrayT.push({value:i+(brk.to-brk.from),move:"out",size:brk.breakSize})}),breakArrayT.sort(function(a,b){return a.value===b.value?("in"===a.move?0:1)-("in"===b.move?0:1):a.value-b.value}),inBrk=0,start=min,each(breakArrayT,function(brk){1===(inBrk+="in"===brk.move?1:-1)&&"in"===brk.move&&(start=brk.value),0===inBrk&&(breakArray.push({from:start,to:brk.value,len:brk.value-start-(brk.size||0)}),length+=brk.value-start-(brk.size||0))}),axis.breakArray=breakArray,axis.unitLength=max-min-length+pointRangePadding,fireEvent(axis,"afterBreaks"),axis.options.staticScale?axis.transA=axis.options.staticScale:axis.unitLength&&(axis.transA*=(max-axis.min+pointRangePadding)/axis.unitLength),pointRangePadding&&(axis.minPixelPadding=axis.transA*axis.minPointOffset),axis.min=min,axis.max=max})}),wrap(Series.prototype,"generatePoints",function(proceed){proceed.apply(this,stripArguments(arguments));var point,series=this,xAxis=series.xAxis,yAxis=series.yAxis,points=series.points,i=points.length,connectNulls=series.options.connectNulls;if(xAxis&&yAxis&&(xAxis.options.breaks||yAxis.options.breaks))for(;i--;)null===(point=points[i]).y&&!1===connectNulls||!xAxis.isInAnyBreak(point.x,!0)&&!yAxis.isInAnyBreak(point.y,!0)||(points.splice(i,1),this.data[i]&&this.data[i].destroyElements())}),H.Series.prototype.drawBreaks=function(axis,keys){var breaks,threshold,eventName,y,series=this,points=series.points;axis&&each(keys,function(key){breaks=axis.breakArray||[],threshold=axis.isXAxis?axis.min:pick(series.options.threshold,axis.min),each(points,function(point){y=pick(point["stack"+key.toUpperCase()],point[key]),each(breaks,function(brk){eventName=!1,threshold<brk.from&&y>brk.to||threshold>brk.from&&y<brk.from?eventName="pointBreak":(threshold<brk.from&&y>brk.from&&y<brk.to||threshold>brk.from&&y>brk.to&&y<brk.from)&&(eventName="pointInBreak"),eventName&&fireEvent(axis,eventName,{point:point,brk:brk})})})})},H.Series.prototype.gappedPath=function(){var xRange,gapSize=this.options.gapSize,points=this.points.slice(),i=points.length-1,yAxis=this.yAxis;if(gapSize&&0<i)for("value"!==this.options.gapUnit&&(gapSize*=this.closestPointRange);i--;)points[i+1].x-points[i].x>gapSize&&(xRange=(points[i].x+points[i+1].x)/2,points.splice(i+1,0,{isNull:!0,x:xRange}),this.options.stacking&&((yAxis.stacks[this.stackKey][xRange]=new H.StackItem(yAxis,yAxis.options.stackLabels,!1,xRange,this.stack)).total=0));return this.getGraphPath(points)},wrap(H.seriesTypes.column.prototype,"drawPoints",drawPointsWrapped),wrap(H.Series.prototype,"drawPoints",drawPointsWrapped)}(Highcharts)});