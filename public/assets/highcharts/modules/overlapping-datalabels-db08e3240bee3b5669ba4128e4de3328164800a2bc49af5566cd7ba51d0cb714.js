"use strict";!function(factory){"object"==typeof module&&module.exports?module.exports=factory:factory(Highcharts)}(function(Highcharts){var H,Chart,each,objectEach,pick;Chart=(H=Highcharts).Chart,each=H.each,objectEach=H.objectEach,pick=H.pick,(0,H.addEvent)(Chart.prototype,"render",function collectAndHide(){var labels=[];each(this.labelCollectors||[],function(collector){labels=labels.concat(collector())}),each(this.yAxis||[],function(yAxis){yAxis.options.stackLabels&&!yAxis.options.stackLabels.allowOverlap&&objectEach(yAxis.stacks,function(stack){objectEach(stack,function(stackItem){labels.push(stackItem.label)})})}),each(this.series||[],function(series){var dlOptions=series.options.dataLabels,collections=series.dataLabelCollections||["dataLabel"];(dlOptions.enabled||series._hasPointLabels)&&!dlOptions.allowOverlap&&series.visible&&each(collections,function(coll){each(series.points,function(point){point[coll]&&(point[coll].labelrank=pick(point.labelrank,point.shapeArgs&&point.shapeArgs.height),labels.push(point[coll]))})})}),this.hideOverlappingLabels(labels)}),Chart.prototype.hideOverlappingLabels=function(labels){var label,i,j,label1,label2,pos1,pos2,parent1,parent2,padding,bBox,len=labels.length,intersectRect=function(x1,y1,w1,h1,x2,y2,w2,h2){return!(x1+w1<x2||x2+w2<x1||y1+h1<y2||y2+h2<y1)};for(i=0;i<len;i++)(label=labels[i])&&(label.oldOpacity=label.opacity,label.newOpacity=1,label.width||(bBox=label.getBBox(),label.width=bBox.width,label.height=bBox.height));for(labels.sort(function(a,b){return(b.labelrank||0)-(a.labelrank||0)}),i=0;i<len;i++)for(label1=labels[i],j=i+1;j<len;++j)label2=labels[j],label1&&label2&&label1!==label2&&label1.placed&&label2.placed&&0!==label1.newOpacity&&0!==label2.newOpacity&&(pos1=label1.alignAttr,pos2=label2.alignAttr,parent1=label1.parentGroup,parent2=label2.parentGroup,padding=2*(label1.box?0:label1.padding||0),intersectRect(pos1.x+parent1.translateX,pos1.y+parent1.translateY,label1.width-padding,label1.height-padding,pos2.x+parent2.translateX,pos2.y+parent2.translateY,label2.width-padding,label2.height-padding)&&((label1.labelrank<label2.labelrank?label1:label2).newOpacity=0));each(labels,function(label){var complete,newOpacity;label&&(newOpacity=label.newOpacity,label.oldOpacity!==newOpacity&&label.placed&&(newOpacity?label.show(!0):complete=function(){label.hide()},label.alignAttr.opacity=newOpacity,label[label.isOld?"animate":"attr"](label.alignAttr,null,complete)),label.isOld=!0)})}});